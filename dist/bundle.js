/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@prisma/client/runtime/library":
/*!*************************************************!*\
  !*** external "@prisma/client/runtime/library" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = require("@prisma/client/runtime/library");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("cors");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("express");

/***/ }),

/***/ "helmet":
/*!*************************!*\
  !*** external "helmet" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("helmet");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "swagger-jsdoc":
/*!********************************!*\
  !*** external "swagger-jsdoc" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("swagger-jsdoc");

/***/ }),

/***/ "swagger-ui-express":
/*!*************************************!*\
  !*** external "swagger-ui-express" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("swagger-ui-express");

/***/ }),

/***/ "winston":
/*!**************************!*\
  !*** external "winston" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("winston");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var helmet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! helmet */ \"helmet\");\n/* harmony import */ var swagger_jsdoc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! swagger-jsdoc */ \"swagger-jsdoc\");\n/* harmony import */ var swagger_ui_express__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! swagger-ui-express */ \"swagger-ui-express\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var _routes_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/index.js */ \"./src/routes/index.js\");\n/* harmony import */ var _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./middleware/errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _config_prisma_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./config/prisma.js */ \"./src/config/prisma.js\");\n/* harmony import */ var _middleware_responseHandler_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./middleware/responseHandler.js */ \"./src/middleware/responseHandler.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1__.config();\nvar __filename = (0,url__WEBPACK_IMPORTED_MODULE_6__.fileURLToPath)(\"file:///C:/Users/HP/Downloads/respos/ResPos/micro%20service%20Respos/Respos_inventory_product/src/app.js\");\nvar __dirname = (0,path__WEBPACK_IMPORTED_MODULE_7__.dirname)(__filename);\nvar app = express__WEBPACK_IMPORTED_MODULE_0__();\nvar port = process.env.PORT || 5003;\n\n// CORS configuration\napp.use(cors__WEBPACK_IMPORTED_MODULE_2__({\n  origin: '*',\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization'],\n  exposedHeaders: ['Content-Disposition']\n}));\n\n// Basic middleware\napp.use(express__WEBPACK_IMPORTED_MODULE_0__.json());\napp.use(_middleware_responseHandler_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"]);\n\n// Static files handling\napp.use('/uploads', function (req, res, next) {\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Cross-Origin-Resource-Policy', 'cross-origin');\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization');\n  next();\n}, express__WEBPACK_IMPORTED_MODULE_0__[\"static\"]('uploads', {\n  setHeaders: function setHeaders(res) {\n    res.set('Cross-Origin-Resource-Policy', 'cross-origin');\n    res.set('Access-Control-Allow-Origin', '*');\n  }\n}));\n\n// Performance Monitoring\napp.use(function (req, res, next) {\n  var start = Date.now();\n  res.on('finish', function () {\n    var duration = Date.now() - start;\n    console.log(\"\".concat(req.method, \" \").concat(req.originalUrl, \" \").concat(res.statusCode, \" \").concat(duration, \"ms\"));\n  });\n  next();\n});\n\n// Swagger configuration\nvar swaggerOptions = {\n  definition: {\n    openapi: '3.0.0',\n    info: {\n      title: 'Respos API Documentation',\n      version: '1.0.0',\n      description: 'API Documentation with detailed specifications'\n    },\n    servers: [{\n      url: \"http://\".concat(process.env.HOST || 'localhost', \":\").concat(port),\n      description: 'Development server'\n    }],\n    components: {\n      securitySchemes: {\n        bearerAuth: {\n          type: 'http',\n          scheme: 'bearer',\n          bearerFormat: 'JWT'\n        }\n      }\n    },\n    security: [{\n      bearerAuth: []\n    }]\n  },\n  apis: ['./src/routes/*.js']\n};\nvar specs = swagger_jsdoc__WEBPACK_IMPORTED_MODULE_4__(swaggerOptions);\n\n// Swagger routes\napp.use('/api-docs', swagger_ui_express__WEBPACK_IMPORTED_MODULE_5__.serve);\napp.get('/api-docs', swagger_ui_express__WEBPACK_IMPORTED_MODULE_5__.setup(specs, {\n  explorer: false,\n  customSiteTitle: \"API Documentation\"\n}));\napp.get('/swagger.json', function (req, res) {\n  res.setHeader('Content-Type', 'application/json');\n  res.send(specs);\n});\n\n// Security\napp.use(helmet__WEBPACK_IMPORTED_MODULE_3__());\n\n// Routes\napp.use('/api/v2', _routes_index_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\napp.get('/', function (req, res) {\n  res.send('Welcome to Respos API! Go to /api-docs for documentation');\n});\n\n// Error handling\napp.use(_middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_10__.errorHandler);\n\n// Database connection test\nvar testDatabaseConnection = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"].$connect();\n        case 3:\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info('Successfully connected to the database');\n          _context.next = 10;\n          break;\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].error('Error connecting to the database:', _context.t0);\n          process.exit(1);\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 6]]);\n  }));\n  return function testDatabaseConnection() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// Ensure default image exists\nfunction ensureDefaultImage() {\n  return _ensureDefaultImage.apply(this, arguments);\n} // Start server\nfunction _ensureDefaultImage() {\n  _ensureDefaultImage = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var defaultImagePath, defaultImageDir;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          defaultImagePath = (0,path__WEBPACK_IMPORTED_MODULE_7__.join)(__dirname, '../uploads/images/default.jpg');\n          _context3.prev = 1;\n          _context3.next = 4;\n          return fs__WEBPACK_IMPORTED_MODULE_8__.promises.access(defaultImagePath);\n        case 4:\n          _context3.next = 13;\n          break;\n        case 6:\n          _context3.prev = 6;\n          _context3.t0 = _context3[\"catch\"](1);\n          defaultImageDir = (0,path__WEBPACK_IMPORTED_MODULE_7__.dirname)(defaultImagePath);\n          _context3.next = 11;\n          return fs__WEBPACK_IMPORTED_MODULE_8__.promises.mkdir(defaultImageDir, {\n            recursive: true\n          });\n        case 11:\n          _context3.next = 13;\n          return fs__WEBPACK_IMPORTED_MODULE_8__.promises.copyFile((0,path__WEBPACK_IMPORTED_MODULE_7__.join)(__dirname, '../uploads/images/default.jpg'), defaultImagePath);\n        case 13:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 6]]);\n  }));\n  return _ensureDefaultImage.apply(this, arguments);\n}\napp.listen(port, /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n    while (1) switch (_context2.prev = _context2.next) {\n      case 0:\n        _context2.next = 2;\n        return testDatabaseConnection();\n      case 2:\n        _context2.next = 4;\n        return ensureDefaultImage()[\"catch\"](console.error);\n      case 4:\n        _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info(\"Server is running on http://localhost:\".concat(port));\n        _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info(\"Swagger documentation available at http://localhost:\".concat(port, \"/api-docs\"));\n      case 6:\n      case \"end\":\n        return _context2.stop();\n    }\n  }, _callee2);\n})));\napp.get('/uploads/images/:filename', function (req, res) {\n  var filename = req.params.filename;\n  var imagePath = path.join(__dirname, '../uploads/images', filename);\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Cross-Origin-Resource-Policy', 'cross-origin');\n  res.sendFile(imagePath);\n});\n\n// Error handlers\nprocess.on('unhandledRejection', function (err) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info('UNHANDLED REJECTION! Shutting down...');\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info(err.name, err.message);\n  process.exit(1);\n});\nprocess.on('uncaughtException', function (err) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info('UNCAUGHT EXCEPTION! Shutting down...');\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].info(err.name, err.message);\n  process.exit(1);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n\n//# sourceURL=webpack://node/./src/app.js?");

/***/ }),

/***/ "./src/config/prisma.js":
/*!******************************!*\
  !*** ./src/config/prisma.js ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: [{\n    emit: 'event',\n    level: 'query'\n  }]\n});\nprisma.$on('query', function (e) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].debug('Database query', {\n    query: e.query,\n    duration: e.duration + 'ms'\n  });\n});\n\n// Handle Prisma-specific errors\nprisma.$on('error', function (e) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Database error', {\n    error: e.message,\n    target: e.target\n  });\n});\nprisma.$on('info', function (e) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('Prisma Info', {\n    message: e.message\n  });\n});\nprisma.$on('warn', function (e) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warn('Prisma Warning', {\n    message: e.message\n  });\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n\n//# sourceURL=webpack://node/./src/config/prisma.js?");

/***/ }),

/***/ "./src/controllers/attributesController.js":
/*!*************************************************!*\
  !*** ./src/controllers/attributesController.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bulkDeleteAttributesController: () => (/* binding */ bulkDeleteAttributesController),\n/* harmony export */   getAttributesController: () => (/* binding */ getAttributesController),\n/* harmony export */   getAttributesDropController: () => (/* binding */ getAttributesDropController),\n/* harmony export */   manageAttributesController: () => (/* binding */ manageAttributesController)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _services_attributesService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/attributesService.js */ \"./src/services/attributesService.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar getAttributesController = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var attributesDetails;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return (0,_services_attributesService_js__WEBPACK_IMPORTED_MODULE_1__.getAttributesService)(req);\n        case 3:\n          attributesDetails = _context.sent;\n          res.status(200).json(attributesDetails);\n          _context.next = 12;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          console.error('Error :', _context.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context.t0\n            }\n          });\n          next(_context.t0);\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function getAttributesController(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageAttributesController = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var attributesData;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return (0,_services_attributesService_js__WEBPACK_IMPORTED_MODULE_1__.manageAttributesService)(req, res);\n        case 3:\n          attributesData = _context2.sent;\n          res.status(200).json(attributesData);\n          _context2.next = 12;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error('Error :', _context2.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context2.t0\n            }\n          });\n          next(_context2.t0);\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function manageAttributesController(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getAttributesDropController = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var attributesDropdown;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return (0,_services_attributesService_js__WEBPACK_IMPORTED_MODULE_1__.getAttributesDropService)(req);\n        case 3:\n          attributesDropdown = _context3.sent;\n          res.status(200).json(attributesDropdown);\n          _context3.next = 12;\n          break;\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error('Error :', _context3.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context3.t0\n            }\n          });\n          next(_context3.t0);\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return function getAttributesDropController(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar bulkDeleteAttributesController = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var bulkDeleteData;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return (0,_services_attributesService_js__WEBPACK_IMPORTED_MODULE_1__.bulkDeleteAttributesService)(req);\n        case 3:\n          bulkDeleteData = _context4.sent;\n          res.json({\n            success: true,\n            message: 'Attributes deleted successfully'\n          });\n          _context4.next = 12;\n          break;\n        case 7:\n          _context4.prev = 7;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.error('Error :', _context4.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context4.t0\n            }\n          });\n          next(_context4.t0);\n        case 12:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n  return function bulkDeleteAttributesController(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/controllers/attributesController.js?");

/***/ }),

/***/ "./src/controllers/offersController.js":
/*!*********************************************!*\
  !*** ./src/controllers/offersController.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOffersController: () => (/* binding */ getOffersController),\n/* harmony export */   manageOffersController: () => (/* binding */ manageOffersController),\n/* harmony export */   offersModalController: () => (/* binding */ offersModalController)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _services_offersService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/offersService.js */ \"./src/services/offersService.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar offersModalController = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var getModalData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return (0,_services_offersService_js__WEBPACK_IMPORTED_MODULE_1__.getOffersModalService)(req, res);\n        case 3:\n          getModalData = _context.sent;\n          res.status(200).json(getModalData);\n          _context.next = 12;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          console.error('Error :', _context.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context.t0\n            }\n          });\n          next(_context.t0);\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function offersModalController(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageOffersController = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var offersData;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return (0,_services_offersService_js__WEBPACK_IMPORTED_MODULE_1__.manageOffersService)(req, res);\n        case 3:\n          offersData = _context2.sent;\n          res.status(200).json(offersData);\n          _context2.next = 12;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error('Error :', _context2.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context2.t0\n            }\n          });\n          next(_context2.t0);\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function manageOffersController(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getOffersController = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var getOffersDetails;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return (0,_services_offersService_js__WEBPACK_IMPORTED_MODULE_1__.getOffersService)(req);\n        case 3:\n          getOffersDetails = _context3.sent;\n          if (!((getOffersDetails === null || getOffersDetails === void 0 ? void 0 : getOffersDetails.length) === 0)) {\n            _context3.next = 6;\n            break;\n          }\n          return _context3.abrupt(\"return\", res.status(404).json({\n            message: \"Offers not found\"\n          }));\n        case 6:\n          res.status(200).json(getOffersDetails);\n          _context3.next = 14;\n          break;\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error('Error :', _context3.t0);\n          express__WEBPACK_IMPORTED_MODULE_0__.response.status(500).json({\n            message: {\n              error: _context3.t0\n            }\n          });\n          next(_context3.t0);\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 9]]);\n  }));\n  return function getOffersController(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/controllers/offersController.js?");

/***/ }),

/***/ "./src/controllers/productController.js":
/*!**********************************************!*\
  !*** ./src/controllers/productController.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createVariant: () => (/* binding */ createVariant),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   deleteVariant: () => (/* binding */ deleteVariant),\n/* harmony export */   filterProducts: () => (/* binding */ filterProducts),\n/* harmony export */   getProductById: () => (/* binding */ getProductById),\n/* harmony export */   getProductToCreateModal: () => (/* binding */ getProductToCreateModal),\n/* harmony export */   getProducts: () => (/* binding */ getProducts),\n/* harmony export */   getUomsByCategoryController: () => (/* binding */ getUomsByCategoryController),\n/* harmony export */   getVariantById: () => (/* binding */ getVariantById),\n/* harmony export */   getVariants: () => (/* binding */ getVariants),\n/* harmony export */   manageProductController: () => (/* binding */ manageProductController),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateVariant: () => (/* binding */ updateVariant)\n/* harmony export */ });\n/* harmony import */ var _services_productService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/productService.js */ \"./src/services/productService.js\");\n/* harmony import */ var _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middleware/errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\nvar getProductToCreateModal = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var modalData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getProductModal(req.user.uoid);\n        case 3:\n          modalData = _context.sent;\n          res.json(modalData);\n          _context.next = 11;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error getting product modal:', _context.t0);\n          next(_context.t0);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function getProductToCreateModal(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createProduct = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var productData, userData, product;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          productData = req.body;\n          userData = {\n            uid: req.user.uid,\n            uoid: req.user.uoid\n          };\n          _context2.next = 5;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.createProduct(productData, userData);\n        case 5:\n          product = _context2.sent;\n          res.status(201).json(product);\n          _context2.next = 13;\n          break;\n        case 9:\n          _context2.prev = 9;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error creating product:', _context2.t0);\n          next(_context2.t0);\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 9]]);\n  }));\n  return function createProduct(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getProducts = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var products;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getAllProducts(req.user.uoid);\n        case 3:\n          products = _context3.sent;\n          res.json(products);\n          _context3.next = 11;\n          break;\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error getting products:', _context3.t0);\n          next(_context3.t0);\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return function getProducts(_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getProductById = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res, next) {\n    var product;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getProductById(parseInt(req.params.id), req.user.uoid);\n        case 3:\n          product = _context4.sent;\n          if (product) {\n            _context4.next = 6;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Product not found');\n        case 6:\n          res.json(product);\n          _context4.next = 13;\n          break;\n        case 9:\n          _context4.prev = 9;\n          _context4.t0 = _context4[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error getting product:', _context4.t0);\n          next(_context4.t0);\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 9]]);\n  }));\n  return function getProductById(_x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar updateProduct = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res, next) {\n    var productData, userData, product;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          productData = req.body;\n          userData = {\n            uid: req.user.uid,\n            uoid: req.user.uoid\n          };\n          _context5.next = 5;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.updateProduct(parseInt(req.params.id), productData, userData);\n        case 5:\n          product = _context5.sent;\n          res.json(product);\n          _context5.next = 13;\n          break;\n        case 9:\n          _context5.prev = 9;\n          _context5.t0 = _context5[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error updating product:', _context5.t0);\n          next(_context5.t0);\n        case 13:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 9]]);\n  }));\n  return function updateProduct(_x13, _x14, _x15) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar deleteProduct = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.deleteProduct(parseInt(req.params.id), req.user.uid);\n        case 3:\n          res.json({\n            message: 'Product deleted successfully'\n          });\n          _context6.next = 10;\n          break;\n        case 6:\n          _context6.prev = 6;\n          _context6.t0 = _context6[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error deleting product:', _context6.t0);\n          next(_context6.t0);\n        case 10:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 6]]);\n  }));\n  return function deleteProduct(_x16, _x17, _x18) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar filterProducts = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res, next) {\n    var filters, products;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          filters = req.body;\n          _context7.next = 4;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.filterProducts(filters, req.user.uoid);\n        case 4:\n          products = _context7.sent;\n          res.json(products);\n          _context7.next = 12;\n          break;\n        case 8:\n          _context7.prev = 8;\n          _context7.t0 = _context7[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error filtering products:', _context7.t0);\n          next(_context7.t0);\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 8]]);\n  }));\n  return function filterProducts(_x19, _x20, _x21) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\n// Variant Controllers\nvar createVariant = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res, next) {\n    var variantData, userData, variant;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          variantData = req.body;\n          userData = {\n            uid: req.user.uid,\n            uoid: req.user.uoid\n          };\n          _context8.next = 5;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.createVariant(parseInt(req.params.productId), variantData, userData);\n        case 5:\n          variant = _context8.sent;\n          res.status(201).json(variant);\n          _context8.next = 13;\n          break;\n        case 9:\n          _context8.prev = 9;\n          _context8.t0 = _context8[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error creating variant:', _context8.t0);\n          next(_context8.t0);\n        case 13:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[0, 9]]);\n  }));\n  return function createVariant(_x22, _x23, _x24) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar getVariants = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(req, res, next) {\n    var variants;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.prev = 0;\n          _context9.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getVariants(parseInt(req.params.productId));\n        case 3:\n          variants = _context9.sent;\n          res.json(variants);\n          _context9.next = 11;\n          break;\n        case 7:\n          _context9.prev = 7;\n          _context9.t0 = _context9[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error getting variants:', _context9.t0);\n          next(_context9.t0);\n        case 11:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee9, null, [[0, 7]]);\n  }));\n  return function getVariants(_x25, _x26, _x27) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar getVariantById = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(req, res, next) {\n    var variant;\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.prev = 0;\n          _context10.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getVariantById(parseInt(req.params.productId), parseInt(req.params.variantId));\n        case 3:\n          variant = _context10.sent;\n          if (variant) {\n            _context10.next = 6;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Variant not found');\n        case 6:\n          res.json(variant);\n          _context10.next = 13;\n          break;\n        case 9:\n          _context10.prev = 9;\n          _context10.t0 = _context10[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error getting variant:', _context10.t0);\n          next(_context10.t0);\n        case 13:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10, null, [[0, 9]]);\n  }));\n  return function getVariantById(_x28, _x29, _x30) {\n    return _ref10.apply(this, arguments);\n  };\n}();\nvar updateVariant = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(req, res, next) {\n    var variantData, userData, variant;\n    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.prev = 0;\n          variantData = req.body;\n          userData = {\n            uid: req.user.uid,\n            uoid: req.user.uoid\n          };\n          _context11.next = 5;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.updateVariant(parseInt(req.params.productId), parseInt(req.params.variantId), variantData, userData);\n        case 5:\n          variant = _context11.sent;\n          res.json(variant);\n          _context11.next = 13;\n          break;\n        case 9:\n          _context11.prev = 9;\n          _context11.t0 = _context11[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error updating variant:', _context11.t0);\n          next(_context11.t0);\n        case 13:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11, null, [[0, 9]]);\n  }));\n  return function updateVariant(_x31, _x32, _x33) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nvar deleteVariant = /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(req, res, next) {\n    return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.prev = 0;\n          _context12.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.deleteVariant(parseInt(req.params.productId), parseInt(req.params.variantId), req.user.uid);\n        case 3:\n          res.json({\n            message: 'Variant deleted successfully'\n          });\n          _context12.next = 10;\n          break;\n        case 6:\n          _context12.prev = 6;\n          _context12.t0 = _context12[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error deleting variant:', _context12.t0);\n          next(_context12.t0);\n        case 10:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee12, null, [[0, 6]]);\n  }));\n  return function deleteVariant(_x34, _x35, _x36) {\n    return _ref12.apply(this, arguments);\n  };\n}();\nvar getUomsByCategoryController = /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(req, res, next) {\n    var catId, getUomsData;\n    return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.prev = 0;\n          catId = req.params.catid;\n          _context13.next = 4;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.getUomsByCatService(catId);\n        case 4:\n          getUomsData = _context13.sent;\n          res.status(201).json(getUomsData);\n          _context13.next = 12;\n          break;\n        case 8:\n          _context13.prev = 8;\n          _context13.t0 = _context13[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error deleting variant:', _context13.t0);\n          next(_context13.t0);\n        case 12:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee13, null, [[0, 8]]);\n  }));\n  return function getUomsByCategoryController(_x37, _x38, _x39) {\n    return _ref13.apply(this, arguments);\n  };\n}();\nvar manageProductController = /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(req, res, next) {\n    var productData;\n    return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.prev = 0;\n          _context14.next = 3;\n          return _services_productService_js__WEBPACK_IMPORTED_MODULE_0__.manageProductService(req);\n        case 3:\n          productData = _context14.sent;\n          res.status(201).json(productData);\n          _context14.next = 11;\n          break;\n        case 7:\n          _context14.prev = 7;\n          _context14.t0 = _context14[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error creating product:', _context14.t0);\n          next(_context14.t0);\n        case 11:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14, null, [[0, 7]]);\n  }));\n  return function manageProductController(_x40, _x41, _x42) {\n    return _ref14.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://node/./src/controllers/productController.js?");

/***/ }),

/***/ "./src/controllers/prowastageController.js":
/*!*************************************************!*\
  !*** ./src/controllers/prowastageController.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWastageController: () => (/* binding */ getWastageController),\n/* harmony export */   getWastageModalController: () => (/* binding */ getWastageModalController),\n/* harmony export */   manageWastageController: () => (/* binding */ manageWastageController)\n/* harmony export */ });\n/* harmony import */ var _services_prowastageServices_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/prowastageServices.js */ \"./src/services/prowastageServices.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar manageWastageController = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var wastageData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return (0,_services_prowastageServices_js__WEBPACK_IMPORTED_MODULE_0__.manageWastageServices)(req, res);\n        case 3:\n          wastageData = _context.sent;\n          res.status(200).json(wastageData);\n          _context.next = 11;\n          break;\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error creating product:', _context.t0);\n          next(_context.t0);\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function manageWastageController(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getWastageModalController = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var modalData;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return (0,_services_prowastageServices_js__WEBPACK_IMPORTED_MODULE_0__.getWastageModalServices)(req, res);\n        case 3:\n          modalData = _context2.sent;\n          res.status(200).json(modalData);\n          _context2.next = 11;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error creating product:', _context2.t0);\n          next(_context2.t0);\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function getWastageModalController(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getWastageController = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res, next) {\n    var wastageData;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return (0,_services_prowastageServices_js__WEBPACK_IMPORTED_MODULE_0__.getWastageServices)(req, res);\n        case 3:\n          wastageData = _context3.sent;\n          res.status(200).json(wastageData);\n          _context3.next = 11;\n          break;\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error creating product:', _context3.t0);\n          next(_context3.t0);\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return function getWastageController(_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/controllers/prowastageController.js?");

/***/ }),

/***/ "./src/controllers/userLoginController.js":
/*!************************************************!*\
  !*** ./src/controllers/userLoginController.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   login: () => (/* binding */ login),\n/* harmony export */   logout: () => (/* binding */ logout)\n/* harmony export */ });\n/* harmony import */ var _services_userLoginService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/userLoginService.js */ \"./src/services/userLoginService.js\");\n/* harmony import */ var _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middleware/errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _utils_serializer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/serializer.js */ \"./src/utils/serializer.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\nvar login = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res, next) {\n    var _req$body, email, password, lowercaseEmail, result;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$body = req.body, email = _req$body.email, password = _req$body.password;\n          if (!(!email || !password)) {\n            _context.next = 4;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Email and password are required');\n        case 4:\n          // Convert email to lowercase\n          lowercaseEmail = email.toLowerCase();\n          _context.next = 7;\n          return (0,_services_userLoginService_js__WEBPACK_IMPORTED_MODULE_0__.authenticate)(lowercaseEmail, password);\n        case 7:\n          result = _context.sent;\n          _context.next = 10;\n          return (0,_services_userLoginService_js__WEBPACK_IMPORTED_MODULE_0__.updateLoginTime)(result.ulid);\n        case 10:\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].info('Login successful', {\n            email: email\n          });\n          res.status(200).json(result);\n          _context.next = 18;\n          break;\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warn('Login failed', {\n            // email: req.body.email,\n            error: _context.t0\n          });\n          next(_context.t0);\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 14]]);\n  }));\n  return function login(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar logout = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var ulid;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          ulid = req.body.ulid;\n          if (ulid) {\n            _context2.next = 4;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_1__.ValidationError('ulid is required');\n        case 4:\n          _context2.next = 6;\n          return (0,_services_userLoginService_js__WEBPACK_IMPORTED_MODULE_0__.updateLogoutTime)(ulid);\n        case 6:\n          res.status(200).json({\n            message: 'Logout successful'\n          });\n          _context2.next = 13;\n          break;\n        case 9:\n          _context2.prev = 9;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Logout failed', {\n            ulid: req.body.ulid,\n            error: _context2.t0.message\n          });\n          next(_context2.t0);\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 9]]);\n  }));\n  return function logout(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/controllers/userLoginController.js?");

/***/ }),

/***/ "./src/middleware/authMiddleware.js":
/*!******************************************!*\
  !*** ./src/middleware/authMiddleware.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var _errorHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\n\n\n\nvar authMiddleware = function authMiddleware(req, res, next) {\n  try {\n    var authHeader = req.header('Authorization');\n    var token = authHeader === null || authHeader === void 0 ? void 0 : authHeader.replace('Bearer ', '');\n    if (!token) {\n      return res.status(401).json({\n        message: 'No token, authorization denied'\n      });\n    }\n    try {\n      var decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify(token, \"4578794658552255DDFF\");\n      req.user = {\n        uid: decoded.uid,\n        uoid: decoded.uoid || decoded.roleid_orgid,\n        username: decoded.username,\n        roleid: decoded.roleid,\n        uaid: decoded.uaid\n      };\n      _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug('Token verified successfully', {\n        uid: decoded.uid,\n        path: req.path\n      });\n      next();\n    } catch (error) {\n      _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Token verification failed', {\n        error: error.message,\n        token: token.substring(0, 10) + '...',\n        path: req.path\n      });\n      throw new _errorHandler_js__WEBPACK_IMPORTED_MODULE_1__.AppError('Invalid or expired token', 401);\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n\n// Optional: Role-based authorization middleware\n// const authorize = (...allowedRoles) => {\n//     return (req, res, next) => {\n//         try {\n//             if (!req.user) {\n//                 throw new AppError('User not authenticated', 401);\n//             }\n\n//             if (!allowedRoles.includes(req.user.roleid)) {\n//                 logger.warn('Authorization failed: Invalid role', {\n//                     uid: req.user.uid,\n//                     roleid: req.user.roleid,\n//                     requiredRoles: allowedRoles,\n//                     path: req.path\n//                 });\n//                 throw new AppError('Not authorized to access this resource', 403);\n//             }\n\n//             next();\n//         } catch (error) {\n//             next(error);\n//         }\n//     };\n// };\n\n\n\n//# sourceURL=webpack://node/./src/middleware/authMiddleware.js?");

/***/ }),

/***/ "./src/middleware/errorHandler.js":
/*!****************************************!*\
  !*** ./src/middleware/errorHandler.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   DataTypeError: () => (/* binding */ DataTypeError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   errorHandler: () => (/* binding */ errorHandler)\n/* harmony export */ });\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _wrapNativeSuper(t) { var r = \"function\" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf(\"[native code]\"); } catch (n) { return \"function\" == typeof t; } }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\n\n\nvar AppError = /*#__PURE__*/function (_Error) {\n  function AppError(message, statusCode) {\n    var _this;\n    _classCallCheck(this, AppError);\n    _this = _callSuper(this, AppError, [message]);\n    _this.statusCode = statusCode;\n    _this.status = \"\".concat(statusCode).startsWith('4') ? 'fail' : 'error';\n    _this.isOperational = true;\n    Error.captureStackTrace(_this, _this.constructor);\n    return _this;\n  }\n  _inherits(AppError, _Error);\n  return _createClass(AppError);\n}(/*#__PURE__*/_wrapNativeSuper(Error));\nvar ValidationError = /*#__PURE__*/function (_Error2) {\n  function ValidationError(message) {\n    var _this2;\n    _classCallCheck(this, ValidationError);\n    _this2 = _callSuper(this, ValidationError, [message]);\n    _this2.name = 'ValidationError';\n    _this2.statusCode = 400;\n    return _this2;\n  }\n  _inherits(ValidationError, _Error2);\n  return _createClass(ValidationError);\n}(/*#__PURE__*/_wrapNativeSuper(Error));\nvar DataTypeError = /*#__PURE__*/function (_Error3) {\n  function DataTypeError(message) {\n    var _this3;\n    _classCallCheck(this, DataTypeError);\n    _this3 = _callSuper(this, DataTypeError, [message]);\n    _this3.name = 'DataTypeError';\n    _this3.statusCode = 400;\n    return _this3;\n  }\n  _inherits(DataTypeError, _Error3);\n  return _createClass(DataTypeError);\n}(/*#__PURE__*/_wrapNativeSuper(Error));\nvar errorHandler = function errorHandler(err, req, res, next) {\n  _utils_logger_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error('Error:', {\n    error: err.message,\n    stack: err.stack,\n    path: req.path,\n    method: req.method\n  });\n  var statusCode = err.statusCode || 500;\n  var message = err.message || 'Internal Server Error';\n  var errorType = err.name || 'UnknownError';\n  var errorCode = err.code || 'INTERNAL_ERROR';\n  var details = {};\n\n  // Handle Prisma Errors\n  if (err instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {\n    switch (err.code) {\n      case 'P2002':\n        statusCode = 400;\n        message = 'Duplicate entry found';\n        errorCode = 'UNIQUE_VIOLATION';\n        break;\n      case 'P2003':\n        statusCode = 400;\n        message = 'Referenced record not found';\n        errorCode = 'FOREIGN_KEY_VIOLATION';\n        break;\n      case 'P2025':\n        statusCode = 404;\n        message = 'Record not found';\n        errorCode = 'NOT_FOUND';\n        break;\n      default:\n        statusCode = 500;\n        message = 'Database error occurred';\n        errorCode = 'DATABASE_ERROR';\n    }\n    details = {\n      code: err.code,\n      meta: err.meta\n    };\n  } else if (err instanceof ValidationError) {\n    statusCode = 400;\n    errorType = 'ValidationError';\n    errorCode = 'VALIDATION_ERROR';\n  } else if (err instanceof DataTypeError) {\n    statusCode = 400;\n    errorType = 'DataTypeError';\n    errorCode = 'INVALID_DATA_TYPE';\n  } else if (err instanceof SyntaxError && err.status === 400 && 'body' in err) {\n    return res.status(400).json({\n      message: 'Invalid JSON in request body'\n    });\n  }\n  res.status(statusCode).json({\n    error: _objectSpread({\n      message: message,\n      status: statusCode,\n      type: errorType,\n      code: errorCode,\n      path: req.path,\n      method: req.method,\n      timestamp: new Date().toISOString()\n    },  true && {\n      stack: err.stack,\n      details: details\n    })\n  });\n};\n\n\n//# sourceURL=webpack://node/./src/middleware/errorHandler.js?");

/***/ }),

/***/ "./src/middleware/rbacMiddleware.js":
/*!******************************************!*\
  !*** ./src/middleware/rbacMiddleware.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ROLES: () => (/* binding */ ROLES),\n/* harmony export */   ROLE_GROUPS: () => (/* binding */ ROLE_GROUPS),\n/* harmony export */   rbacMiddleware: () => (/* binding */ rbacMiddleware)\n/* harmony export */ });\nvar ROLES = {\n  SUPER_ADMIN: 1,\n  OUTLET_MANAGER: 2,\n  WAITER: 3,\n  KITCHEN_MANAGER: 4,\n  INVENTORY_MANAGER: 5\n};\n\n// Predefined role combinations for common access patterns\nvar ROLE_GROUPS = {\n  ALL_MANAGERS: [ROLES.SUPER_ADMIN, ROLES.OUTLET_MANAGER, ROLES.KITCHEN_MANAGER, ROLES.INVENTORY_MANAGER],\n  KITCHEN_STAFF: [ROLES.SUPER_ADMIN, ROLES.OUTLET_MANAGER, ROLES.KITCHEN_MANAGER],\n  ORDER_HANDLERS: [ROLES.SUPER_ADMIN, ROLES.OUTLET_MANAGER, ROLES.WAITER],\n  ADMIN_ONLY: [ROLES.SUPER_ADMIN]\n};\nvar rbacMiddleware = function rbacMiddleware(allowedRoles) {\n  // Convert string input to array if needed\n  var roles = typeof allowedRoles === 'string' ? ROLE_GROUPS[allowedRoles] || [ROLES[allowedRoles]] : Array.isArray(allowedRoles) ? allowedRoles : [allowedRoles];\n  return function (req, res, next) {\n    if (!req.user) {\n      return res.status(401).json({\n        message: 'Unauthorized: No user found'\n      });\n    }\n    var userRole = Number(req.user.roleid);\n    if (roles.includes(userRole)) {\n      next();\n    } else {\n      res.status(403).json({\n        message: 'Forbidden: Insufficient permissions'\n      });\n    }\n  };\n};\n\n\n//# sourceURL=webpack://node/./src/middleware/rbacMiddleware.js?");

/***/ }),

/***/ "./src/middleware/responseHandler.js":
/*!*******************************************!*\
  !*** ./src/middleware/responseHandler.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_serializer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/serializer.js */ \"./src/utils/serializer.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n\nvar responseHandler = function responseHandler(req, res, next) {\n  var originalJson = res.json;\n  res.json = function (data) {\n    // If the response is already formatted, send as is\n    if (data && _typeof(data) === 'object' && 'success' in data) {\n      return originalJson.call(this, (0,_utils_serializer_js__WEBPACK_IMPORTED_MODULE_0__.serializeData)(data));\n    }\n\n    // Get the status code, default to 200 if not set\n    var statusCode = res.statusCode || 200;\n\n    // Determine success based on status code\n    var isSuccess = statusCode >= 200 && statusCode < 300;\n\n    // Format the response and serialize data\n    var formattedResponse = {\n      success: isSuccess,\n      data: (0,_utils_serializer_js__WEBPACK_IMPORTED_MODULE_0__.serializeData)(data)\n    };\n    return originalJson.call(this, formattedResponse);\n  };\n  next();\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (responseHandler);\n\n//# sourceURL=webpack://node/./src/middleware/responseHandler.js?");

/***/ }),

/***/ "./src/repositories/attributesRepository.js":
/*!**************************************************!*\
  !*** ./src/repositories/attributesRepository.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAttributes: () => (/* binding */ getAttributes),\n/* harmony export */   getAttributesByid: () => (/* binding */ getAttributesByid),\n/* harmony export */   getAttributesDropDown: () => (/* binding */ getAttributesDropDown),\n/* harmony export */   hardDeleteAttributeValues: () => (/* binding */ hardDeleteAttributeValues),\n/* harmony export */   manageAttributeValue: () => (/* binding */ manageAttributeValue),\n/* harmony export */   manageAttributes: () => (/* binding */ manageAttributes),\n/* harmony export */   updateAttributeValuesForDelete: () => (/* binding */ updateAttributeValuesForDelete)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar getAttributesByid = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(attributeId) {\n    var attributes;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return prisma.attributes.findUnique({\n            where: {\n              attributeid: attributeId,\n              isdeleted: false\n            },\n            include: {\n              attributevalues: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  avid: true,\n                  attributeid: true,\n                  avname: true,\n                  avdisplayorder: true,\n                  uoid: true,\n                  avicon: true,\n                  avcolor: true\n                }\n              }\n            }\n          });\n        case 2:\n          attributes = _context.sent;\n          return _context.abrupt(\"return\", attributes);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getAttributesByid(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getAttributes = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req) {\n    var _req$body, _req$body$page, page, _req$body$limit, limit, attributename, description, offset, attriCondition, attributes, totalItemsCount, totalItems;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (req.body.limit == null) {\n            req.body.limit = 10;\n          }\n          if (req.body.page == null) {\n            req.body.page = 1;\n          }\n          _req$body = req.body, _req$body$page = _req$body.page, page = _req$body$page === void 0 ? 1 : _req$body$page, _req$body$limit = _req$body.limit, limit = _req$body$limit === void 0 ? 10 : _req$body$limit, attributename = _req$body.attributename, description = _req$body.description;\n          offset = (page - 1) * limit;\n          attriCondition = {\n            isdeleted: false\n          };\n          if (attributename) {\n            attriCondition.attributename = {\n              contains: attributename,\n              mode: 'insensitive'\n            };\n          }\n          if (description) {\n            attriCondition.description = {\n              contains: description,\n              mode: 'insensitive'\n            };\n          }\n          _context2.next = 9;\n          return prisma.attributes.findMany({\n            where: attriCondition,\n            include: {\n              attributevalues: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  avid: true,\n                  attributeid: true,\n                  avname: true,\n                  avdisplayorder: true,\n                  uoid: true,\n                  avicon: true,\n                  avcolor: true\n                }\n              }\n            },\n            orderBy: {\n              attributeid: 'asc'\n            },\n            skip: offset,\n            take: limit\n          });\n        case 9:\n          attributes = _context2.sent;\n          _context2.next = 12;\n          return prisma.attributes.findMany({\n            where: attriCondition,\n            include: {\n              attributevalues: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  avid: true,\n                  attributeid: true,\n                  avname: true,\n                  avdisplayorder: true,\n                  uoid: true,\n                  avicon: true,\n                  avcolor: true\n                }\n              }\n            },\n            orderBy: {\n              attributeid: 'asc'\n            }\n          });\n        case 12:\n          totalItemsCount = _context2.sent;\n          totalItems = totalItemsCount.length; // const totalItems = await prisma.attributes.count({ attriCondition })\n          // const totalItems = attributes.length\n          return _context2.abrupt(\"return\", {\n            attributes: attributes,\n            pagination: {\n              totalItems: totalItems,\n              currentPage: parseInt(page),\n              totalPages: Math.ceil(totalItems / limit),\n              itemsPerPage: parseInt(limit)\n            }\n          });\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getAttributes(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar manageAttributes = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(attributesData) {\n    var updateAttributes, createAttributes;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          if (!attributesData.attributeid) {\n            _context3.next = 6;\n            break;\n          }\n          _context3.next = 4;\n          return prisma.attributes.update({\n            where: {\n              attributeid: attributesData.attributeid\n            },\n            data: attributesData\n          });\n        case 4:\n          updateAttributes = _context3.sent;\n          return _context3.abrupt(\"return\", updateAttributes);\n        case 6:\n          _context3.next = 8;\n          return prisma.attributes.create({\n            data: attributesData\n          });\n        case 8:\n          createAttributes = _context3.sent;\n          return _context3.abrupt(\"return\", createAttributes);\n        case 12:\n          _context3.prev = 12;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context3.t0.message,\n            stack: _context3.t0.stack\n          });\n        case 15:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 12]]);\n  }));\n  return function manageAttributes(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar manageAttributeValue = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(attributeValueData) {\n    var updateAttributesValue, createAttributeValues;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          if (!(attributeValueData.avid != null)) {\n            _context4.next = 6;\n            break;\n          }\n          _context4.next = 4;\n          return prisma.attributevalues.update({\n            where: {\n              avid: attributeValueData.avid\n            },\n            data: attributeValueData\n          });\n        case 4:\n          updateAttributesValue = _context4.sent;\n          return _context4.abrupt(\"return\", updateAttributesValue);\n        case 6:\n          _context4.next = 8;\n          return prisma.attributevalues.create({\n            data: attributeValueData\n          });\n        case 8:\n          createAttributeValues = _context4.sent;\n          return _context4.abrupt(\"return\", createAttributeValues);\n        case 12:\n          _context4.prev = 12;\n          _context4.t0 = _context4[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context4.t0.message,\n            stack: _context4.t0.stack\n          });\n        case 15:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 12]]);\n  }));\n  return function manageAttributeValue(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getAttributesDropDown = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req) {\n    var attributes;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return prisma.attributes.findMany({\n            where: {\n              isdeleted: false\n            },\n            include: {\n              attributevalues: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  avid: true,\n                  attributeid: true,\n                  avname: true,\n                  avdisplayorder: true,\n                  uoid: true,\n                  avicon: true,\n                  avcolor: true\n                }\n              }\n            },\n            orderBy: {\n              attributeid: 'asc'\n            }\n          });\n        case 2:\n          attributes = _context5.sent;\n          return _context5.abrupt(\"return\", {\n            attributes: attributes\n          });\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getAttributesDropDown(_x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar updateAttributeValuesForDelete = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(attributeValueData) {\n    var updateAttributesValue;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return prisma.attributevalues.update({\n            where: {\n              attributeid: attributeValueData.attributeid\n            },\n            data: attributeValueData\n          });\n        case 3:\n          updateAttributesValue = _context6.sent;\n          console.log('eeee', updateAttributesValue);\n          process.exit();\n          return _context6.abrupt(\"return\", updateAttributesValue);\n        case 9:\n          _context6.prev = 9;\n          _context6.t0 = _context6[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context6.t0.message,\n            stack: _context6.t0.stack\n          });\n        case 12:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 9]]);\n  }));\n  return function updateAttributeValuesForDelete(_x6) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar hardDeleteAttributeValues = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(attributeid) {\n    var deleteAttributesValue;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          _context7.next = 3;\n          return prisma.attributevalues[\"delete\"]({\n            where: {\n              attributeid: attributeid\n            }\n          });\n        case 3:\n          deleteAttributesValue = _context7.sent;\n          console.log('jdgjdgy', deleteAttributesValue);\n          process.exit();\n          return _context7.abrupt(\"return\", deleteAttributesValue);\n        case 9:\n          _context7.prev = 9;\n          _context7.t0 = _context7[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error deleting attributes values', {\n            error: _context7.t0.message,\n            stack: _context7.t0.stack\n          });\n        case 12:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 9]]);\n  }));\n  return function hardDeleteAttributeValues(_x7) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/repositories/attributesRepository.js?");

/***/ }),

/***/ "./src/repositories/offersRepository.js":
/*!**********************************************!*\
  !*** ./src/repositories/offersRepository.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllOffers: () => (/* binding */ getAllOffers),\n/* harmony export */   getMasterValues: () => (/* binding */ getMasterValues),\n/* harmony export */   getOfferById: () => (/* binding */ getOfferById),\n/* harmony export */   manageOfferMappings: () => (/* binding */ manageOfferMappings),\n/* harmony export */   manageOffers: () => (/* binding */ manageOffers)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar manageOffers = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(offersData) {\n    var updateOffers, createOfferData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          if (!offersData.offerid) {\n            _context.next = 6;\n            break;\n          }\n          _context.next = 4;\n          return prisma.offers.update({\n            where: {\n              offerid: offersData.offerid\n            },\n            data: offersData\n          });\n        case 4:\n          updateOffers = _context.sent;\n          return _context.abrupt(\"return\", updateOffers);\n        case 6:\n          _context.next = 8;\n          return prisma.offers.create({\n            data: offersData\n          });\n        case 8:\n          createOfferData = _context.sent;\n          return _context.abrupt(\"return\", createOfferData);\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context.t0.message,\n            stack: _context.t0.stack\n          });\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 12]]);\n  }));\n  return function manageOffers(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageOfferMappings = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(offersData, offerMappingsData) {\n    var deleteOfferMappings, _createOfferMappings, createOfferMappings;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          if (!offersData.offerid) {\n            _context2.next = 9;\n            break;\n          }\n          _context2.next = 4;\n          return prisma.offermappings[\"delete\"]({\n            where: {\n              offerid: offersData.offerid\n            }\n          });\n        case 4:\n          deleteOfferMappings = _context2.sent;\n          _context2.next = 7;\n          return prisma.offermappings.create({\n            data: offerMappingsData\n          });\n        case 7:\n          _createOfferMappings = _context2.sent;\n          return _context2.abrupt(\"return\", _createOfferMappings);\n        case 9:\n          _context2.next = 11;\n          return prisma.offermappings.create({\n            data: offerMappingsData\n          });\n        case 11:\n          createOfferMappings = _context2.sent;\n          console.log(\"offers mapping id -\", createOfferMappings);\n          return _context2.abrupt(\"return\", createOfferMappings);\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context2.t0.message,\n            stack: _context2.t0.stack\n          });\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 16]]);\n  }));\n  return function manageOfferMappings(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getMasterValues = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(masterId) {\n    var masterValuesData;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return prisma.mastervalues.findMany({\n            where: {\n              masterid: masterId,\n              isdeleted: false\n            }\n          });\n        case 2:\n          masterValuesData = _context3.sent;\n          return _context3.abrupt(\"return\", masterValuesData);\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getMasterValues(_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getAllOffers = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(uoid) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return prisma.offers.findMany({\n            where: {\n              isdeleted: false\n            }\n          });\n        case 3:\n          return _context4.abrupt(\"return\", _context4.sent);\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error fetching all users', {\n            error: _context4.t0.message,\n            uoid: uoid\n          });\n          throw _context4.t0;\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 6]]);\n  }));\n  return function getAllOffers(_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getOfferById = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(offerId) {\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return prisma.offers.findUnique({\n            where: {\n              offerid: offerId,\n              isdeleted: false\n            }\n          });\n        case 3:\n          return _context5.abrupt(\"return\", _context5.sent);\n        case 6:\n          _context5.prev = 6;\n          _context5.t0 = _context5[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error fetching all users', {\n            error: _context5.t0.message,\n            uoid: uoid\n          });\n          throw _context5.t0;\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 6]]);\n  }));\n  return function getOfferById(_x6) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/repositories/offersRepository.js?");

/***/ }),

/***/ "./src/repositories/productRepository.js":
/*!***********************************************!*\
  !*** ./src/repositories/productRepository.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   manageProImgid: () => (/* binding */ manageProImgid),\n/* harmony export */   manageProducts: () => (/* binding */ manageProducts),\n/* harmony export */   manageProvariants: () => (/* binding */ manageProvariants),\n/* harmony export */   managePvaMappings: () => (/* binding */ managePvaMappings),\n/* harmony export */   managePvaValues: () => (/* binding */ managePvaValues),\n/* harmony export */   manageUomMapping: () => (/* binding */ manageUomMapping),\n/* harmony export */   manageVariantLocations: () => (/* binding */ manageVariantLocations),\n/* harmony export */   manageVariantTax: () => (/* binding */ manageVariantTax)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar manageProducts = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(productData) {\n    var createProduct;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return prisma.product.create({\n            data: productData\n          });\n        case 3:\n          createProduct = _context.sent;\n          console.log('Product id', createProduct.proid);\n          // process.exit()\n          return _context.abrupt(\"return\", createProduct);\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in products', {\n            error: _context.t0.message,\n            stack: _context.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return function manageProducts(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageProvariants = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(proVarData) {\n    var createProduct;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return prisma.provariants.create({\n            data: proVarData\n          });\n        case 3:\n          createProduct = _context2.sent;\n          console.log('Product variants id', createProduct.pvid);\n          return _context2.abrupt(\"return\", createProduct);\n        case 8:\n          _context2.prev = 8;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in products', {\n            error: _context2.t0.message,\n            stack: _context2.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n  return function manageProvariants(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar manageVariantLocations = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(variantLocationsData) {\n    var createVarLocData;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return prisma.provariantlocations.create({\n            data: variantLocationsData\n          });\n        case 3:\n          createVarLocData = _context3.sent;\n          console.log('locations id-', createVarLocData.pvlid);\n          return _context3.abrupt(\"return\", createVarLocData);\n        case 8:\n          _context3.prev = 8;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in location', {\n            error: _context3.t0.message,\n            stack: _context3.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 8]]);\n  }));\n  return function manageVariantLocations(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar manageVariantTax = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(provarTaxData) {\n    var createVarTaxData;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return prisma.provarianttax.create({\n            data: provarTaxData\n          });\n        case 3:\n          createVarTaxData = _context4.sent;\n          console.log('variant Tax -', createVarTaxData.protaxid);\n          return _context4.abrupt(\"return\", createVarTaxData);\n        case 8:\n          _context4.prev = 8;\n          _context4.t0 = _context4[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in provarianttax', {\n            error: _context4.t0.message,\n            stack: _context4.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 8]]);\n  }));\n  return function manageVariantTax(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar manageProImgid = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(productimgidData) {\n    var createProImgData;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return prisma.pvummapping.create({\n            data: productimgidData\n          });\n        case 3:\n          createProImgData = _context5.sent;\n          console.log('pvummapping id -', createProImgData.pvumid);\n          return _context5.abrupt(\"return\", createProImgData);\n        case 8:\n          _context5.prev = 8;\n          _context5.t0 = _context5[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in provarianttax', {\n            error: _context5.t0.message,\n            stack: _context5.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 8]]);\n  }));\n  return function manageProImgid(_x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar managePvaMappings = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(pvamappingData) {\n    var createpvamappings;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return prisma.pvamapping.create({\n            data: pvamappingData\n          });\n        case 3:\n          createpvamappings = _context6.sent;\n          console.log('PVA mapping id -', createpvamappings.pvamid);\n          return _context6.abrupt(\"return\", createpvamappings);\n        case 8:\n          _context6.prev = 8;\n          _context6.t0 = _context6[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in PVA mapping', {\n            error: _context6.t0.message,\n            stack: _context6.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 8]]);\n  }));\n  return function managePvaMappings(_x6) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar managePvaValues = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(pvamappingData) {\n    var createpvamappings;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          _context7.next = 3;\n          return prisma.pvamvalues.create({\n            data: pvamappingData\n          });\n        case 3:\n          createpvamappings = _context7.sent;\n          console.log('PVM Values id -', createpvamappings.pvamvid);\n          return _context7.abrupt(\"return\", createpvamappings);\n        case 8:\n          _context7.prev = 8;\n          _context7.t0 = _context7[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in pvam values', {\n            error: _context7.t0.message,\n            stack: _context7.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 8]]);\n  }));\n  return function managePvaValues(_x7) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar manageUomMapping = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(pumData) {\n    var createPuomData;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          _context8.next = 3;\n          return prisma.uom_mapping.create({\n            data: pumData\n          });\n        case 3:\n          createPuomData = _context8.sent;\n          console.log('uom_mapping id -', createPuomData.uommid);\n          return _context8.abrupt(\"return\", createPuomData);\n        case 8:\n          _context8.prev = 8;\n          _context8.t0 = _context8[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in uom_mapping', {\n            error: _context8.t0.message,\n            stack: _context8.t0.stack\n          });\n        case 11:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[0, 8]]);\n  }));\n  return function manageUomMapping(_x8) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/repositories/productRepository.js?");

/***/ }),

/***/ "./src/repositories/prowastageRepositoy.js":
/*!*************************************************!*\
  !*** ./src/repositories/prowastageRepositoy.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProductsForModal: () => (/* binding */ getProductsForModal),\n/* harmony export */   getWastageById: () => (/* binding */ getWastageById),\n/* harmony export */   getWastageTypes: () => (/* binding */ getWastageTypes),\n/* harmony export */   getWastages: () => (/* binding */ getWastages),\n/* harmony export */   manageWastage: () => (/* binding */ manageWastage)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar getWastageById = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(wid) {\n    var wastages;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return prisma.prowastage.findUnique({\n            where: {\n              wastageid: wid,\n              isdeleted: false\n            },\n            include: {\n              prowastageattachment: {},\n              product: {},\n              mastervalues: {},\n              unitofmeasure: {}\n            }\n          });\n        case 2:\n          wastages = _context.sent;\n          return _context.abrupt(\"return\", wastages);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getWastageById(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageWastage = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(wastageData) {\n    var updateWastage, createWastage;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          if (!wastageData.wastageid) {\n            _context2.next = 6;\n            break;\n          }\n          _context2.next = 4;\n          return prisma.prowastage.update({\n            where: {\n              wastageid: wastageData.wastageid\n            },\n            data: wastageData\n          });\n        case 4:\n          updateWastage = _context2.sent;\n          return _context2.abrupt(\"return\", updateWastage);\n        case 6:\n          _context2.next = 8;\n          return prisma.prowastage.create({\n            data: wastageData\n          });\n        case 8:\n          createWastage = _context2.sent;\n          return _context2.abrupt(\"return\", createWastage);\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error searching categories', {\n            error: _context2.t0.message,\n            stack: _context2.t0.stack\n          });\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 12]]);\n  }));\n  return function manageWastage(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getProductsForModal = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var products;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return prisma.product.findMany({\n            where: {\n              isdeleted: false,\n              proconfig: 1\n            },\n            distinct: ['proid'],\n            include: {\n              provariants: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  pvid: true\n                }\n              },\n              unitofmeasure: {\n                select: {\n                  uomname: true\n                }\n              }\n            },\n            orderBy: {\n              proid: 'asc'\n            }\n          });\n        case 2:\n          products = _context3.sent;\n          return _context3.abrupt(\"return\", products);\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getProductsForModal() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getWastageTypes = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(masterId) {\n    var masterValuesData;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return prisma.mastervalues.findMany({\n            where: {\n              masterid: masterId,\n              isdeleted: false\n            },\n            select: {\n              mvid: true,\n              mastervalue: true\n            }\n          });\n        case 2:\n          masterValuesData = _context4.sent;\n          return _context4.abrupt(\"return\", masterValuesData);\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function getWastageTypes(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getWastages = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n    var page,\n      limit,\n      offset,\n      wastages,\n      _args5 = arguments;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          page = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : 1;\n          limit = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : 10;\n          offset = (page - 1) * limit;\n          _context5.next = 5;\n          return prisma.prowastage.findMany({\n            where: {\n              isdeleted: false\n            },\n            include: {\n              prowastageattachment: {},\n              product: {},\n              mastervalues: {}\n            },\n            skip: offset,\n            take: limit\n          });\n        case 5:\n          wastages = _context5.sent;\n          return _context5.abrupt(\"return\", {\n            products: wastages,\n            currentPage: page\n          });\n        case 7:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getWastages() {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/repositories/prowastageRepositoy.js?");

/***/ }),

/***/ "./src/repositories/uomRepository.js":
/*!*******************************************!*\
  !*** ./src/repositories/uomRepository.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUomByCatId: () => (/* binding */ getUomByCatId)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar getUomByCatId = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(catId) {\n    var uomData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return prisma.unitofmeasure.findMany({\n            where: {\n              catid: catId,\n              isdeleted: false\n            }\n          });\n        case 3:\n          uomData = _context.sent;\n          return _context.abrupt(\"return\", uomData);\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in getProductById:', _context.t0);\n          throw _context.t0;\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return function getUomByCatId(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/repositories/uomRepository.js?");

/***/ }),

/***/ "./src/routes/attributeRoutes.js":
/*!***************************************!*\
  !*** ./src/routes/attributeRoutes.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middleware/rbacMiddleware.js */ \"./src/middleware/rbacMiddleware.js\");\n/* harmony import */ var _controllers_attributesController_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controllers/attributesController.js */ \"./src/controllers/attributesController.js\");\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\n\n/**\r\n * @swagger\r\n * /api/v2/attributes/getAttributes:\r\n *   post:\r\n *     summary: Get product attributes \r\n *     tags: [attributes]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Get product attributes \r\n */\nrouter.post('/getAttributes', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_attributesController_js__WEBPACK_IMPORTED_MODULE_2__.getAttributesController);\n\n/**\r\n * @swagger\r\n * /api/v2/attributes/manageAttributes:\r\n *   post:\r\n *     summary: Create/update a new attribute\r\n *     tags: [attributes]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/Product'\r\n *     responses:\r\n *       201:\r\n *         description: Product created successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   $ref: '#/components/schemas/Product'\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n */\nrouter.post('/manageAttributes', _controllers_attributesController_js__WEBPACK_IMPORTED_MODULE_2__.manageAttributesController);\n\n/**\r\n * @swagger\r\n * /api/v2/attributes/getAttributesDrop:\r\n *   get:\r\n *     summary: Get product attributes for drop down\r\n *     tags: [attributes]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Get product attributes \r\n */\nrouter.get('/getAttributesDrop', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_attributesController_js__WEBPACK_IMPORTED_MODULE_2__.getAttributesDropController);\n\n/**\r\n * @swagger\r\n * /api/v2/attributes/bulkDeleteAttributes:\r\n *   post:\r\n *     summary: delete attributes in bulk\r\n *     tags: [attributes]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Get product attributes \r\n */\nrouter.post('/bulkDeleteAttributes', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_attributesController_js__WEBPACK_IMPORTED_MODULE_2__.bulkDeleteAttributesController);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/attributeRoutes.js?");

/***/ }),

/***/ "./src/routes/authRoutes.js":
/*!**********************************!*\
  !*** ./src/routes/authRoutes.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _controllers_userLoginController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/userLoginController.js */ \"./src/controllers/userLoginController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\n\n/**\r\n * @swagger\r\n * components:\r\n *   schemas:\r\n *     LoginRequest:\r\n *       type: object\r\n *       required:\r\n *         - email\r\n *         - password\r\n *       properties:\r\n *         email:\r\n *           type: string\r\n *           description: User's email address\r\n *           example: superadmin@respos.com\r\n *         password:\r\n *           type: string\r\n *           description: User's password\r\n *           example: 123456\r\n *     LoginResponse:\r\n *       type: object\r\n *       properties:\r\n *         uid:\r\n *           type: integer\r\n *           description: User ID\r\n *         uoid:\r\n *           type: integer\r\n *           description: User organization ID\r\n *         username:\r\n *           type: string\r\n *           description: Username (email or other unique identifier)\r\n *         roleid:\r\n *           type: integer\r\n *           description: User's role ID\r\n *         roleid_orgid:\r\n *           type: integer\r\n *           description: Organization role ID\r\n *         token:\r\n *           type: string\r\n *           description: JWT token\r\n *           example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\r\n */\n\n/**\r\n * @swagger\r\n * /api/v2/auth/login:\r\n *   post:\r\n *     summary: Log in a user\r\n *     tags: [Authentication]\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/LoginRequest'\r\n *     responses:\r\n *       200:\r\n *         description: Successful login\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               $ref: '#/components/schemas/LoginResponse'\r\n *       401:\r\n *         description: Invalid credentials\r\n *       500:\r\n *         description: Server error\r\n */\nrouter.post('/login', _controllers_userLoginController_js__WEBPACK_IMPORTED_MODULE_1__.login);\n\n/**\r\n * @swagger\r\n * /api/v2/auth/logout:\r\n *   post:\r\n *     summary: Log out a user\r\n *     tags: [Authentication]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             required:\r\n *               - ulid\r\n *             properties:\r\n *               ulid:\r\n *                 type: integer\r\n *                 description: User login ID\r\n *     responses:\r\n *       200:\r\n *         description: Successful logout\r\n *       500:\r\n *         description: Server error\r\n */\nrouter.post('/logout', _controllers_userLoginController_js__WEBPACK_IMPORTED_MODULE_1__.logout);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/authRoutes.js?");

/***/ }),

/***/ "./src/routes/index.js":
/*!*****************************!*\
  !*** ./src/routes/index.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _middleware_authMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middleware/authMiddleware.js */ \"./src/middleware/authMiddleware.js\");\n/* harmony import */ var _authRoutes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./authRoutes.js */ \"./src/routes/authRoutes.js\");\n/* harmony import */ var _productRoutes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./productRoutes.js */ \"./src/routes/productRoutes.js\");\n/* harmony import */ var _offerRoute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./offerRoute.js */ \"./src/routes/offerRoute.js\");\n/* harmony import */ var _proWastageRoutes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./proWastageRoutes.js */ \"./src/routes/proWastageRoutes.js\");\n/* harmony import */ var _attributeRoutes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./attributeRoutes.js */ \"./src/routes/attributeRoutes.js\");\n\n\n\n\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\nrouter.use('/auth', _authRoutes_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nrouter.use('/products', _middleware_authMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.authMiddleware, _productRoutes_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\nrouter.use(\"/offers\", _middleware_authMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.authMiddleware, _offerRoute_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\nrouter.use('/prowastage', _middleware_authMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.authMiddleware, _proWastageRoutes_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\nrouter.use('/attributes', _middleware_authMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.authMiddleware, _attributeRoutes_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/index.js?");

/***/ }),

/***/ "./src/routes/offerRoute.js":
/*!**********************************!*\
  !*** ./src/routes/offerRoute.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _controllers_offersController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/offersController.js */ \"./src/controllers/offersController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\n\n/**\r\n * @swagger\r\n * components:\r\n *   schemas:\r\n *     Offer:\r\n *       type: object\r\n *       properties:\r\n *         name:\r\n *           type: string\r\n *           description: Name of the offer\r\n *         description:\r\n *           type: string\r\n *           description: Description of the offer\r\n *         discounttype:\r\n *           type: string\r\n *           enum: [percentage, amount]\r\n *           description: Type of discount (percentage or amount)\r\n *         discountvalue:\r\n *           type: number\r\n *           description: Value of the discount\r\n *         startdate:\r\n *           type: string\r\n *           format: date-time\r\n *           description: Start date of the offer\r\n *         enddate:\r\n *           type: string\r\n *           format: date-time\r\n *           description: End date of the offer\r\n *         offer_mappings:\r\n *           type: array\r\n *           items:\r\n *             type: object\r\n *             properties:\r\n *               idtype:\r\n *                 type: integer\r\n *                 description: \"ID type (1 - Product, 3 - Category)\"\r\n *               id:\r\n *                 type: integer\r\n *                 description: \"Product ID or Category ID based on idtype\"\r\n */\n\n/**\r\n * @swagger\r\n * /api/v2/offers/manageOffers:\r\n *   post:\r\n *     summary: Create/update an offer\r\n *     tags: [Offers]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             required:\r\n *               - name\r\n *               - discounttype\r\n *               - discountvalue\r\n *             properties:\r\n *               offername:\r\n *                 type: string\r\n *                 description: Name of the offer\r\n *               offerdescription:\r\n *                 type: string\r\n *                 description: Description of the offer\r\n *               couponcode:\r\n *                 type: string\r\n *                 description: Coupon code for the offer\r\n *               termscondi:\r\n *                 type: string\r\n *                 description: Terms and conditions for the offer\r\n *               startdate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 description: Start date of the offer\r\n *               enddate:\r\n *                 type: string\r\n *                 format: date-time\r\n *                 description: End date of the offer\r\n *               discpercentage:\r\n *                 type: number\r\n *                 format: double\r\n *                 description: Percentage of discount\r\n *               discmaxamount:\r\n *                 type: number\r\n *                 format: double\r\n *                 description: Max amount of discount\r\n *               discountmaxtimes:\r\n *                 type: integer\r\n *                 description: Max times the offer can be used by a customer\r\n *               resetdays:\r\n *                 type: integer\r\n *                 description: Number of days after which the offer can be used again\r\n *               discbasis:\r\n *                 type: integer\r\n *                 description: Basis of discount (1. Total Order, 2. Product)\r\n *               mincartamount:\r\n *                 type: number\r\n *                 format: double\r\n *                 description: Minimum cart amount for the offer to be applicable\r\n *               cardtype:\r\n *                 type: integer\r\n *                 description: Card type for the offer (1. All, 2. Credit Card, 3. Debit Card, 4. Wallet)\r\n *               offertype:\r\n *                 type: integer\r\n *                 description: Offer type (1. Default Discount, 2. Buy and Get, 3. Fixed Item Price)\r\n *               itemprice:\r\n *                 type: number\r\n *                 format: double\r\n *                 description: Price of the item for the offer\r\n *               noofbuyproducts:\r\n *                 type: integer\r\n *                 description: Number of products to buy for the offer\r\n *               nooffreeproducts:\r\n *                 type: integer\r\n *                 description: Number of free products to get for the offer\r\n *               isclubbable:\r\n *                 type: boolean\r\n *                 description: Can be combined with other offers\r\n *               offer_mappings:\r\n *                 type: array\r\n *                 description: List of offer mappings\r\n *                 items:\r\n *                   type: object\r\n *                   properties:\r\n *                     offerid:\r\n *                       type: integer\r\n *                       description: ID of the offer\r\n *                     idtype:\r\n *                       type: integer\r\n *                       description: Type of entity (e.g., product, category)\r\n *                     forid:\r\n *                       type: integer\r\n *                       description: ID of the mapped entity (if product, then product id, if category, then category id)\r\n *                     isfree:\r\n *                       type: boolean\r\n *                       description: true - Item is free as part of the offer, false - Item must be purchased to qualify for the offer.\r\n *     responses:\r\n *       201:\r\n *         description: Offer created successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   type: object\r\n *                   properties:\r\n *                     offerid:\r\n *                       type: integer\r\n *                     offername:\r\n *                       type: string\r\n *                     offerdescription:\r\n *                       type: string\r\n *                     discpercentage:\r\n *                       type: number\r\n *                     discmaxamount:\r\n *                       type: number\r\n *                     startdate:\r\n *                       type: string\r\n *                       format: date-time\r\n *                     enddate:\r\n *                       type: string\r\n *                       format: date-time\r\n *                     offermappings:\r\n *                       type: array\r\n *                       items:\r\n *                         type: object\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n *       500:\r\n *         description: Internal server error\r\n */\nrouter.route(\"/manageOffers\").post(_controllers_offersController_js__WEBPACK_IMPORTED_MODULE_1__.manageOffersController);\n\n/**\r\n * @swagger\r\n * /api/v2/offers/getOffersModal:\r\n *   get:\r\n *     summary: Get offer template and master values\r\n *     tags: [Offers]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Successfully retrieved offer modal data\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                   example: true\r\n *                 data:\r\n *                   type: object\r\n *                   properties:\r\n *                     offer:\r\n *                       type: object\r\n *                       properties:\r\n *                         offername:\r\n *                           type: string\r\n *                           example: \"string\"\r\n *                         offerdescription:\r\n *                           type: string\r\n *                           example: \"string\"\r\n *                         couponcode:\r\n *                           type: string\r\n *                           example: \"string\"\r\n *                         termscondi:\r\n *                           type: string\r\n *                           example: \"string\"\r\n *                         startdate:\r\n *                           type: string\r\n *                           format: date-time\r\n *                           example: \"2024-12-26T11:25:32.893Z\"\r\n *                         enddate:\r\n *                           type: string\r\n *                           format: date-time\r\n *                           example: \"2024-12-26T11:25:32.893Z\"\r\n *                         discpercentage:\r\n *                           type: number\r\n *                           example: 0\r\n *                         discmaxamount:\r\n *                           type: number\r\n *                           example: 0\r\n *                         discountmaxtimes:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         resetdays:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         discbasis:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         mincartamount:\r\n *                           type: number\r\n *                           example: 0\r\n *                         cardtype:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         offertype:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         itemprice:\r\n *                           type: number\r\n *                           example: 0\r\n *                         noofbuyproducts:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         nooffreeproducts:\r\n *                           type: integer\r\n *                           example: 0\r\n *                         isclubbable:\r\n *                           type: boolean\r\n *                           example: true\r\n *                         offer_mappings:\r\n *                           type: array\r\n *                           items:\r\n *                             type: object\r\n *                             properties:\r\n *                               idtype:\r\n *                                 type: integer\r\n *                                 example: 0\r\n *                               forid:\r\n *                                 type: integer\r\n *                                 example: 0\r\n *                               isfree:\r\n *                                 type: boolean\r\n *                                 example: true\r\n *                     discountBasis:\r\n *                       type: object\r\n *                       additionalProperties:\r\n *                         type: string\r\n *                       example:\r\n *                         \"27\": \"Percentage\"\r\n *                         \"28\": \"Amount\"\r\n *                     offermappingIdType:\r\n *                       type: object\r\n *                       additionalProperties:\r\n *                         type: string\r\n *                       example:\r\n *                         \"31\": \"Product\"\r\n *                         \"32\": \"Category\"\r\n *       401:\r\n *         description: Unauthorized\r\n *       500:\r\n *         description: Internal server error\r\n */\nrouter.route(\"/getOffersModal\").get(_controllers_offersController_js__WEBPACK_IMPORTED_MODULE_1__.offersModalController);\n\n/**\r\n * @swagger\r\n * /api/v2/offers/getOffers:\r\n *   get:\r\n *     summary: Get all offers for the authenticated user's organization\r\n *     tags: [Offers]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Successfully retrieved offers list\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                   example: true\r\n *                 data:\r\n *                   type: array\r\n *                   items:\r\n *                     type: object\r\n *                     properties:\r\n *                       offerid:\r\n *                         type: integer\r\n *                         description: Unique identifier for the offer\r\n *                       offername:\r\n *                         type: string\r\n *                         description: Name of the offer\r\n *                       offerdescription:\r\n *                         type: string\r\n *                         description: Description of the offer\r\n *                       couponcode:\r\n *                         type: string\r\n *                         description: Coupon code for the offer\r\n *                       termscondi:\r\n *                         type: string\r\n *                         description: Terms and conditions\r\n *                       startdate:\r\n *                         type: string\r\n *                         format: date-time\r\n *                         description: Start date of the offer\r\n *                       enddate:\r\n *                         type: string\r\n *                         format: date-time\r\n *                         description: End date of the offer\r\n *                       discpercentage:\r\n *                         type: number\r\n *                         description: Discount percentage\r\n *                       discmaxamount:\r\n *                         type: number\r\n *                         description: Maximum discount amount\r\n *                       discountmaxtimes:\r\n *                         type: integer\r\n *                         description: Maximum number of times offer can be used\r\n *                       itemprice:\r\n *                         type: number\r\n *                         nullable: true\r\n *                         description: Fixed price for items (if applicable)\r\n *                       offertype:\r\n *                         type: integer\r\n *                         description: Type of offer\r\n *                       noofbuyproducts:\r\n *                         type: integer\r\n *                         description: Number of products to buy\r\n *                       nooffreeproducts:\r\n *                         type: integer\r\n *                         description: Number of free products\r\n *                       isclubbable:\r\n *                         type: boolean\r\n *                         description: Whether offer can be combined with others\r\n *                       resetdays:\r\n *                         type: integer\r\n *                         description: Days after which offer usage resets\r\n *                       discountbasis:\r\n *                         type: integer\r\n *                         description: Basis for discount calculation\r\n *                       mincartamount:\r\n *                         type: number\r\n *                         description: Minimum cart amount required\r\n *                       cardtype:\r\n *                         type: integer\r\n *                         nullable: true\r\n *                         description: Type of card for offer\r\n *                       isapproved:\r\n *                         type: boolean\r\n *                         description: Approval status of offer\r\n *                       isdeleted:\r\n *                         type: boolean\r\n *                         description: Deletion status of offer\r\n *                       createdby:\r\n *                         type: integer\r\n *                         description: User ID who created the offer\r\n *                       createddate:\r\n *                         type: string\r\n *                         format: date-time\r\n *                         description: Creation date of offer\r\n *                       users_offers_createdbyTousers:\r\n *                         type: object\r\n *                         properties:\r\n *                           uid:\r\n *                             type: integer\r\n *                             description: User ID\r\n *                           firstname:\r\n *                             type: string\r\n *                             description: First name of creator\r\n *                           lastname:\r\n *                             type: string\r\n *                             description: Last name of creator\r\n *                       offermappings:\r\n *                         type: array\r\n *                         items:\r\n *                           type: object\r\n *                           properties:\r\n *                             offerid:\r\n *                               type: integer\r\n *                               description: ID of the offer\r\n *                             idtype:\r\n *                               type: integer\r\n *                               description: Type of mapped entity\r\n *                             forid:\r\n *                               type: integer\r\n *                               description: ID of mapped entity\r\n *                             isfree:\r\n *                               type: boolean\r\n *                               description: Whether item is free\r\n *       401:\r\n *         description: Unauthorized - User not authenticated\r\n *       500:\r\n *         description: Internal server error\r\n */\nrouter.route(\"/getOffers\").get(_controllers_offersController_js__WEBPACK_IMPORTED_MODULE_1__.getOffersController);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/offerRoute.js?");

/***/ }),

/***/ "./src/routes/proWastageRoutes.js":
/*!****************************************!*\
  !*** ./src/routes/proWastageRoutes.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middleware/rbacMiddleware.js */ \"./src/middleware/rbacMiddleware.js\");\n/* harmony import */ var _controllers_prowastageController_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controllers/prowastageController.js */ \"./src/controllers/prowastageController.js\");\n\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\nrouter.post('/manageWastage', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_prowastageController_js__WEBPACK_IMPORTED_MODULE_2__.manageWastageController);\n\n/**\r\n * @swagger\r\n *  /api/v2/prowastage/modal:\r\n *   get:\r\n *     summary: Get wastage creation modal template and dropdowns\r\n *     tags: [Wastage]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Modal template and dropdown data\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   type: object\r\n *                   properties:\r\n *                     template:\r\n *                       type: object\r\n *                       properties:\r\n *                         wastageno:\r\n *                           type: string\r\n *                         seriesid:\r\n *                           type: integer\r\n *                         proid:\r\n *                           type: integer\r\n *                         pvid:\r\n *                           type: integer\r\n *                         wastageqty:\r\n *                           type: number\r\n *                         wastagevalue:\r\n *                           type: number\r\n *                         wastagedate:\r\n *                           type: string\r\n *                           format: date\r\n *                         remarks:\r\n *                           type: string\r\n *                         wastagetype:\r\n *                           type: integer\r\n *                         attachments:\r\n *                           type: array\r\n *                           items:\r\n *                             type: integer\r\n *                     dropdowns:\r\n *                       type: object\r\n *                       properties:\r\n *                         products:\r\n *                           type: array\r\n *                           items:\r\n *                             type: object\r\n *                             properties:\r\n *                               proid:\r\n *                                 type: integer\r\n *                               pvid:\r\n *                                 type: integer\r\n *                               proname:\r\n *                                 type: string\r\n *                               prouom:\r\n *                                 type: integer\r\n *                         wastageTypes:\r\n *                           type: array\r\n *                           items:\r\n *                             type: object\r\n *                             properties:\r\n *                               id:\r\n *                                 type: integer\r\n *                               value:\r\n *                                 type: string\r\n */\nrouter.get('/modal', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_prowastageController_js__WEBPACK_IMPORTED_MODULE_2__.getWastageModalController);\n\n/**\r\n * @swagger\r\n * /api/prowastage/list:\r\n *   post:\r\n *     summary: List all wastage records\r\n *     tags: [Wastage]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               page:\r\n *                 type: integer\r\n *                 description: Page number for pagination\r\n *                 default: 1\r\n *                 minimum: 1\r\n *               limit:\r\n *                 type: integer\r\n *                 description: Number of records per page\r\n *                 default: 10\r\n *                 minimum: 1\r\n *             required:\r\n *               - page\r\n *               - limit\r\n *             example:\r\n *               page: 1\r\n *               limit: 10\r\n *     responses:\r\n *       200:\r\n *         description: List of wastage records with pagination\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   type: array\r\n *                   items:\r\n *                     $ref: '#/components/schemas/Wastage'\r\n *                 pagination:\r\n *                   type: object\r\n *                   properties:\r\n *                     totalItems:\r\n *                       type: integer\r\n *                     currentPage:\r\n *                       type: integer\r\n *                     totalPages:\r\n *                       type: integer\r\n *                     itemsPerPage:\r\n *                       type: integer\r\n */\nrouter.post('/getWastage', (0,_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.rbacMiddleware)(_middleware_rbacMiddleware_js__WEBPACK_IMPORTED_MODULE_1__.ROLE_GROUPS.ALL_MANAGERS), _controllers_prowastageController_js__WEBPACK_IMPORTED_MODULE_2__.getWastageController);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/proWastageRoutes.js?");

/***/ }),

/***/ "./src/routes/productRoutes.js":
/*!*************************************!*\
  !*** ./src/routes/productRoutes.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/productController.js */ \"./src/controllers/productController.js\");\n\n\nvar router = express__WEBPACK_IMPORTED_MODULE_0__.Router();\n\n/**\r\n * @swagger\r\n * components:\r\n *   schemas:\r\n *     AttributeValue:\r\n *       type: object\r\n *       properties:\r\n *         pvamvid:\r\n *           type: integer\r\n *           description: ID of the attribute value mapping\r\n *         avid:\r\n *           type: integer\r\n *           description: ID of the attribute value\r\n *         pvamvcolor:\r\n *           type: string\r\n *           description: Color value if applicable\r\n *         umid:\r\n *           type: integer\r\n *           description: Unit of measure ID if applicable\r\n *         attributeValueName:\r\n *           type: string\r\n *           description: Name of the attribute value\r\n *         displayorder:\r\n *           type: integer\r\n *           description: Display order of the value\r\n *\r\n *     AttributeMapping:\r\n *       type: object\r\n *       properties:\r\n *         pvamid:\r\n *           type: integer\r\n *           description: ID of the attribute mapping\r\n *         attributeid:\r\n *           type: integer\r\n *           description: ID of the attribute\r\n *         attributeName:\r\n *           type: string\r\n *           description: Name of the attribute\r\n *         attrtextprompt:\r\n *           type: string\r\n *           description: Text prompt for the attribute\r\n *         isrequired:\r\n *           type: boolean\r\n *           description: Whether the attribute is required\r\n *         controltype:\r\n *           type: integer\r\n *           description: Type of control for the attribute\r\n *         displayorder:\r\n *           type: integer\r\n *           description: Display order of the attribute\r\n *         pvamvaluemodels:\r\n *           type: array\r\n *           items:\r\n *             $ref: '#/components/schemas/AttributeValue'\r\n *\r\n *     Product:\r\n *       type: object\r\n *       required:\r\n *         - proname\r\n *         - catids\r\n *         - prouom\r\n *       properties:\r\n *         proname:\r\n *           type: string\r\n *           description: Name of the product\r\n *         prodescription:\r\n *           type: string\r\n *           description: Product description\r\n *         proconfig:\r\n *           type: integer\r\n *           description: Product configuration\r\n *         catids:\r\n *           type: array\r\n *           items:\r\n *             type: integer\r\n *           description: Array of category IDs\r\n *         prouom:\r\n *           type: integer\r\n *           description: Primary UOM ID\r\n *         variant:\r\n *           type: object\r\n *           properties:\r\n *             pvbarcode:\r\n *               type: string\r\n *             pvpurchaseprice:\r\n *               type: number\r\n *             pvsalesprice:\r\n *               type: number\r\n *             reconciliation_price:\r\n *               type: number\r\n *             normal_loss:\r\n *               type: number\r\n *         location:\r\n *           type: object\r\n *           properties:\r\n *             safetylevel:\r\n *               type: number\r\n *             reorderlevel:\r\n *               type: number\r\n *             min_stock_uom:\r\n *               type: integer\r\n *             par_stock_uom:\r\n *               type: integer\r\n *             closingstock_on:\r\n *               type: object\r\n *               description: JSON object containing closing stock information\r\n *         tax:\r\n *           type: object\r\n *           properties:\r\n *             taxrate:\r\n *               type: number\r\n *             hsncode:\r\n *               type: integer\r\n *         purchaseUoms:\r\n *           type: array\r\n *           items:\r\n *             type: object\r\n *             properties:\r\n *               uomid:\r\n *                 type: integer\r\n *               is_default:\r\n *                 type: boolean\r\n *         consumptionUom:\r\n *           type: object\r\n *           properties:\r\n *             uomid:\r\n *               type: integer\r\n *         productimgid:\r\n *           type: integer\r\n *           description: ID of the product image\r\n *         pvamappings:\r\n *           type: array\r\n *           items:\r\n *             $ref: '#/components/schemas/AttributeMapping'\r\n *           description: Product attribute mappings\r\n */\n\n/**\r\n * @swagger\r\n * /api/v2/products/modal:\r\n *   get:\r\n *     summary: Get product creation modal template and dropdowns\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Modal template and dropdown data\r\n */\nrouter.get('/modal', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getProductToCreateModal);\n\n/**\r\n * @swagger\r\n * /api/v2/products:\r\n *   post:\r\n *     summary: Create a new product\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/Product'\r\n *     responses:\r\n *       201:\r\n *         description: Product created successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   $ref: '#/components/schemas/Product'\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n */\nrouter.post('/', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.createProduct);\n\n/**\r\n * @swagger\r\n * /api/v2/products:\r\n *   get:\r\n *     summary: Get all products\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: List of products\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: array\r\n *               items:\r\n *                 $ref: '#/components/schemas/Product'\r\n */\nrouter.get('/', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getProducts);\n\n/**\r\n * @swagger\r\n * /api/v2/products/{id}:\r\n *   get:\r\n *     summary: Get a product by ID\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: id\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: Product ID\r\n *     responses:\r\n *       200:\r\n *         description: Product details\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   type: object\r\n *                   properties:\r\n *                     proid:\r\n *                       type: integer\r\n *                     proname:\r\n *                       type: string\r\n *                     # ... other existing properties ...\r\n *                     pvamappings:\r\n *                       type: array\r\n *                       items:\r\n *                         $ref: '#/components/schemas/AttributeMapping'\r\n *       404:\r\n *         description: Product not found\r\n */\nrouter.get('/:id', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getProductById);\n\n/**\r\n * @swagger\r\n * /api/v2/products/{id}:\r\n *   put:\r\n *     summary: Update a product\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: id\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: Product ID\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               proname:\r\n *                 type: string\r\n *                 description: Product name\r\n *               prodescription:\r\n *                 type: string\r\n *                 description: Product description\r\n *               proconfig:\r\n *                 type: integer\r\n *                 description: Product configuration\r\n *               prouom:\r\n *                 type: string\r\n *                 description: Product unit of measure ID\r\n *               productimgid:\r\n *                 type: string\r\n *                 description: Product image ID\r\n *               categories:\r\n *                 type: array\r\n *                 items:\r\n *                   type: object\r\n *                   properties:\r\n *                     catid:\r\n *                       type: integer\r\n *                       description: Category ID\r\n *               variant:\r\n *                 type: object\r\n *                 properties:\r\n *                   pvbarcode:\r\n *                     type: string\r\n *                     description: Variant barcode\r\n *                   pvpurchaseprice:\r\n *                     type: string\r\n *                     description: Purchase price\r\n *                   pvsalesprice:\r\n *                     type: string\r\n *                     description: Sales price\r\n *                   reconciliation_price:\r\n *                     type: string\r\n *                     description: Reconciliation price\r\n *                   normal_loss:\r\n *                     type: string\r\n *                     description: Normal loss percentage\r\n *               location:\r\n *                 type: object\r\n *                 properties:\r\n *                   safetylevel:\r\n *                     type: string\r\n *                     description: Safety stock level\r\n *                   reorderlevel:\r\n *                     type: string\r\n *                     description: Reorder level\r\n *                   min_stock_uom:\r\n *                     type: string\r\n *                     description: Minimum stock UOM\r\n *                   par_stock_uom:\r\n *                     type: string\r\n *                     description: Par stock UOM\r\n *                   closingstock_on:\r\n *                     type: string\r\n *                     format: date\r\n *                     description: Closing stock date\r\n *               tax:\r\n *                 type: object\r\n *                 properties:\r\n *                   taxrate:\r\n *                     type: string\r\n *                     description: Tax rate percentage\r\n *                   hsncode:\r\n *                     type: integer\r\n *                     description: HSN code\r\n *               pvamappings:\r\n *                 type: array\r\n *                 description: Product variant attribute mappings\r\n *                 items:\r\n *                   type: object\r\n *                   properties:\r\n *                     pvamid:\r\n *                       type: integer\r\n *                       description: Attribute mapping ID\r\n *                     attributeid:\r\n *                       type: integer\r\n *                       description: Attribute ID\r\n *                     isrequired:\r\n *                       type: boolean\r\n *                       description: Is attribute required\r\n *                     pvamvaluemodels:\r\n *                       type: array\r\n *                       items:\r\n *                         type: object\r\n *                         properties:\r\n *                           pvamvid:\r\n *                             type: integer\r\n *                             description: Attribute value mapping ID\r\n *                           avid:\r\n *                             type: integer\r\n *                             description: Attribute value ID\r\n *     responses:\r\n *       200:\r\n *         description: Product updated successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                   example: true\r\n *                 data:\r\n *                   $ref: '#/components/schemas/Product'\r\n *       404:\r\n *         description: Product not found\r\n *       400:\r\n *         description: Invalid input data\r\n *       401:\r\n *         description: Unauthorized\r\n *       500:\r\n *         description: Server error\r\n */\nrouter.put('/:id', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.updateProduct);\n\n/**\r\n * @swagger\r\n * /api/v2/products/{id}:\r\n *   delete:\r\n *     summary: Delete a product\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: id\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: Product ID\r\n *     responses:\r\n *       200:\r\n *         description: Product deleted successfully\r\n *       404:\r\n *         description: Product not found\r\n */\nrouter[\"delete\"]('/:id', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.deleteProduct);\n\n/**\r\n * @swagger\r\n * /api/products/uoms/{catid}:\r\n *   get:\r\n *     summary: Get UOMs by category ID\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: catid\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *     responses:\r\n *       200:\r\n *         description: List of UOMs for the category\r\n */\nrouter.get('/uoms/:catid', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getUomsByCategoryController);\n\n/**\r\n * @swagger\r\n * /api/v2/products/filter:\r\n *   post:\r\n *     summary: Get filtered products with pagination\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             type: object\r\n *             properties:\r\n *               proname:\r\n *                 type: string\r\n *                 description: Product name to filter by\r\n *               proconfig:\r\n *                 type: integer\r\n *                 description: Product configuration to filter by\r\n *               catid:\r\n *                 type: integer\r\n *                 description: Category ID to filter by\r\n *               page:\r\n *                 type: integer\r\n *                 minimum: 1\r\n *                 default: 1\r\n *               limit:\r\n *                 type: integer\r\n *                 minimum: 1\r\n *                 default: 10\r\n *     responses:\r\n *       200:\r\n *         description: Filtered products with pagination\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 products:\r\n *                   type: array\r\n *                   items:\r\n *                     $ref: '#/components/schemas/Product'\r\n *                 totalCount:\r\n *                   type: integer\r\n *                   description: Total number of products matching the filter\r\n *                 currentPage:\r\n *                   type: integer\r\n *                   description: Current page number\r\n *                 totalPages:\r\n *                   type: integer\r\n *                   description: Total number of pages\r\n *       400:\r\n *         description: Invalid filter parameters\r\n *       401:\r\n *         description: Unauthorized\r\n */\nrouter.post('/filter', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.filterProducts);\n\n/**\r\n * @swagger\r\n * components:\r\n *   schemas:\r\n *     VariantLocation:\r\n *       type: object\r\n *       properties:\r\n *         safetylevel:\r\n *           type: number\r\n *           description: Safety stock level\r\n *           example: 100\r\n *         reorderlevel:\r\n *           type: number\r\n *           description: Reorder point level\r\n *           example: 50\r\n *         min_stock_uom:\r\n *           type: integer\r\n *           description: Minimum stock unit of measure ID\r\n *           example: 1\r\n *         par_stock_uom:\r\n *           type: integer\r\n *           description: Par stock unit of measure ID\r\n *           example: 1\r\n *\r\n *     VariantTax:\r\n *       type: object\r\n *       properties:\r\n *         taxrate:\r\n *           type: number\r\n *           description: Tax rate percentage\r\n *           example: 18\r\n *         hsncode:\r\n *           type: integer\r\n *           description: HSN code for the variant\r\n *           example: 84713010\r\n *\r\n *     ProductVariant:\r\n *       type: object\r\n *       required:\r\n *         - pvname\r\n *         - pvbarcode\r\n *         - pvpurchaseprice\r\n *         - pvsalesprice\r\n *       properties:\r\n *         pvname:\r\n *           type: string\r\n *           description: Name of the variant\r\n *           example: \"Large Size Blue\"\r\n *         pvdesc:\r\n *           type: string\r\n *           description: Detailed description of the variant\r\n *           example: \"Large size variant in blue color\"\r\n *         shortdesc:\r\n *           type: string\r\n *           description: Short description of the variant\r\n *           example: \"Large Blue\"\r\n *         pvbarcode:\r\n *           type: string\r\n *           description: Unique barcode for the variant\r\n *           example: \"VAR123456\"\r\n *         pvsku:\r\n *           type: string\r\n *           description: SKU code for the variant\r\n *           example: \"SKU-LRG-BLU\"\r\n *         pvdefaultimgid:\r\n *           type: integer\r\n *           description: Default image ID for the variant\r\n *           example: 1\r\n *         pvstatus:\r\n *           type: integer\r\n *           description: Status of the variant\r\n *           example: 1\r\n *         pvsalesprice:\r\n *           type: number\r\n *           description: Sales price of the variant\r\n *           example: 150.75\r\n *         pvpurchaseprice:\r\n *           type: number\r\n *           description: Purchase price of the variant\r\n *           example: 100.50\r\n *         pvoldprice:\r\n *           type: number\r\n *           description: Old price of the variant\r\n *           example: 160.00\r\n *         pvspecialprice:\r\n *           type: number\r\n *           description: Special price of the variant\r\n *           example: 140.00\r\n *         pvspstartdate:\r\n *           type: string\r\n *           format: date-time\r\n *           description: Special price start date\r\n *         pvspenddate:\r\n *           type: string\r\n *           format: date-time\r\n *           description: Special price end date\r\n *         moq:\r\n *           type: number\r\n *           description: Minimum order quantity\r\n *           example: 5\r\n *         isinclusive:\r\n *           type: boolean\r\n *           description: Whether price is inclusive of tax\r\n *           example: false\r\n *         ispublished:\r\n *           type: boolean\r\n *           description: Whether variant is published\r\n *           example: true\r\n *         displayOnHomePage:\r\n *           type: boolean\r\n *           description: Whether to display on home page\r\n *           example: false\r\n *         admincomment:\r\n *           type: string\r\n *           description: Admin comments for the variant\r\n *           example: \"New summer collection variant\"\r\n *         reconciliation_price:\r\n *           type: number\r\n *           description: Price used for reconciliation\r\n *           example: 125.00\r\n *         normal_loss:\r\n *           type: number\r\n *           description: Normal loss percentage\r\n *           example: 2.5\r\n *         location:\r\n *           $ref: '#/components/schemas/VariantLocation'\r\n *         tax:\r\n *           $ref: '#/components/schemas/VariantTax'\r\n *\r\n *     VariantResponse:\r\n *       type: object\r\n *       properties:\r\n *         success:\r\n *           type: boolean\r\n *           example: true\r\n *         data:\r\n *           $ref: '#/components/schemas/ProductVariant'\r\n *\r\n *     VariantListResponse:\r\n *       type: object\r\n *       properties:\r\n *         success:\r\n *           type: boolean\r\n *           example: true\r\n *         data:\r\n *           type: array\r\n *           items:\r\n *             $ref: '#/components/schemas/ProductVariant'\r\n */\n\n/**\r\n * @swagger\r\n * /api/v2/products/{productId}/variants:\r\n *   post:\r\n *     summary: Create a new variant for a product\r\n *     tags: [Product Variants]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: productId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the product to create variant for\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/ProductVariant'\r\n *     responses:\r\n *       201:\r\n *         description: Variant created successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               $ref: '#/components/schemas/VariantResponse'\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n *       404:\r\n *         description: Product not found\r\n *\r\n *   get:\r\n *     summary: Get all variants for a product\r\n *     tags: [Product Variants]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: productId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the product to get variants for\r\n *     responses:\r\n *       200:\r\n *         description: List of variants\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               $ref: '#/components/schemas/VariantListResponse'\r\n *       401:\r\n *         description: Unauthorized\r\n *       404:\r\n *         description: Product not found\r\n * \r\n *\r\n * /api/v2/products/{productId}/variants/{variantId}:\r\n *   get:\r\n *     summary: Get a specific variant\r\n *     tags: [Product Variants]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: productId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the product\r\n *       - in: path\r\n *         name: variantId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the variant\r\n *     responses:\r\n *       200:\r\n *         description: Variant details\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               $ref: '#/components/schemas/VariantResponse'\r\n *       401:\r\n *         description: Unauthorized\r\n *       404:\r\n *         description: Variant not found\r\n *\r\n *   put:\r\n *     summary: Update a variant\r\n *     tags: [Product Variants]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: productId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the product\r\n *       - in: path\r\n *         name: variantId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the variant to update\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/ProductVariant'\r\n *     responses:\r\n *       200:\r\n *         description: Variant updated successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               $ref: '#/components/schemas/VariantResponse'\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n *       404:\r\n *         description: Variant not found\r\n *\r\n *   delete:\r\n *     summary: Delete a variant\r\n *     tags: [Product Variants]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     parameters:\r\n *       - in: path\r\n *         name: productId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the product\r\n *       - in: path\r\n *         name: variantId\r\n *         required: true\r\n *         schema:\r\n *           type: integer\r\n *         description: ID of the variant to delete\r\n *     responses:\r\n *       200:\r\n *         description: Variant deleted successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                   example: true\r\n *                 message:\r\n *                   type: string\r\n *                   example: Variant deleted successfully\r\n *       401:\r\n *         description: Unauthorized\r\n *       404:\r\n *         description: Variant not found\r\n */\n\nrouter.post('/:productId/variants', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.createVariant);\n\n// Get all variants for a product\nrouter.get('/:productId/variants', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getVariants);\n\n// Get specific variant\nrouter.get('/:productId/variants/:variantId', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.getVariantById);\n\n// Update variant\nrouter.put('/:productId/variants/:variantId', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.updateVariant);\n\n// Delete variant\nrouter[\"delete\"]('/:productId/variants/:variantId', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.deleteVariant);\n\n/**\r\n * @swagger\r\n * /api/v2/products:\r\n *   post:\r\n *     summary: Create a new product\r\n *     tags: [Products]\r\n *     security:\r\n *       - bearerAuth: []\r\n *     requestBody:\r\n *       required: true\r\n *       content:\r\n *         application/json:\r\n *           schema:\r\n *             $ref: '#/components/schemas/Product'\r\n *     responses:\r\n *       201:\r\n *         description: Product created successfully\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   $ref: '#/components/schemas/Product'\r\n *       400:\r\n *         description: Invalid request data\r\n *       401:\r\n *         description: Unauthorized\r\n */\nrouter.post('/manageProduct', _controllers_productController_js__WEBPACK_IMPORTED_MODULE_1__.manageProductController);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://node/./src/routes/productRoutes.js?");

/***/ }),

/***/ "./src/services/attributesService.js":
/*!*******************************************!*\
  !*** ./src/services/attributesService.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bulkDeleteAttributesService: () => (/* binding */ bulkDeleteAttributesService),\n/* harmony export */   getAttributesDropService: () => (/* binding */ getAttributesDropService),\n/* harmony export */   getAttributesService: () => (/* binding */ getAttributesService),\n/* harmony export */   manageAttributesService: () => (/* binding */ manageAttributesService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../repositories/attributesRepository.js */ \"./src/repositories/attributesRepository.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\n\n\nvar getAttributesService = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req) {\n    var getAttributesByidData, gttributesDetails;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(req.body.attributeid != null && req.body.attributeid != '')) {\n            _context.next = 5;\n            break;\n          }\n          _context.next = 3;\n          return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.getAttributesByid)(req.body.attributeid);\n        case 3:\n          getAttributesByidData = _context.sent;\n          return _context.abrupt(\"return\", getAttributesByidData);\n        case 5:\n          _context.next = 7;\n          return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.getAttributes)(req);\n        case 7:\n          gttributesDetails = _context.sent;\n          return _context.abrupt(\"return\", gttributesDetails);\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getAttributesService(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar manageAttributesService = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return prisma.$transaction(/*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(prisma) {\n              var _req$body, attributeid, attributename, description, attributeicon, attributecolor, uoid, createdby, modifiedby, isdeleted, deletedby, isspecification, attributesData, attributesDetails, _iterator, _step, value, hardDeleteData, _iterator2, _step2, _value, attributeValueData, attributeValueDetails;\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _req$body = req.body, attributeid = _req$body.attributeid, attributename = _req$body.attributename, description = _req$body.description, attributeicon = _req$body.attributeicon, attributecolor = _req$body.attributecolor, uoid = _req$body.uoid, createdby = _req$body.createdby, modifiedby = _req$body.modifiedby, isdeleted = _req$body.isdeleted, deletedby = _req$body.deletedby, isspecification = _req$body.isspecification;\n                    attributesData = {\n                      attributeid: attributeid == null ? undefined : attributeid,\n                      attributename: attributename,\n                      description: description,\n                      attributeicon: attributeicon,\n                      attributecolor: attributecolor,\n                      uoid: req.user.uoid,\n                      createdby: req.user.uid,\n                      modifiedby: req.user.uid,\n                      isdeleted: isdeleted,\n                      isspecification: isspecification\n                    };\n                    _context2.next = 4;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.manageAttributes)(attributesData);\n                  case 4:\n                    attributesDetails = _context2.sent;\n                    if (!(req.body.attributevalues && req.body.attributevalues.length > 0)) {\n                      _context2.next = 26;\n                      break;\n                    }\n                    _iterator = _createForOfIteratorHelper(req.body.attributevalues);\n                    _context2.prev = 7;\n                    _iterator.s();\n                  case 9:\n                    if ((_step = _iterator.n()).done) {\n                      _context2.next = 18;\n                      break;\n                    }\n                    value = _step.value;\n                    _context2.next = 13;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.hardDeleteAttributeValues)(value.attributeid);\n                  case 13:\n                    hardDeleteData = _context2.sent;\n                    console.log('harsss', hardDeleteData);\n                    process.exit();\n                  case 16:\n                    _context2.next = 9;\n                    break;\n                  case 18:\n                    _context2.next = 23;\n                    break;\n                  case 20:\n                    _context2.prev = 20;\n                    _context2.t0 = _context2[\"catch\"](7);\n                    _iterator.e(_context2.t0);\n                  case 23:\n                    _context2.prev = 23;\n                    _iterator.f();\n                    return _context2.finish(23);\n                  case 26:\n                    console.log('testt');\n                    // process.exit()\n                    if (!(req.body.attributevalues && req.body.attributevalues.length > 0)) {\n                      _context2.next = 47;\n                      break;\n                    }\n                    _iterator2 = _createForOfIteratorHelper(req.body.attributevalues);\n                    _context2.prev = 29;\n                    _iterator2.s();\n                  case 31:\n                    if ((_step2 = _iterator2.n()).done) {\n                      _context2.next = 39;\n                      break;\n                    }\n                    _value = _step2.value;\n                    attributeValueData = {\n                      attributeid: attributesDetails.attributeid,\n                      avid: _value.avid == null ? undefined : _value.avid,\n                      avname: _value.avname,\n                      avdisplayorder: _value.avdisplayorder != null ? _value.avdisplayorder.toString() : _value.avdisplayorder,\n                      uoid: req.user.uoid,\n                      avicon: _value.avicon,\n                      avcolor: _value.avcolor,\n                      createdby: req.user.uid,\n                      modifiedby: req.user.uid,\n                      isdeleted: false\n                    };\n                    _context2.next = 36;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.manageAttributeValue)(attributeValueData);\n                  case 36:\n                    attributeValueDetails = _context2.sent;\n                  case 37:\n                    _context2.next = 31;\n                    break;\n                  case 39:\n                    _context2.next = 44;\n                    break;\n                  case 41:\n                    _context2.prev = 41;\n                    _context2.t1 = _context2[\"catch\"](29);\n                    _iterator2.e(_context2.t1);\n                  case 44:\n                    _context2.prev = 44;\n                    _iterator2.f();\n                    return _context2.finish(44);\n                  case 47:\n                    _context2.next = 49;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.getAttributesByid)(attributesDetails.attributeid);\n                  case 49:\n                    return _context2.abrupt(\"return\", _context2.sent);\n                  case 50:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2, null, [[7, 20, 23, 26], [29, 41, 44, 47]]);\n            }));\n            return function (_x4) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        case 2:\n          return _context3.abrupt(\"return\", _context3.sent);\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function manageAttributesService(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getAttributesDropService = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req) {\n    var getAttributesDropData;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.getAttributesDropDown)(req);\n        case 2:\n          getAttributesDropData = _context4.sent;\n          return _context4.abrupt(\"return\", getAttributesDropData);\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function getAttributesDropService(_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar bulkDeleteAttributesService = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req) {\n    var attributeArr, bulkDeleteAtt;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          attributeArr = req.body.attributeIds;\n          _context6.next = 4;\n          return Promise.all(attributeArr.map(/*#__PURE__*/function () {\n            var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(a) {\n              var attriData, deleteAttribute, deleteAttributeVal;\n              return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    attriData = {\n                      attributeid: a,\n                      isdeleted: true,\n                      deletedby: req.user.uid\n                    };\n                    _context5.next = 3;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.manageAttributes)(attriData);\n                  case 3:\n                    deleteAttribute = _context5.sent;\n                    console.log('ssWFwge');\n                    _context5.next = 7;\n                    return (0,_repositories_attributesRepository_js__WEBPACK_IMPORTED_MODULE_1__.updateAttributeValuesForDelete)(attriData);\n                  case 7:\n                    deleteAttributeVal = _context5.sent;\n                  case 8:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x7) {\n              return _ref6.apply(this, arguments);\n            };\n          }()));\n        case 4:\n          bulkDeleteAtt = _context6.sent;\n          return _context6.abrupt(\"return\", bulkDeleteAtt);\n        case 8:\n          _context6.prev = 8;\n          _context6.t0 = _context6[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error in bulk delete attributes:', _context6.t0);\n        case 11:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 8]]);\n  }));\n  return function bulkDeleteAttributesService(_x6) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/services/attributesService.js?");

/***/ }),

/***/ "./src/services/offersService.js":
/*!***************************************!*\
  !*** ./src/services/offersService.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOffersModalService: () => (/* binding */ getOffersModalService),\n/* harmony export */   getOffersService: () => (/* binding */ getOffersService),\n/* harmony export */   manageOffersService: () => (/* binding */ manageOffersService)\n/* harmony export */ });\n/* harmony import */ var _repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../repositories/offersRepository.js */ \"./src/repositories/offersRepository.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\nvar PrismaClient = _prisma_client__WEBPACK_IMPORTED_MODULE_2__.PrismaClient;\nvar prisma = new PrismaClient({\n  log: ['query']\n});\nvar manageOffersService = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return prisma.$transaction(/*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(prisma) {\n              var _req$body, offerid, offername, offerdescription, couponcode, termscondi, startdate, enddate, discpercentage, discmaxamount, discountmaxtimes, resetdays, discbasis, mincartamount, cardtype, offertype, itemprice, noofbuyproducts, nooffreeproducts, isclubbable, isapproved, idtype, forid, isfree, offersData, createOffer, offerMappingsData, createOfferMappings, offerDetails;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _req$body = req.body, offerid = _req$body.offerid, offername = _req$body.offername, offerdescription = _req$body.offerdescription, couponcode = _req$body.couponcode, termscondi = _req$body.termscondi, startdate = _req$body.startdate, enddate = _req$body.enddate, discpercentage = _req$body.discpercentage, discmaxamount = _req$body.discmaxamount, discountmaxtimes = _req$body.discountmaxtimes, resetdays = _req$body.resetdays, discbasis = _req$body.discbasis, mincartamount = _req$body.mincartamount, cardtype = _req$body.cardtype, offertype = _req$body.offertype, itemprice = _req$body.itemprice, noofbuyproducts = _req$body.noofbuyproducts, nooffreeproducts = _req$body.nooffreeproducts, isclubbable = _req$body.isclubbable, isapproved = _req$body.isapproved, idtype = _req$body.idtype, forid = _req$body.forid, isfree = _req$body.isfree; // Create offer\n                    offersData = {\n                      offerid: offerid,\n                      offername: offername,\n                      offerdescription: offerdescription,\n                      couponcode: couponcode,\n                      termscondi: termscondi,\n                      startdate: startdate,\n                      enddate: enddate,\n                      discpercentage: discpercentage,\n                      discmaxamount: discmaxamount,\n                      discountmaxtimes: discountmaxtimes,\n                      resetdays: resetdays,\n                      discbasis: discbasis,\n                      mincartamount: mincartamount,\n                      cardtype: cardtype,\n                      offertype: offertype,\n                      itemprice: itemprice,\n                      noofbuyproducts: noofbuyproducts,\n                      nooffreeproducts: nooffreeproducts,\n                      isclubbable: isclubbable,\n                      createdby: req.user.uid,\n                      isapproved: isapproved,\n                      approvedby: req.user.uid\n                      // approveddate : ,\n                      // uoid :,\n                      // uaid : \n                    };\n                    _context.next = 4;\n                    return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.manageOffers)(offersData);\n                  case 4:\n                    createOffer = _context.sent;\n                    // Create offer mappings\n                    offerMappingsData = {\n                      offerid: createOffer.offerid,\n                      idtype: idtype,\n                      forid: forid,\n                      isfree: isfree\n                    };\n                    _context.next = 8;\n                    return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.manageOfferMappings)(offersData, offerMappingsData);\n                  case 8:\n                    createOfferMappings = _context.sent;\n                    offerDetails = _objectSpread(_objectSpread({}, createOffer), {}, {\n                      offer_mappings: createOfferMappings\n                    });\n                    return _context.abrupt(\"return\", offerDetails);\n                  case 11:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x3) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n        case 2:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function manageOffersService(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getOffersModalService = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var discountBasis, offerType, offermappingIdType, offerTemplate;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.getMasterValues)(13);\n        case 3:\n          discountBasis = _context3.sent;\n          _context3.next = 6;\n          return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.getMasterValues)(14);\n        case 6:\n          offerType = _context3.sent;\n          _context3.next = 9;\n          return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.getMasterValues)(15);\n        case 9:\n          offermappingIdType = _context3.sent;\n          offerTemplate = {\n            \"offername\": \"string\",\n            \"offerdescription\": \"string\",\n            \"couponcode\": \"string\",\n            \"termscondi\": \"string\",\n            \"startdate\": \"2024-12-26T11:25:32.893Z\",\n            \"enddate\": \"2024-12-26T11:25:32.893Z\",\n            \"discpercentage\": 0,\n            \"discmaxamount\": 0,\n            \"discountmaxtimes\": 0,\n            \"resetdays\": 0,\n            \"discbasis\": 0,\n            \"mincartamount\": 0,\n            \"cardtype\": 0,\n            \"offertype\": 0,\n            \"itemprice\": 0,\n            \"noofbuyproducts\": 0,\n            \"nooffreeproducts\": 0,\n            \"isclubbable\": true,\n            \"offer_mappings\": [{\n              \"idtype\": 0,\n              \"forid\": 0,\n              \"isfree\": true\n            }]\n          };\n          return _context3.abrupt(\"return\", {\n            offer: offerTemplate,\n            discountBasis: discountBasis,\n            offerType: offerType,\n            offermappingIdType: offermappingIdType\n          });\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error getting category modal', {\n            error: _context3.t0.message,\n            stack: _context3.t0.stack\n          });\n          throw _context3.t0;\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 14]]);\n  }));\n  return function getOffersModalService(_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getOffersService = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req) {\n    var _getOffersDetails, getOffersDetails;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          if (!req.query.offerid) {\n            _context4.next = 5;\n            break;\n          }\n          _context4.next = 3;\n          return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.getOfferById)(req.query.offerid);\n        case 3:\n          _getOffersDetails = _context4.sent;\n          return _context4.abrupt(\"return\", _getOffersDetails);\n        case 5:\n          _context4.next = 7;\n          return (0,_repositories_offersRepository_js__WEBPACK_IMPORTED_MODULE_0__.getAllOffers)(req.user.uoid);\n        case 7:\n          getOffersDetails = _context4.sent;\n          return _context4.abrupt(\"return\", getOffersDetails);\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function getOffersService(_x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/services/offersService.js?");

/***/ }),

/***/ "./src/services/productService.js":
/*!****************************************!*\
  !*** ./src/services/productService.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProduct: () => (/* binding */ createProduct),\n/* harmony export */   createVariant: () => (/* binding */ createVariant),\n/* harmony export */   deleteProduct: () => (/* binding */ deleteProduct),\n/* harmony export */   deleteVariant: () => (/* binding */ deleteVariant),\n/* harmony export */   filterProducts: () => (/* binding */ filterProducts),\n/* harmony export */   formatProductForUI: () => (/* binding */ formatProductForUI),\n/* harmony export */   getAllProducts: () => (/* binding */ getAllProducts),\n/* harmony export */   getProductById: () => (/* binding */ getProductById),\n/* harmony export */   getProductModal: () => (/* binding */ getProductModal),\n/* harmony export */   getUomsByCatService: () => (/* binding */ getUomsByCatService),\n/* harmony export */   getVariantById: () => (/* binding */ getVariantById),\n/* harmony export */   getVariants: () => (/* binding */ getVariants),\n/* harmony export */   manageProductService: () => (/* binding */ manageProductService),\n/* harmony export */   updateProduct: () => (/* binding */ updateProduct),\n/* harmony export */   updateProduct2: () => (/* binding */ updateProduct2),\n/* harmony export */   updateVariant: () => (/* binding */ updateVariant)\n/* harmony export */ });\n/* harmony import */ var _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/prisma.js */ \"./src/config/prisma.js\");\n/* harmony import */ var _repositories_uomRepository_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../repositories/uomRepository.js */ \"./src/repositories/uomRepository.js\");\n/* harmony import */ var _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middleware/errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\n/* harmony import */ var _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @prisma/client/runtime/library */ \"@prisma/client/runtime/library\");\n/* harmony import */ var _repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../repositories/productRepository.js */ \"./src/repositories/productRepository.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar _excluded = [\"pvdefaultimgid\", \"pvcurrencyid\", \"location\", \"tax\"],\n  _excluded2 = [\"provariantlocations\", \"provarianttax\"];\nvar _templateObject, _templateObject2;\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _taggedTemplateLiteral(e, t) { return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, { raw: { value: Object.freeze(t) } })); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\n\nvar getProductModal = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(uoid) {\n    var categories, categoriesArr, productTypes, closingStockTypes, modalTemplate;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].categories.findMany({\n            where: {\n              isdeleted: false\n            },\n            select: {\n              catid: true,\n              catname: true\n            }\n          });\n        case 3:\n          categories = _context.sent;\n          _context.next = 6;\n          return categories.map(function (type) {\n            return {\n              id: type.catid,\n              catname: type.catname\n            };\n          });\n        case 6:\n          categoriesArr = _context.sent;\n          _context.next = 9;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].mastervalues.findMany({\n            where: {\n              masterid: BigInt(6),\n              isdeleted: false\n            },\n            select: {\n              mvid: true,\n              mastervalue: true\n            }\n          });\n        case 9:\n          productTypes = _context.sent;\n          _context.next = 12;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].mastervalues.findMany({\n            where: {\n              masterid: BigInt(5),\n              isdeleted: false\n            },\n            select: {\n              mvid: true,\n              mastervalue: true\n            }\n          });\n        case 12:\n          closingStockTypes = _context.sent;\n          modalTemplate = {\n            proname: \"\",\n            prodescription: \"\",\n            proconfig: 0,\n            catids: [],\n            prouom: 0,\n            productType: 0,\n            // New field for product type\n            closingStockCalc: 0,\n            // New field for closing stock calculation\n            variant: {\n              pvbarcode: \"\",\n              pvpurchaseprice: 0,\n              pvsalesprice: 0,\n              reconciliation_price: 0,\n              normal_loss: 0\n            },\n            location: {\n              safetylevel: 0,\n              reorderlevel: 0,\n              min_stock_uom: 0,\n              par_stock_uom: 0\n            },\n            tax: {\n              taxrate: 0,\n              hsncode: \"\"\n            },\n            purchaseUoms: [],\n            consumptionUom: {\n              uomid: 0\n            },\n            productimgid: null\n          };\n          return _context.abrupt(\"return\", {\n            modal: modalTemplate,\n            categories: categoriesArr,\n            uoms: [],\n            // Initially empty, will be populated based on selected category\n            productTypes: productTypes.map(function (pt) {\n              return {\n                id: pt.mvid,\n                value: pt.mastervalue\n              };\n            }),\n            closingStockTypes: closingStockTypes.map(function (cs) {\n              return {\n                id: cs.mvid,\n                value: cs.mastervalue\n              };\n            })\n          });\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getProductModal:', _context.t0);\n          throw _context.t0;\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 17]]);\n  }));\n  return function getProductModal(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createProduct = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productData, userData) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(prisma) {\n              var product, variant, _iterator, _step, _loop, createdProduct;\n              return _regeneratorRuntime().wrap(function _callee2$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return prisma.product.create({\n                      data: {\n                        proname: productData.proname,\n                        prodescription: productData.prodescription,\n                        proconfig: productData.proconfig,\n                        prouom: productData.prouom,\n                        createdby: BigInt(userData.uid),\n                        uoid: BigInt(userData.uoid),\n                        isdeleted: false,\n                        // Nested category mappings\n                        productcategorymapping: productData.catids.length > 0 ? {\n                          create: productData.catids.map(function (catid) {\n                            return {\n                              catid: BigInt(catid),\n                              createdby: BigInt(userData.uid),\n                              isdeleted: false\n                            };\n                          })\n                        } : undefined,\n                        // Nested UOM mappings\n                        uom_mapping: {\n                          create: [].concat(_toConsumableArray((productData.purchaseUoms || []).map(function (uom) {\n                            return {\n                              uomid: BigInt(uom.uomid),\n                              is_default: uom.is_default || false,\n                              uom_type: BigInt(18),\n                              // Purchase UOM type\n                              createdby: BigInt(userData.uid),\n                              isdeleted: false\n                            };\n                          })), _toConsumableArray(productData.consumptionUom ? [{\n                            uomid: BigInt(productData.consumptionUom.uomid),\n                            is_default: true,\n                            uom_type: BigInt(19),\n                            // Consumption UOM type\n                            createdby: BigInt(userData.uid),\n                            isdeleted: false\n                          }] : []))\n                        }\n                      }\n                    });\n                  case 2:\n                    product = _context3.sent;\n                    if (!productData.variant) {\n                      _context3.next = 33;\n                      break;\n                    }\n                    _context3.next = 6;\n                    return prisma.provariants.create({\n                      data: {\n                        proid: product.proid,\n                        pvname: productData.proname,\n                        pvbarcode: productData.variant.pvbarcode || null,\n                        pvpurchaseprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvpurchaseprice || 0),\n                        pvsalesprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvsalesprice || 0),\n                        reconciliation_price: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.reconciliation_price || 0),\n                        normal_loss: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.normal_loss || 0),\n                        createdby: BigInt(userData.uid),\n                        uoid: BigInt(userData.uoid),\n                        isdeleted: false\n                      }\n                    });\n                  case 6:\n                    variant = _context3.sent;\n                    if (!productData.location) {\n                      _context3.next = 10;\n                      break;\n                    }\n                    _context3.next = 10;\n                    return prisma.provariantlocations.create({\n                      data: {\n                        proid: product.proid,\n                        pvid: variant.pvid,\n                        safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.safetylevel || 0),\n                        reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.reorderlevel || 0),\n                        min_stock_uom: BigInt(productData.location.min_stock_uom),\n                        par_stock_uom: BigInt(productData.location.par_stock_uom),\n                        closingstock_on: productData.location.closingstock_on,\n                        createdby: BigInt(userData.uid),\n                        uoid: BigInt(userData.uoid),\n                        isdeleted: false\n                      }\n                    });\n                  case 10:\n                    if (!productData.tax) {\n                      _context3.next = 13;\n                      break;\n                    }\n                    _context3.next = 13;\n                    return prisma.provarianttax.create({\n                      data: {\n                        proid: product.proid,\n                        pvid: variant.pvid,\n                        taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.tax.taxrate || 0),\n                        hsncode: productData.tax.hsncode,\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }\n                    });\n                  case 13:\n                    if (!productData.productimgid) {\n                      _context3.next = 16;\n                      break;\n                    }\n                    _context3.next = 16;\n                    return prisma.pvummapping.create({\n                      data: {\n                        proid: product.proid,\n                        pvid: variant.pvid,\n                        productimgid: BigInt(productData.productimgid),\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }\n                    });\n                  case 16:\n                    if (!productData.pvamappings) {\n                      _context3.next = 33;\n                      break;\n                    }\n                    _iterator = _createForOfIteratorHelper(productData.pvamappings);\n                    _context3.prev = 18;\n                    _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n                      var mapping, pvamapping;\n                      return _regeneratorRuntime().wrap(function _loop$(_context2) {\n                        while (1) switch (_context2.prev = _context2.next) {\n                          case 0:\n                            mapping = _step.value;\n                            _context2.next = 3;\n                            return prisma.pvamapping.create({\n                              data: {\n                                proid: product.proid,\n                                pvid: variant.pvid,\n                                attributeid: BigInt(mapping.attributeid),\n                                attrtextprompt: mapping.attrtextprompt,\n                                isrequired: mapping.isrequired,\n                                controltype: mapping.controltype,\n                                displayorder: mapping.displayorder,\n                                createdby: BigInt(userData.uid),\n                                isdeleted: false\n                              }\n                            });\n                          case 3:\n                            pvamapping = _context2.sent;\n                            if (!mapping.pvamvaluemodels) {\n                              _context2.next = 7;\n                              break;\n                            }\n                            _context2.next = 7;\n                            return prisma.pvamvalues.createMany({\n                              data: mapping.pvamvaluemodels.map(function (value) {\n                                return {\n                                  pvamid: pvamapping.pvamid,\n                                  avid: BigInt(value.avid),\n                                  pvamvcolor: value.pvamvcolor,\n                                  umid: BigInt(value.umid),\n                                  displayorder: value.displayorder,\n                                  createdby: BigInt(userData.uid),\n                                  isdeleted: false\n                                };\n                              })\n                            });\n                          case 7:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }, _loop);\n                    });\n                    _iterator.s();\n                  case 21:\n                    if ((_step = _iterator.n()).done) {\n                      _context3.next = 25;\n                      break;\n                    }\n                    return _context3.delegateYield(_loop(), \"t0\", 23);\n                  case 23:\n                    _context3.next = 21;\n                    break;\n                  case 25:\n                    _context3.next = 30;\n                    break;\n                  case 27:\n                    _context3.prev = 27;\n                    _context3.t1 = _context3[\"catch\"](18);\n                    _iterator.e(_context3.t1);\n                  case 30:\n                    _context3.prev = 30;\n                    _iterator.f();\n                    return _context3.finish(30);\n                  case 33:\n                    _context3.next = 35;\n                    return prisma.product.findUnique({\n                      where: {\n                        proid: product.proid\n                      },\n                      include: {\n                        productcategorymapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            categories: true\n                          }\n                        },\n                        provariants: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            provariantlocations: true,\n                            provarianttax: true,\n                            pvummapping: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                userimages: true\n                              }\n                            }\n                          }\n                        },\n                        pvamapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            attributes: true,\n                            pvamvalues: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                attributevalues: true\n                              }\n                            }\n                          }\n                        },\n                        uom_mapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            unitofmeasure: true,\n                            mastervalues: true\n                          }\n                        }\n                      }\n                    });\n                  case 35:\n                    createdProduct = _context3.sent;\n                    console.log(\"CREATED PRODUCT\", createdProduct);\n                    return _context3.abrupt(\"return\", formatProductForUI(createdProduct));\n                  case 38:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }, _callee2, null, [[18, 27, 30, 33]]);\n            }));\n            return function (_x4) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        case 3:\n          return _context4.abrupt(\"return\", _context4.sent);\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error creating product:', _context4.t0);\n          throw _context4.t0;\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee3, null, [[0, 6]]);\n  }));\n  return function createProduct(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getAllProducts = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(uoid) {\n    return _regeneratorRuntime().wrap(function _callee4$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findMany({\n            where: {\n              uoid: uoid,\n              isdeleted: false\n            },\n            include: {\n              productcategorymapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  categories: true\n                }\n              },\n              provariants: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  provariantlocations: true,\n                  provarianttax: true\n                }\n              }\n            }\n          });\n        case 3:\n          return _context5.abrupt(\"return\", _context5.sent);\n        case 6:\n          _context5.prev = 6;\n          _context5.t0 = _context5[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getAllProducts:', _context5.t0);\n          throw _context5.t0;\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee4, null, [[0, 6]]);\n  }));\n  return function getAllProducts(_x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar getProductById = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(proid, uoid) {\n    var product, variants, baseResponse;\n    return _regeneratorRuntime().wrap(function _callee5$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _context6.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$queryRaw(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        SELECT \\n          p.*,\\n          pv.*,\\n          pvl.*,\\n          pt.*,\\n          pum.productimgid,\\n          ui.umurl as product_image_url,\\n          uom1.uomname as prouom_name,\\n          uom2.uomname as min_stock_uom_name,\\n          uom3.uomname as par_stock_uom_name,\\n          COALESCE(\\n            (SELECT json_agg(\\n              jsonb_build_object(\\n                'catid', c.catid,\\n                'catname', c.catname,\\n                'catdesc', c.catdesc,\\n                'orderno', c.orderno,\\n                'catfullpath', c.catfullpath,\\n                'parentcatid', c.parentcatid,\\n                'categorytype', c.categorytype\\n              ) ORDER BY pcm.id\\n            )\\n            FROM productcategorymapping pcm \\n            JOIN categories c ON pcm.catid = c.catid\\n            WHERE pcm.proid = p.proid \\n            AND pcm.isdeleted = false),\\n            '[]'\\n          ) as categories\\n        FROM product p\\n        LEFT JOIN provariants pv ON p.proid = pv.proid AND pv.isdeleted = false\\n        LEFT JOIN provariantlocations pvl ON pv.pvid = pvl.pvid AND pvl.isdeleted = false\\n        LEFT JOIN provarianttax pt ON pv.pvid = pt.pvid AND pt.isdeleted = false\\n        LEFT JOIN pvummapping pum ON p.proid = pum.proid AND pum.isdeleted = false\\n        LEFT JOIN userimages ui ON pum.productimgid = ui.umid\\n        LEFT JOIN unitofmeasure uom1 ON CAST(p.prouom AS INTEGER) = uom1.uomid\\n        LEFT JOIN unitofmeasure uom2 ON CAST(pvl.min_stock_uom AS INTEGER) = uom2.uomid\\n        LEFT JOIN unitofmeasure uom3 ON CAST(pvl.par_stock_uom AS INTEGER) = uom3.uomid\\n        WHERE p.proid = \", \" AND p.isdeleted = false\\n        GROUP BY \\n          p.proid,\\n          pv.pvid,\\n          pvl.pvlid,\\n          pt.protaxid,\\n          pum.productimgid,\\n          ui.umurl,\\n          uom1.uomname,\\n          uom2.uomname,\\n          uom3.uomname   \\n  \"])), proid);\n        case 3:\n          product = _context6.sent;\n          _context6.next = 6;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$queryRaw(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\" SELECT \\n          v.*,\\n          json_build_object(\\n            'pvlid', l.pvlid,\\n            'warhouseid', l.warhouseid,\\n            'safetylevel', l.safetylevel,\\n            'reorderlevel', l.reorderlevel,\\n            'min_stock_uom', l.min_stock_uom,\\n            'min_stock_uom_name', uom1.uomname,\\n            'par_stock_uom', l.par_stock_uom,\\n            'par_stock_uom_name', uom2.uomname,\\n            'closingstock_on', l.closingstock_on,\\n            'openingstock', l.openingstock,\\n            'closingstock', l.closingstock,\\n            'autorenew', l.autorenew,\\n            'isapproved', l.isapproved\\n          ) as location,\\n          json_build_object(\\n            'protaxid', t.protaxid,\\n            'taxrate', t.taxrate,\\n            'hsncode', t.hsncode,\\n            'isexempt', t.isexempt,\\n            'effectivedate', t.effectivedate,\\n            'isapproved', t.isapproved\\n          ) as tax,\\n          (\\n            SELECT json_agg(\\n              json_build_object(\\n                'uommid', um.uommid,\\n                'proid', um.proid,\\n                'pvid', um.pvid,\\n                'uomid', um.uomid,\\n                'is_default', um.is_default,\\n                'uom_type', um.uom_type,\\n                'isdeleted', um.isdeleted,\\n                'modifiedby', um.modifiedby,\\n                'modifieddate', um.modifieddate,\\n                'createdby', um.createdby,\\n                'uomname', u.uomname\\n              )\\n            )\\n            FROM uom_mapping um\\n            LEFT JOIN unitofmeasure u ON um.uomid = u.uomid\\n            WHERE um.pvid = v.pvid \\n            AND um.uom_type = 1 \\n            AND um.isdeleted = false\\n          ) as \\\"purchaseUoms\\\",\\n          (\\n            SELECT json_build_object(\\n              'uommid', um.uommid,\\n              'proid', um.proid,\\n              'pvid', um.pvid,\\n              'uomid', um.uomid,\\n              'is_default', um.is_default,\\n              'uom_type', um.uom_type,\\n              'isdeleted', um.isdeleted,\\n              'modifiedby', um.modifiedby,\\n              'modifieddate', um.modifieddate,\\n              'createdby', um.createdby,\\n              'uomname', u.uomname\\n            )\\n            FROM uom_mapping um\\n            LEFT JOIN unitofmeasure u ON um.uomid = u.uomid\\n            WHERE um.pvid = v.pvid \\n            AND um.uom_type = 2 \\n            AND um.isdeleted = false\\n            LIMIT 1\\n          ) as \\\"consumptionUom\\\",\\n          (\\n            SELECT json_agg(\\n              json_build_object(\\n                'pvamid', pam.pvamid,\\n                'attributeid', pam.attributeid,\\n                'attributeName', attr.attributename,\\n                'attrtextprompt', pam.attrtextprompt,\\n                'isrequired', pam.isrequired,\\n                'controltype', pam.controltype,\\n                'displayorder', pam.displayorder,\\n                'pvamvaluemodels', (\\n                  SELECT json_agg(\\n                    json_build_object(\\n                      'pvamvid', pamv.pvamvid,\\n                      'avid', pamv.avid,\\n                      'attributeValueName', av.avname,\\n                      'avdisplayorder', av.avdisplayorder,\\n                      'avicon', av.avicon,\\n                      'avcolor', av.avcolor,\\n                      'pvamvcolor', pamv.pvamvcolor,\\n                      'umid', pamv.umid,\\n                      'displayorder', pamv.displayorder\\n                    )\\n                  )\\n                  FROM pvamvalues pamv\\n                  LEFT JOIN attributevalues av ON av.avid = pamv.avid\\n                  WHERE pamv.pvamid = pam.pvamid \\n                  AND pamv.isdeleted = false\\n                  AND av.isdeleted = false\\n                )\\n              )\\n            )\\n            FROM pvamapping pam\\n            LEFT JOIN attributes attr ON attr.attributeid = pam.attributeid\\n            WHERE pam.pvid = v.pvid \\n            AND pam.isdeleted = false\\n          ) as pvamappings\\n        FROM provariants v\\n        LEFT JOIN provariantlocations l ON v.pvid = l.pvid AND l.isdeleted = false\\n        LEFT JOIN provarianttax t ON v.pvid = t.pvid AND t.isdeleted = false\\n        LEFT JOIN unitofmeasure uom1 ON CAST(l.min_stock_uom AS INTEGER) = uom1.uomid\\n        LEFT JOIN unitofmeasure uom2 ON CAST(l.par_stock_uom AS INTEGER) = uom2.uomid\\n        WHERE v.proid =\", \" AND v.isdeleted = false    \"])), proid);\n        case 6:\n          variants = _context6.sent;\n          baseResponse = {\n            proid: product[0].proid,\n            proname: product[0].proname,\n            prodescription: product[0].prodescription,\n            proconfig: product[0].proconfig,\n            prouom: product[0].prouom,\n            prouom_name: product[0].prouom_name,\n            productimgid: product[0].productimgid,\n            product_image_url: product[0].product_image_url,\n            categories: product[0].categories,\n            hasvarient: product[0].hasvarient\n          };\n          if (!(product[0].hasvarient == true)) {\n            _context6.next = 12;\n            break;\n          }\n          return _context6.abrupt(\"return\", _objectSpread(_objectSpread({}, baseResponse), {}, {\n            variants: variants\n          }));\n        case 12:\n          return _context6.abrupt(\"return\", _objectSpread(_objectSpread({}, baseResponse), {}, {\n            variant: variants[0] || null\n          }));\n        case 13:\n          _context6.next = 19;\n          break;\n        case 15:\n          _context6.prev = 15;\n          _context6.t0 = _context6[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getProductById:', _context6.t0);\n          throw _context6.t0;\n        case 19:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee5, null, [[0, 15]]);\n  }));\n  return function getProductById(_x6, _x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar updateProduct = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(proid, productData, userData) {\n    return _regeneratorRuntime().wrap(function _callee7$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.prev = 0;\n          _context9.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(prisma) {\n              var _productData$variant2, variantData, variant, existingMappings, _iterator2, _step2, _loop2, updatedProduct;\n              return _regeneratorRuntime().wrap(function _callee6$(_context8) {\n                while (1) switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.next = 2;\n                    return prisma.product.update({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        proname: productData.proname,\n                        prodescription: productData.prodescription,\n                        proconfig: productData.proconfig,\n                        prouom: productData.prouom,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      }\n                    });\n                  case 2:\n                    if (!(productData.categories && productData.categories.length > 0)) {\n                      _context8.next = 7;\n                      break;\n                    }\n                    _context8.next = 5;\n                    return prisma.productcategorymapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 5:\n                    _context8.next = 7;\n                    return prisma.productcategorymapping.createMany({\n                      data: productData.categories.map(function (cat) {\n                        return {\n                          proid: proid,\n                          catid: BigInt(cat.catid),\n                          createdby: BigInt(userData.uid),\n                          isdeleted: false\n                        };\n                      })\n                    });\n                  case 7:\n                    if (!(productData.purchaseUoms || productData.consumptionUom)) {\n                      _context8.next = 12;\n                      break;\n                    }\n                    _context8.next = 10;\n                    return prisma.uom_mapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 10:\n                    _context8.next = 12;\n                    return prisma.uom_mapping.createMany({\n                      data: [].concat(_toConsumableArray((productData.purchaseUoms || []).map(function (uom) {\n                        var _productData$variant;\n                        return {\n                          proid: proid,\n                          pvid: ((_productData$variant = productData.variant) === null || _productData$variant === void 0 ? void 0 : _productData$variant.pvid) || null,\n                          uomid: BigInt(uom.uomid),\n                          is_default: uom.is_default || false,\n                          uom_type: BigInt(18),\n                          // Purchase UOM type\n                          createdby: BigInt(userData.uid),\n                          isdeleted: false\n                        };\n                      })), _toConsumableArray(productData.consumptionUom ? [{\n                        proid: proid,\n                        pvid: ((_productData$variant2 = productData.variant) === null || _productData$variant2 === void 0 ? void 0 : _productData$variant2.pvid) || null,\n                        uomid: BigInt(productData.consumptionUom.uomid),\n                        is_default: true,\n                        uom_type: BigInt(19),\n                        // Consumption UOM type\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }] : []))\n                    });\n                  case 12:\n                    if (!productData.variant) {\n                      _context8.next = 23;\n                      break;\n                    }\n                    variantData = {\n                      pvname: productData.proname,\n                      pvbarcode: productData.variant.pvbarcode || null,\n                      pvpurchaseprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvpurchaseprice || 0),\n                      pvsalesprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvsalesprice || 0),\n                      reconciliation_price: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.reconciliation_price || 0),\n                      normal_loss: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.normal_loss || 0),\n                      modifiedby: BigInt(userData.uid),\n                      modifieddate: new Date()\n                    };\n                    _context8.next = 16;\n                    return prisma.provariants.upsert({\n                      where: {\n                        pvid: productData.variant.pvid || 0\n                      },\n                      update: variantData,\n                      create: _objectSpread(_objectSpread({}, variantData), {}, {\n                        proid: proid,\n                        uoid: BigInt(userData.uoid),\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      })\n                    });\n                  case 16:\n                    variant = _context8.sent;\n                    if (!productData.location) {\n                      _context8.next = 20;\n                      break;\n                    }\n                    _context8.next = 20;\n                    return prisma.provariantlocations.upsert({\n                      where: {\n                        pvlid: productData.location.pvlid\n                      },\n                      update: {\n                        safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.safetylevel || 0),\n                        reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.reorderlevel || 0),\n                        min_stock_uom: BigInt(productData.location.min_stock_uom),\n                        par_stock_uom: BigInt(productData.location.par_stock_uom),\n                        closingstock_on: productData.location.closingstock_on,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      },\n                      create: {\n                        proid: proid,\n                        pvid: variant.pvid,\n                        safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.safetylevel || 0),\n                        reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.reorderlevel || 0),\n                        min_stock_uom: BigInt(productData.location.min_stock_uom),\n                        par_stock_uom: BigInt(productData.location.par_stock_uom),\n                        closingstock_on: productData.location.closingstock_on,\n                        createdby: BigInt(userData.uid),\n                        uoid: BigInt(userData.uoid),\n                        isdeleted: false\n                      }\n                    });\n                  case 20:\n                    if (!productData.tax) {\n                      _context8.next = 23;\n                      break;\n                    }\n                    _context8.next = 23;\n                    return prisma.provarianttax.upsert({\n                      where: {\n                        protaxid: productData.tax.protaxid\n                      },\n                      update: {\n                        taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.tax.taxrate || 0),\n                        hsncode: productData.tax.hsncode,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      },\n                      create: {\n                        proid: proid,\n                        pvid: variant.pvid,\n                        taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.tax.taxrate || 0),\n                        hsncode: productData.tax.hsncode,\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }\n                    });\n                  case 23:\n                    if (!productData.pvamappings) {\n                      _context8.next = 47;\n                      break;\n                    }\n                    _context8.next = 26;\n                    return prisma.pvamapping.findMany({\n                      where: {\n                        proid: proid\n                      },\n                      select: {\n                        pvamid: true\n                      }\n                    });\n                  case 26:\n                    existingMappings = _context8.sent;\n                    _context8.next = 29;\n                    return prisma.pvamvalues.deleteMany({\n                      where: {\n                        pvamid: {\n                          \"in\": existingMappings.map(function (m) {\n                            return m.pvamid;\n                          })\n                        }\n                      }\n                    });\n                  case 29:\n                    _context8.next = 31;\n                    return prisma.pvamapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 31:\n                    // Create new mappings and values\n                    _iterator2 = _createForOfIteratorHelper(productData.pvamappings);\n                    _context8.prev = 32;\n                    _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2() {\n                      var _productData$variant3;\n                      var mapping, pvamapping;\n                      return _regeneratorRuntime().wrap(function _loop2$(_context7) {\n                        while (1) switch (_context7.prev = _context7.next) {\n                          case 0:\n                            mapping = _step2.value;\n                            _context7.next = 3;\n                            return prisma.pvamapping.create({\n                              data: {\n                                proid: proid,\n                                pvid: ((_productData$variant3 = productData.variant) === null || _productData$variant3 === void 0 ? void 0 : _productData$variant3.pvid) || null,\n                                attributeid: BigInt(mapping.attributeid),\n                                attrtextprompt: mapping.attrtextprompt,\n                                isrequired: mapping.isrequired,\n                                controltype: mapping.controltype,\n                                displayorder: mapping.displayorder,\n                                createdby: BigInt(userData.uid),\n                                isdeleted: false\n                              }\n                            });\n                          case 3:\n                            pvamapping = _context7.sent;\n                            if (!mapping.pvamvaluemodels) {\n                              _context7.next = 7;\n                              break;\n                            }\n                            _context7.next = 7;\n                            return prisma.pvamvalues.createMany({\n                              data: mapping.pvamvaluemodels.map(function (value) {\n                                return {\n                                  pvamid: pvamapping.pvamid,\n                                  avid: BigInt(value.avid),\n                                  pvamvcolor: value.pvamvcolor,\n                                  umid: BigInt(value.umid),\n                                  displayorder: value.displayorder,\n                                  createdby: BigInt(userData.uid),\n                                  isdeleted: false\n                                };\n                              })\n                            });\n                          case 7:\n                          case \"end\":\n                            return _context7.stop();\n                        }\n                      }, _loop2);\n                    });\n                    _iterator2.s();\n                  case 35:\n                    if ((_step2 = _iterator2.n()).done) {\n                      _context8.next = 39;\n                      break;\n                    }\n                    return _context8.delegateYield(_loop2(), \"t0\", 37);\n                  case 37:\n                    _context8.next = 35;\n                    break;\n                  case 39:\n                    _context8.next = 44;\n                    break;\n                  case 41:\n                    _context8.prev = 41;\n                    _context8.t1 = _context8[\"catch\"](32);\n                    _iterator2.e(_context8.t1);\n                  case 44:\n                    _context8.prev = 44;\n                    _iterator2.f();\n                    return _context8.finish(44);\n                  case 47:\n                    _context8.next = 49;\n                    return prisma.product.findUnique({\n                      where: {\n                        proid: proid\n                      },\n                      include: {\n                        productcategorymapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            categories: true\n                          }\n                        },\n                        provariants: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            provariantlocations: true,\n                            provarianttax: true,\n                            pvummapping: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                userimages: true\n                              }\n                            }\n                          }\n                        },\n                        pvamapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            attributes: true,\n                            pvamvalues: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                attributevalues: true\n                              }\n                            }\n                          }\n                        },\n                        uom_mapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            unitofmeasure: true,\n                            mastervalues: true\n                          }\n                        }\n                      }\n                    });\n                  case 49:\n                    updatedProduct = _context8.sent;\n                    console.log(\"UPDATED PRODUCT\", updatedProduct);\n                    return _context8.abrupt(\"return\", formatProductForUI(updatedProduct));\n                  case 52:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }, _callee6, null, [[32, 41, 44, 47]]);\n            }));\n            return function (_x11) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n        case 3:\n          return _context9.abrupt(\"return\", _context9.sent);\n        case 6:\n          _context9.prev = 6;\n          _context9.t0 = _context9[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error updating product:', _context9.t0);\n          throw _context9.t0;\n        case 10:\n        case \"end\":\n          return _context9.stop();\n      }\n    }, _callee7, null, [[0, 6]]);\n  }));\n  return function updateProduct(_x8, _x9, _x10) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar deleteProduct = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(proid, uid) {\n    return _regeneratorRuntime().wrap(function _callee9$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.prev = 0;\n          _context11.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(prisma) {\n              return _regeneratorRuntime().wrap(function _callee8$(_context10) {\n                while (1) switch (_context10.prev = _context10.next) {\n                  case 0:\n                    _context10.next = 2;\n                    return prisma.product.update({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    });\n                  case 2:\n                    _context10.next = 4;\n                    return Promise.all([prisma.productcategorymapping.updateMany({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    }), prisma.pvamapping.updateMany({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    }), prisma.provariants.updateMany({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    })]);\n                  case 4:\n                    return _context10.abrupt(\"return\", true);\n                  case 5:\n                  case \"end\":\n                    return _context10.stop();\n                }\n              }, _callee8);\n            }));\n            return function (_x14) {\n              return _ref9.apply(this, arguments);\n            };\n          }());\n        case 3:\n          return _context11.abrupt(\"return\", _context11.sent);\n        case 6:\n          _context11.prev = 6;\n          _context11.t0 = _context11[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in deleteProduct:', _context11.t0);\n          throw _context11.t0;\n        case 10:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee9, null, [[0, 6]]);\n  }));\n  return function deleteProduct(_x12, _x13) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar filterProducts = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(_ref10, uoid) {\n    var proname, proconfig, catid, _ref10$page, page, _ref10$limit, limit, skip, where, countQuery, totalCount, result, productsWithVariants, products, formattedProducts;\n    return _regeneratorRuntime().wrap(function _callee11$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          proname = _ref10.proname, proconfig = _ref10.proconfig, catid = _ref10.catid, _ref10$page = _ref10.page, page = _ref10$page === void 0 ? 1 : _ref10$page, _ref10$limit = _ref10.limit, limit = _ref10$limit === void 0 ? 10 : _ref10$limit;\n          _context13.prev = 1;\n          skip = (page - 1) * limit; // Build where conditions\n          where = _objectSpread(_objectSpread(_objectSpread({\n            isdeleted: false,\n            uoid: BigInt(uoid)\n          }, proname && {\n            proname: {\n              contains: proname,\n              mode: 'insensitive'\n            }\n          }), proconfig !== undefined && proconfig !== null && {\n            proconfig: proconfig\n          }), catid && {\n            productcategorymapping: {\n              some: {\n                catid: BigInt(catid),\n                isdeleted: false\n              }\n            }\n          }); // Get total count\n          _context13.next = 6;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.groupBy({\n            by: ['proid'],\n            // Group by 'proid' to ensure distinct\n            where: {\n              productcategorymapping: {\n                some: {\n                  isdeleted: false // Filter where `isdeleted` is false\n                }\n              }\n            }\n          });\n        case 6:\n          countQuery = _context13.sent;\n          totalCount = countQuery.length; // Main query for products\n          _context13.next = 10;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findMany({\n            where: {\n              isdeleted: false,\n              AND: [\n                // Add other dynamic filters here, e.g., whereClause parameters\n              ]\n            },\n            select: {\n              proid: true,\n              proname: true,\n              proconfig: true,\n              prodescription: true,\n              shortdescription: true,\n              protype: true,\n              proisactive: true,\n              prouom: true,\n              proisfa: true,\n              proorigin: true,\n              prodisplayinweb: true,\n              expiryfrom: true,\n              ispurchasable: true,\n              prowatermarkid: true,\n              uoid: true,\n              catid: true,\n              createdby: true,\n              createddate: true,\n              modifiedby: true,\n              modifieddate: true,\n              isdeleted: true,\n              deletedby: true,\n              // Including relations\n              unitofmeasure: {\n                select: {\n                  uomname: true\n                }\n              },\n              pvummapping: {\n                where: {\n                  isdeleted: false\n                },\n                select: {\n                  productimgid: true\n                }\n                // include: {\n                //   userimages: {\n                //     select: {\n                //       umurl: true,\n                //     },\n                //   },\n                // },\n              },\n              productcategorymapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  categories: {\n                    select: {\n                      catid: true,\n                      catname: true,\n                      catdesc: true,\n                      orderno: true,\n                      catfullpath: true,\n                      parentcatid: true,\n                      categorytype: true\n                    }\n                  }\n                }\n              }\n            },\n            orderBy: {\n              proid: 'asc'\n            }\n            // take: paramIndex,\n            // skip: paramIndex + 1,\n          });\n        case 10:\n          result = _context13.sent;\n          _context13.next = 13;\n          return Promise.all(result.map(/*#__PURE__*/function () {\n            var _ref12 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(product) {\n              var variantQuery;\n              return _regeneratorRuntime().wrap(function _callee10$(_context12) {\n                while (1) switch (_context12.prev = _context12.next) {\n                  case 0:\n                    _context12.next = 2;\n                    return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provariants.findMany({\n                      where: {\n                        proid: 338,\n                        // BigInt (make sure you're using the correct value here)\n                        isdeleted: false\n                      },\n                      include: {\n                        provariantlocations: {\n                          where: {\n                            isdeleted: false\n                          },\n                          select: {\n                            pvlid: true,\n                            warhouseid: true,\n                            safetylevel: true,\n                            reorderlevel: true,\n                            min_stock_uom: true,\n                            par_stock_uom: true,\n                            closingstock_on: true,\n                            openingstock: true,\n                            closingstock: true,\n                            autorenew: true,\n                            isapproved: true\n                            // unitofmeasure: {\n                            //     select: {\n                            //         uomname: true,\n                            //     },\n                            // },\n                            // unitOfMeasure2: {\n                            //     select: {\n                            //         uomname: true,\n                            //     },\n                            // },\n                          }\n                        },\n                        provarianttax: {\n                          where: {\n                            isdeleted: false\n                          },\n                          select: {\n                            protaxid: true,\n                            taxrate: true,\n                            hsncode: true,\n                            isexempt: true,\n                            effectivedate: true,\n                            isapproved: true\n                          }\n                        },\n                        // uom_mapping: {\n                        //     where: {\n                        //         uom_type: 1,\n                        //         isdeleted: false,\n                        //     },\n                        //     select: {\n                        //         uommid: true,\n                        //         proid: true,\n                        //         pvid: true,\n                        //         uomid: true,\n                        //         is_default: true,\n                        //         uom_type: true,\n                        //         isdeleted: true,\n                        //         modifiedby: true,\n                        //         modifieddate: true,\n                        //         createdby: true,\n                        //         uomname: true,\n                        //     },\n                        // },\n\n                        // uomMappingsConsumption: {\n                        //     where: {\n                        //         uom_type: 2,\n                        //         isdeleted: false,\n                        //     },\n                        //     take: 1, // Limit to 1 item as in SQL query\n                        //     select: {\n                        //         uommid: true,\n                        //         proid: true,\n                        //         pvid: true,\n                        //         uomid: true,\n                        //         is_default: true,\n                        //         uom_type: true,\n                        //         isdeleted: true,\n                        //         modifiedby: true,\n                        //         modifieddate: true,\n                        //         createdby: true,\n                        //         uomname: true,\n                        //     },\n                        // },\n\n                        pvamapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            attributes: {\n                              select: {\n                                attributename: true\n                              }\n                            },\n                            pvamvalues: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                attributevalues: {\n                                  select: {\n                                    avname: true,\n                                    avdisplayorder: true,\n                                    avicon: true,\n                                    avcolor: true\n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    });\n                  case 2:\n                    variantQuery = _context12.sent;\n                  case 3:\n                  case \"end\":\n                    return _context12.stop();\n                }\n              }, _callee10);\n            }));\n            return function (_x17) {\n              return _ref12.apply(this, arguments);\n            };\n          }()));\n        case 13:\n          productsWithVariants = _context13.sent;\n          _context13.next = 16;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findMany({\n            where: where,\n            include: {\n              productcategorymapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  categories: true\n                }\n              },\n              // provariants: {\n              //     where: { isdeleted: false },\n              //     include: {\n              //         provariantlocations: {\n              //             where: { isdeleted: false }\n              //         },\n              //         provarianttax: {\n              //             where: { isdeleted: false }\n              //         },\n              //         pvummapping: {\n              //             where: { isdeleted: false },\n              //             include: {\n              //                 userimages: true\n              //             }\n              //         }\n              //     }\n              // },\n              uom_mapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  unitofmeasure: true\n                }\n              },\n              pvamapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  attributes: true,\n                  pvamvalues: {\n                    where: {\n                      isdeleted: false\n                    },\n                    include: {\n                      attributevalues: true\n                    }\n                  }\n                }\n              }\n            },\n            take: limit,\n            skip: skip,\n            orderBy: {\n              proid: 'asc'\n            }\n          });\n        case 16:\n          products = _context13.sent;\n          // Format products for UI without extra nesting\n          formattedProducts = products.map(function (product) {\n            return formatProductForUI(product).data;\n          });\n          return _context13.abrupt(\"return\", {\n            products: formattedProducts,\n            totalCount: totalCount,\n            currentPage: parseInt(page),\n            totalPages: Math.ceil(totalCount / parseInt(limit))\n          });\n        case 21:\n          _context13.prev = 21;\n          _context13.t0 = _context13[\"catch\"](1);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in filterProducts:', _context13.t0);\n          throw _context13.t0;\n        case 25:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee11, null, [[1, 21]]);\n  }));\n  return function filterProducts(_x15, _x16) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\n// Variant-related functions\n// export const createVariant = async (productId, variantData, userData) => {\n//     try {\n//         return await prisma.provariants.create({\n//             data: {\n//                 product: {\n//                     connect: {proid: BigInt(productId)}\n//                 },\n//                 ...variantData,\n//                 createdby: userData.uid,\n//                 uoid: userData.uoid,\n//                 provariantlocations: variantData.location ? {\n//                     create: {\n//                         ...variantData.location,\n//                         createdby: userData.uid,\n//                         uoid: userData.uoid\n//                     }\n//                 } : undefined,\n//                 provarianttax: variantData.tax ? {\n//                     create: {\n//                         ...variantData.tax,\n//                         createdby: userData.uid\n//                     }\n//                 } : undefined\n//             },\n//             include: {\n//                 provariantlocations: true,\n//                 provarianttax: true\n//             }\n//         });\n//     } catch (error) {\n//         logger.error('Error in createVariant:', error);\n//         throw error;\n//     }\n// };\n\nvar createVariant = /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(productId, variantData, userData) {\n    var pvdefaultimgid, pvcurrencyid, location, tax, variantFields;\n    return _regeneratorRuntime().wrap(function _callee12$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.prev = 0;\n          // Remove these fields from variantData as they'll be handled differently\n          pvdefaultimgid = variantData.pvdefaultimgid, pvcurrencyid = variantData.pvcurrencyid, location = variantData.location, tax = variantData.tax, variantFields = _objectWithoutProperties(variantData, _excluded);\n          _context14.next = 4;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provariants.create({\n            data: _objectSpread(_objectSpread({\n              product: {\n                connect: {\n                  proid: BigInt(productId)\n                }\n              }\n            }, variantFields), {}, {\n              // Spread the basic variant fields\n              users_provariants_createdbyTousers: {\n                connect: {\n                  uid: BigInt(userData.uid)\n                }\n              },\n              userorganization: {\n                connect: {\n                  uoid: BigInt(userData.uoid)\n                }\n              },\n              isdeleted: false,\n              // Handle image relationship if provided\n              pvummapping: pvdefaultimgid ? {\n                create: {\n                  userimages: {\n                    connect: {\n                      umid: BigInt(pvdefaultimgid)\n                    }\n                  },\n                  createdby: BigInt(userData.uid),\n                  isdeleted: false,\n                  product: {\n                    connect: {\n                      proid: BigInt(productId)\n                    }\n                  }\n                }\n              } : undefined,\n              // Handle currency relationship if provided\n              currencies: pvcurrencyid ? {\n                connect: {\n                  currid: BigInt(pvcurrencyid)\n                }\n              } : undefined,\n              // Handle location creation if provided\n              provariantlocations: location ? {\n                create: {\n                  safetylevel: location.safetylevel,\n                  reorderlevel: location.reorderlevel,\n                  min_stock_uom: BigInt(location.min_stock_uom),\n                  par_stock_uom: BigInt(location.par_stock_uom),\n                  createdby: BigInt(userData.uid),\n                  uoid: BigInt(userData.uoid),\n                  isdeleted: false\n                }\n              } : undefined,\n              // Handle tax creation if provided\n              provarianttax: tax ? {\n                create: {\n                  taxrate: tax.taxrate,\n                  hsncode: tax.hsncode,\n                  createdby: BigInt(userData.uid),\n                  isdeleted: false\n                }\n              } : undefined\n            }),\n            include: {\n              provariantlocations: true,\n              provarianttax: true,\n              pvummapping: {\n                include: {\n                  userimages: true\n                }\n              }\n              // currencies: true\n            }\n          });\n        case 4:\n          return _context14.abrupt(\"return\", _context14.sent);\n        case 7:\n          _context14.prev = 7;\n          _context14.t0 = _context14[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in createVariant:', _context14.t0);\n          throw _context14.t0;\n        case 11:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee12, null, [[0, 7]]);\n  }));\n  return function createVariant(_x18, _x19, _x20) {\n    return _ref13.apply(this, arguments);\n  };\n}();\nvar getVariants = /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(productId) {\n    return _regeneratorRuntime().wrap(function _callee13$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.prev = 0;\n          _context15.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provariants.findMany({\n            where: {\n              proid: productId,\n              isdeleted: false\n            },\n            include: {\n              provariantlocations: true,\n              provarianttax: true\n            }\n          });\n        case 3:\n          return _context15.abrupt(\"return\", _context15.sent);\n        case 6:\n          _context15.prev = 6;\n          _context15.t0 = _context15[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getVariants:', _context15.t0);\n          throw _context15.t0;\n        case 10:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee13, null, [[0, 6]]);\n  }));\n  return function getVariants(_x21) {\n    return _ref14.apply(this, arguments);\n  };\n}();\nvar getVariantById = /*#__PURE__*/function () {\n  var _ref15 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(productId, variantId) {\n    return _regeneratorRuntime().wrap(function _callee14$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.prev = 0;\n          _context16.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].provariants.findFirst({\n            where: {\n              proid: productId,\n              pvid: variantId,\n              isdeleted: false\n            },\n            include: {\n              provariantlocations: true,\n              provarianttax: true\n            }\n          });\n        case 3:\n          return _context16.abrupt(\"return\", _context16.sent);\n        case 6:\n          _context16.prev = 6;\n          _context16.t0 = _context16[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getVariantById:', _context16.t0);\n          throw _context16.t0;\n        case 10:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee14, null, [[0, 6]]);\n  }));\n  return function getVariantById(_x22, _x23) {\n    return _ref15.apply(this, arguments);\n  };\n}();\nvar updateVariant = /*#__PURE__*/function () {\n  var _ref16 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(productId, variantId, variantData, userData) {\n    var provariantlocations, provarianttax, variantFields;\n    return _regeneratorRuntime().wrap(function _callee16$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          _context18.prev = 0;\n          provariantlocations = variantData.provariantlocations, provarianttax = variantData.provarianttax, variantFields = _objectWithoutProperties(variantData, _excluded2);\n          _context18.next = 4;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref17 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(prisma) {\n              var variant, _provarianttax$;\n              return _regeneratorRuntime().wrap(function _callee15$(_context17) {\n                while (1) switch (_context17.prev = _context17.next) {\n                  case 0:\n                    _context17.next = 2;\n                    return prisma.provariants.update({\n                      where: {\n                        pvid: BigInt(variantId),\n                        proid: BigInt(productId)\n                      },\n                      data: _objectSpread(_objectSpread({}, variantFields), {}, {\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date(),\n                        // Handle currency relationship if provided\n                        currencies: variantFields.pvcurrencyid ? {\n                          connect: {\n                            currid: BigInt(variantFields.pvcurrencyid)\n                          }\n                        } : undefined\n                      })\n                    });\n                  case 2:\n                    variant = _context17.sent;\n                    if (!(provariantlocations !== null && provariantlocations !== void 0 && provariantlocations[0])) {\n                      _context17.next = 6;\n                      break;\n                    }\n                    _context17.next = 6;\n                    return prisma.provariantlocations.update({\n                      where: {\n                        pvlid: BigInt(provariantlocations[0].pvlid)\n                      },\n                      data: {\n                        proid: BigInt(productId),\n                        pvid: BigInt(variantId),\n                        safetylevel: Number(provariantlocations[0].safetylevel),\n                        reorderlevel: Number(provariantlocations[0].reorderlevel),\n                        min_stock_uom: BigInt(provariantlocations[0].min_stock_uom),\n                        par_stock_uom: BigInt(provariantlocations[0].par_stock_uom),\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      }\n                    });\n                  case 6:\n                    if (!(provarianttax !== null && provarianttax !== void 0 && provarianttax[0])) {\n                      _context17.next = 9;\n                      break;\n                    }\n                    _context17.next = 9;\n                    return prisma.provarianttax.update({\n                      where: {\n                        protaxid: BigInt(provarianttax[0].protaxid)\n                      },\n                      data: {\n                        proid: BigInt(productId),\n                        pvid: BigInt(variantId),\n                        taxrate: Number(provarianttax[0].taxrate),\n                        hsncode: Number((_provarianttax$ = provarianttax[0]) === null || _provarianttax$ === void 0 ? void 0 : _provarianttax$.hsncode),\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      }\n                    });\n                  case 9:\n                    _context17.next = 11;\n                    return prisma.provariants.findFirst({\n                      where: {\n                        pvid: BigInt(variantId),\n                        proid: BigInt(productId)\n                      },\n                      include: {\n                        provariantlocations: true,\n                        provarianttax: true,\n                        currencies: true\n                      }\n                    });\n                  case 11:\n                    return _context17.abrupt(\"return\", _context17.sent);\n                  case 12:\n                  case \"end\":\n                    return _context17.stop();\n                }\n              }, _callee15);\n            }));\n            return function (_x28) {\n              return _ref17.apply(this, arguments);\n            };\n          }());\n        case 4:\n          return _context18.abrupt(\"return\", _context18.sent);\n        case 7:\n          _context18.prev = 7;\n          _context18.t0 = _context18[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in updateVariant:', _context18.t0);\n          throw _context18.t0;\n        case 11:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee16, null, [[0, 7]]);\n  }));\n  return function updateVariant(_x24, _x25, _x26, _x27) {\n    return _ref16.apply(this, arguments);\n  };\n}();\nvar deleteVariant = /*#__PURE__*/function () {\n  var _ref18 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(productId, variantId, uid) {\n    return _regeneratorRuntime().wrap(function _callee18$(_context20) {\n      while (1) switch (_context20.prev = _context20.next) {\n        case 0:\n          _context20.prev = 0;\n          _context20.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref19 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(prisma) {\n              return _regeneratorRuntime().wrap(function _callee17$(_context19) {\n                while (1) switch (_context19.prev = _context19.next) {\n                  case 0:\n                    _context19.next = 2;\n                    return Promise.all([prisma.provariants.update({\n                      where: {\n                        pvid: variantId,\n                        proid: productId\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    }), prisma.provariantlocations.updateMany({\n                      where: {\n                        pvid: variantId\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    }), prisma.provarianttax.updateMany({\n                      where: {\n                        pvid: variantId\n                      },\n                      data: {\n                        isdeleted: true,\n                        deletedby: uid,\n                        deleteddate: new Date()\n                      }\n                    })]);\n                  case 2:\n                    return _context19.abrupt(\"return\", true);\n                  case 3:\n                  case \"end\":\n                    return _context19.stop();\n                }\n              }, _callee17);\n            }));\n            return function (_x32) {\n              return _ref19.apply(this, arguments);\n            };\n          }());\n        case 3:\n          return _context20.abrupt(\"return\", _context20.sent);\n        case 6:\n          _context20.prev = 6;\n          _context20.t0 = _context20[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in deleteVariant:', _context20.t0);\n          throw _context20.t0;\n        case 10:\n        case \"end\":\n          return _context20.stop();\n      }\n    }, _callee18, null, [[0, 6]]);\n  }));\n  return function deleteVariant(_x29, _x30, _x31) {\n    return _ref18.apply(this, arguments);\n  };\n}();\nvar formatProductForUI = function formatProductForUI(product) {\n  var _product$prouom, _product$uom_mapping, _product$provariants, _product$provariants2, _product$productcateg, _product$provariants3, _product$provariants$, _product$provariants$2, _product$provariants4, _product$uom_mapping2, _product$uom_mapping3, _product$provariants5, _product$uom_mapping4, _product$uom_mapping5, _product$uom_mapping$, _product$uom_mapping$2, _product$uom_mapping$3, _product$uom_mapping$4, _product$pvamapping;\n  if (!product) return null;\n  return {\n    success: true,\n    data: {\n      proid: product.proid.toString(),\n      proname: product.proname,\n      prodescription: product.prodescription,\n      proconfig: product.proconfig,\n      hasvarient: product.hasvarient,\n      catid: product.catid,\n      prouom: (_product$prouom = product.prouom) === null || _product$prouom === void 0 ? void 0 : _product$prouom.toString(),\n      prouom_name: (_product$uom_mapping = product.uom_mapping) === null || _product$uom_mapping === void 0 || (_product$uom_mapping = _product$uom_mapping.find(function (u) {\n        return u.uomid === product.prouom;\n      })) === null || _product$uom_mapping === void 0 || (_product$uom_mapping = _product$uom_mapping.unitofmeasure) === null || _product$uom_mapping === void 0 ? void 0 : _product$uom_mapping.uomname,\n      productimgid: (_product$provariants = product.provariants) === null || _product$provariants === void 0 || (_product$provariants = _product$provariants[0]) === null || _product$provariants === void 0 || (_product$provariants = _product$provariants.pvummapping) === null || _product$provariants === void 0 || (_product$provariants = _product$provariants[0]) === null || _product$provariants === void 0 || (_product$provariants = _product$provariants.productimgid) === null || _product$provariants === void 0 ? void 0 : _product$provariants.toString(),\n      product_image_url: (_product$provariants2 = product.provariants) === null || _product$provariants2 === void 0 || (_product$provariants2 = _product$provariants2[0]) === null || _product$provariants2 === void 0 || (_product$provariants2 = _product$provariants2.pvummapping) === null || _product$provariants2 === void 0 || (_product$provariants2 = _product$provariants2[0]) === null || _product$provariants2 === void 0 || (_product$provariants2 = _product$provariants2.userimages) === null || _product$provariants2 === void 0 ? void 0 : _product$provariants2.umurl,\n      categories: (_product$productcateg = product.productcategorymapping) === null || _product$productcateg === void 0 ? void 0 : _product$productcateg.map(function (pcm) {\n        return {\n          catid: pcm.categories.catid,\n          catdesc: pcm.categories.catdesc,\n          catname: pcm.categories.catname,\n          orderno: pcm.categories.orderno,\n          catfullpath: pcm.categories.catfullpath,\n          parentcatid: pcm.categories.parentcatid,\n          categorytype: pcm.categories.categorytype\n        };\n      }),\n      variant: (_product$provariants3 = product.provariants) !== null && _product$provariants3 !== void 0 && _product$provariants3[0] ? {\n        pvid: product.provariants[0].pvid.toString(),\n        pvbarcode: product.provariants[0].pvbarcode,\n        pvpurchaseprice: product.provariants[0].pvpurchaseprice.toString(),\n        pvsalesprice: product.provariants[0].pvsalesprice.toString(),\n        reconciliation_price: (_product$provariants$ = product.provariants[0].reconciliation_price) === null || _product$provariants$ === void 0 ? void 0 : _product$provariants$.toString(),\n        normal_loss: (_product$provariants$2 = product.provariants[0].normal_loss) === null || _product$provariants$2 === void 0 ? void 0 : _product$provariants$2.toString()\n      } : null,\n      location: (_product$provariants4 = product.provariants) !== null && _product$provariants4 !== void 0 && (_product$provariants4 = _product$provariants4[0]) !== null && _product$provariants4 !== void 0 && (_product$provariants4 = _product$provariants4.provariantlocations) !== null && _product$provariants4 !== void 0 && _product$provariants4[0] ? {\n        safetylevel: product.provariants[0].provariantlocations[0].safetylevel.toString(),\n        reorderlevel: product.provariants[0].provariantlocations[0].reorderlevel.toString(),\n        min_stock_uom: product.provariants[0].provariantlocations[0].min_stock_uom.toString(),\n        min_stock_uom_name: (_product$uom_mapping2 = product.uom_mapping) === null || _product$uom_mapping2 === void 0 || (_product$uom_mapping2 = _product$uom_mapping2.find(function (u) {\n          return u.uomid === product.provariants[0].provariantlocations[0].min_stock_uom;\n        })) === null || _product$uom_mapping2 === void 0 || (_product$uom_mapping2 = _product$uom_mapping2.unitofmeasure) === null || _product$uom_mapping2 === void 0 ? void 0 : _product$uom_mapping2.uomname,\n        par_stock_uom: product.provariants[0].provariantlocations[0].par_stock_uom.toString(),\n        par_stock_uom_name: (_product$uom_mapping3 = product.uom_mapping) === null || _product$uom_mapping3 === void 0 || (_product$uom_mapping3 = _product$uom_mapping3.find(function (u) {\n          return u.uomid === product.provariants[0].provariantlocations[0].par_stock_uom;\n        })) === null || _product$uom_mapping3 === void 0 || (_product$uom_mapping3 = _product$uom_mapping3.unitofmeasure) === null || _product$uom_mapping3 === void 0 ? void 0 : _product$uom_mapping3.uomname,\n        closingstock_on: product.provariants[0].provariantlocations[0].closingstock_on\n      } : null,\n      tax: (_product$provariants5 = product.provariants) !== null && _product$provariants5 !== void 0 && (_product$provariants5 = _product$provariants5[0]) !== null && _product$provariants5 !== void 0 && (_product$provariants5 = _product$provariants5.provarianttax) !== null && _product$provariants5 !== void 0 && _product$provariants5[0] ? {\n        taxrate: product.provariants[0].provarianttax[0].taxrate.toString(),\n        hsncode: product.provariants[0].provarianttax[0].hsncode\n      } : null,\n      purchaseUoms: ((_product$uom_mapping4 = product.uom_mapping) === null || _product$uom_mapping4 === void 0 || (_product$uom_mapping4 = _product$uom_mapping4.filter(function (uom) {\n        return uom.uom_type.toString() === '18';\n      })) === null || _product$uom_mapping4 === void 0 ? void 0 : _product$uom_mapping4.map(function (uom) {\n        var _uom$pvid, _uom$modifiedby, _uom$createdby, _uom$unitofmeasure;\n        return {\n          uommid: uom.uommid.toString(),\n          proid: uom.proid.toString(),\n          pvid: (_uom$pvid = uom.pvid) === null || _uom$pvid === void 0 ? void 0 : _uom$pvid.toString(),\n          uomid: uom.uomid.toString(),\n          is_default: uom.is_default,\n          uom_type: uom.uom_type.toString(),\n          isdeleted: uom.isdeleted,\n          modifiedby: (_uom$modifiedby = uom.modifiedby) === null || _uom$modifiedby === void 0 ? void 0 : _uom$modifiedby.toString(),\n          modifieddate: uom.modifieddate,\n          createdby: (_uom$createdby = uom.createdby) === null || _uom$createdby === void 0 ? void 0 : _uom$createdby.toString(),\n          uomname: (_uom$unitofmeasure = uom.unitofmeasure) === null || _uom$unitofmeasure === void 0 ? void 0 : _uom$unitofmeasure.uomname\n        };\n      })) || [],\n      consumptionUom: (_product$uom_mapping5 = product.uom_mapping) !== null && _product$uom_mapping5 !== void 0 && _product$uom_mapping5.find(function (uom) {\n        return uom.uom_type.toString() === '19';\n      }) ? {\n        uommid: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).uommid.toString(),\n        proid: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).proid.toString(),\n        pvid: (_product$uom_mapping$ = product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).pvid) === null || _product$uom_mapping$ === void 0 ? void 0 : _product$uom_mapping$.toString(),\n        uomid: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).uomid.toString(),\n        is_default: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).is_default,\n        uom_type: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).uom_type.toString(),\n        isdeleted: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).isdeleted,\n        modifiedby: (_product$uom_mapping$2 = product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).modifiedby) === null || _product$uom_mapping$2 === void 0 ? void 0 : _product$uom_mapping$2.toString(),\n        modifieddate: product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).modifieddate,\n        createdby: (_product$uom_mapping$3 = product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).createdby) === null || _product$uom_mapping$3 === void 0 ? void 0 : _product$uom_mapping$3.toString(),\n        uomname: (_product$uom_mapping$4 = product.uom_mapping.find(function (uom) {\n          return uom.uom_type.toString() === '19';\n        }).unitofmeasure) === null || _product$uom_mapping$4 === void 0 ? void 0 : _product$uom_mapping$4.uomname\n      } : null,\n      pvamappings: ((_product$pvamapping = product.pvamapping) === null || _product$pvamapping === void 0 ? void 0 : _product$pvamapping.map(function (mapping) {\n        var _mapping$attributes, _mapping$pvamvalues;\n        return {\n          pvamid: mapping.pvamid.toString(),\n          attributeid: mapping.attributeid.toString(),\n          attributename: (_mapping$attributes = mapping.attributes) === null || _mapping$attributes === void 0 ? void 0 : _mapping$attributes.attributename,\n          attrtextprompt: mapping.attrtextprompt,\n          isrequired: mapping.isrequired,\n          controltype: mapping.controltype,\n          displayorder: mapping.displayorder,\n          pvamvaluemodels: (_mapping$pvamvalues = mapping.pvamvalues) === null || _mapping$pvamvalues === void 0 ? void 0 : _mapping$pvamvalues.map(function (value) {\n            var _value$attributevalue, _value$attributevalue2, _value$umid;\n            return {\n              pvamvid: value.pvamvid.toString(),\n              avid: (_value$attributevalue = value.attributevalues) === null || _value$attributevalue === void 0 ? void 0 : _value$attributevalue.avid.toString(),\n              avname: (_value$attributevalue2 = value.attributevalues) === null || _value$attributevalue2 === void 0 ? void 0 : _value$attributevalue2.avname,\n              pvamvcolor: value.pvamvcolor,\n              umid: (_value$umid = value.umid) === null || _value$umid === void 0 ? void 0 : _value$umid.toString(),\n              displayorder: value.displayorder\n            };\n          })\n        };\n      })) || []\n    }\n  };\n};\nvar getUomsByCatService = /*#__PURE__*/function () {\n  var _ref20 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(catId) {\n    var getUomsByCatData;\n    return _regeneratorRuntime().wrap(function _callee19$(_context21) {\n      while (1) switch (_context21.prev = _context21.next) {\n        case 0:\n          _context21.prev = 0;\n          getUomsByCatData = (0,_repositories_uomRepository_js__WEBPACK_IMPORTED_MODULE_1__.getUomByCatId)(catId);\n          return _context21.abrupt(\"return\", getUomsByCatData);\n        case 5:\n          _context21.prev = 5;\n          _context21.t0 = _context21[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error in getProductById:', _context21.t0);\n          throw _context21.t0;\n        case 9:\n        case \"end\":\n          return _context21.stop();\n      }\n    }, _callee19, null, [[0, 5]]);\n  }));\n  return function getUomsByCatService(_x33) {\n    return _ref20.apply(this, arguments);\n  };\n}();\nvar manageProductService = /*#__PURE__*/function () {\n  var _ref21 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(req) {\n    var productData, productDetails, variant, proVarData, variantData, variantLocationsData, varLocationsData, provarTaxData, varTaxData, purchaseUomsData, pumData, puomDetails, productimgidData, _iterator3, _step3, _loop3, _createdProduct, proVariantData, createdProduct;\n    return _regeneratorRuntime().wrap(function _callee27$(_context31) {\n      while (1) switch (_context31.prev = _context31.next) {\n        case 0:\n          _context31.prev = 0;\n          productData = {\n            proname: req.body.proname,\n            prodescription: req.body.prodescription,\n            proconfig: req.body.proconfig,\n            prouom: req.body.prouom,\n            hasvarient: req.body.hasvarient,\n            createdby: req.user.uid,\n            uoid: req.user.uoid,\n            isdeleted: false,\n            // Nested category mappings\n            productcategorymapping: req.body.catids.length > 0 ? {\n              create: req.body.catids.map(function (catid) {\n                return {\n                  catid: BigInt(catid),\n                  createdby: req.user.uid,\n                  isdeleted: false\n                };\n              })\n            } : undefined,\n            // Nested UOM mappings\n            uom_mapping: {\n              create: [].concat(_toConsumableArray((req.body.purchaseUoms || []).map(function (uom) {\n                return {\n                  uomid: BigInt(uom.uomid),\n                  is_default: uom.is_default || false,\n                  uom_type: BigInt(18),\n                  // Purchase UOM type\n                  createdby: BigInt(userData.uid),\n                  isdeleted: false\n                };\n              })), _toConsumableArray(req.body.consumptionUom ? [{\n                uomid: BigInt(req.body.consumptionUom.uomid),\n                is_default: true,\n                uom_type: BigInt(19),\n                // Consumption UOM type\n                createdby: BigInt(userData.uid),\n                isdeleted: false\n              }] : []))\n            }\n          };\n          _context31.next = 4;\n          return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageProducts)(productData);\n        case 4:\n          productDetails = _context31.sent;\n          if (!(req.body.hasvarient == false)) {\n            _context31.next = 53;\n            break;\n          }\n          variant = req.body.variant; // 2. Create variant if provided\n          proVarData = {\n            proid: productDetails.proid,\n            pvname: productDetails.proname,\n            pvbarcode: variant.pvbarcode || null,\n            pvpurchaseprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.pvpurchaseprice || 0),\n            pvsalesprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.pvsalesprice || 0),\n            reconciliation_price: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.reconciliation_price || 0),\n            normal_loss: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.normal_loss || 0),\n            createdby: req.user.uid,\n            uoid: req.user.uoid,\n            isdeleted: false\n          };\n          _context31.next = 10;\n          return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageProvariants)(proVarData);\n        case 10:\n          variantData = _context31.sent;\n          // 3. Create variant location if provided\n          variantLocationsData = {\n            proid: productDetails.proid,\n            pvid: variantData.pvid,\n            safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.location.safetylevel || 0),\n            reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.location.reorderlevel || 0),\n            min_stock_uom: BigInt(variant.location.min_stock_uom),\n            par_stock_uom: BigInt(variant.location.par_stock_uom),\n            closingstock_on: variant.location.closingstock_on,\n            createdby: req.user.uid,\n            uoid: req.user.uoid,\n            isdeleted: false\n          };\n          _context31.next = 14;\n          return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageVariantLocations)(variantLocationsData);\n        case 14:\n          varLocationsData = _context31.sent;\n          // 4. Create variant tax if provided\n          provarTaxData = {\n            proid: productDetails.proid,\n            pvid: variantData.pvid,\n            taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.tax.taxrate || 0),\n            hsncode: variant.tax.hsncode,\n            createdby: req.user.uid,\n            isdeleted: false\n          };\n          _context31.next = 18;\n          return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageVariantTax)(provarTaxData);\n        case 18:\n          varTaxData = _context31.sent;\n          if (!variant.purchaseUoms) {\n            _context31.next = 23;\n            break;\n          }\n          _context31.next = 22;\n          return Promise.all(variant.purchaseUoms.map(/*#__PURE__*/function () {\n            var _ref22 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(puom) {\n              var pumData, puomDetails;\n              return _regeneratorRuntime().wrap(function _callee20$(_context22) {\n                while (1) switch (_context22.prev = _context22.next) {\n                  case 0:\n                    pumData = {\n                      proid: productDetails.proid,\n                      pvid: variantData.pvid,\n                      uomid: puom.uomid,\n                      is_default: puom.is_default,\n                      uom_type: 21\n                    };\n                    _context22.next = 3;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageUomMapping)(pumData);\n                  case 3:\n                    puomDetails = _context22.sent;\n                  case 4:\n                  case \"end\":\n                    return _context22.stop();\n                }\n              }, _callee20);\n            }));\n            return function (_x35) {\n              return _ref22.apply(this, arguments);\n            };\n          }()));\n        case 22:\n          purchaseUomsData = _context31.sent;\n        case 23:\n          if (!variant.consumptionUom) {\n            _context31.next = 28;\n            break;\n          }\n          pumData = {\n            proid: productDetails.proid,\n            pvid: variantData.pvid,\n            uomid: variant.consumptionUom.uomid,\n            is_default: variant.consumptionUom.is_default,\n            uom_type: 22\n          };\n          _context31.next = 27;\n          return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageUomMapping)(pumData);\n        case 27:\n          puomDetails = _context31.sent;\n        case 28:\n          if (!variant.productimgid) {\n            _context31.next = 32;\n            break;\n          }\n          _context31.next = 31;\n          return Promise.all(variant.productimgid.map(/*#__PURE__*/function () {\n            var _ref23 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(proimg) {\n              var proimgData, proImgIdData;\n              return _regeneratorRuntime().wrap(function _callee21$(_context23) {\n                while (1) switch (_context23.prev = _context23.next) {\n                  case 0:\n                    proimgData = {\n                      proid: productDetails.proid,\n                      pvid: variantData.pvid,\n                      productimgid: BigInt(variant.productimgid),\n                      createdby: req.user.uid,\n                      isdeleted: false\n                    };\n                    _context23.next = 3;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageProImgid)(productimgidData);\n                  case 3:\n                    proImgIdData = _context23.sent;\n                  case 4:\n                  case \"end\":\n                    return _context23.stop();\n                }\n              }, _callee21);\n            }));\n            return function (_x36) {\n              return _ref23.apply(this, arguments);\n            };\n          }()));\n        case 31:\n          productimgidData = _context31.sent;\n        case 32:\n          if (!variant.pvamappings) {\n            _context31.next = 49;\n            break;\n          }\n          _iterator3 = _createForOfIteratorHelper(variant.pvamappings);\n          _context31.prev = 34;\n          _loop3 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop3() {\n            var mapping, pvamappingData, pvamappingDetails;\n            return _regeneratorRuntime().wrap(function _loop3$(_context25) {\n              while (1) switch (_context25.prev = _context25.next) {\n                case 0:\n                  mapping = _step3.value;\n                  pvamappingData = {\n                    proid: productDetails.proid,\n                    pvid: variantData.pvid,\n                    attributeid: BigInt(mapping.attributeid),\n                    attrtextprompt: mapping.attrtextprompt,\n                    isrequired: mapping.isrequired,\n                    controltype: mapping.controltype,\n                    displayorder: mapping.displayorder,\n                    createdby: req.user.uid,\n                    isdeleted: false\n                  };\n                  _context25.next = 4;\n                  return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.managePvaMappings)(pvamappingData);\n                case 4:\n                  pvamappingDetails = _context25.sent;\n                  if (!mapping.pvamvaluemodels) {\n                    _context25.next = 8;\n                    break;\n                  }\n                  _context25.next = 8;\n                  return Promise.all(mapping.pvamvaluemodels.map(/*#__PURE__*/function () {\n                    var _ref24 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(value) {\n                      var pvaValueData, pvaValesDetails;\n                      return _regeneratorRuntime().wrap(function _callee22$(_context24) {\n                        while (1) switch (_context24.prev = _context24.next) {\n                          case 0:\n                            pvaValueData = {\n                              pvamid: pvamappingDetails.pvamid,\n                              avid: value.avid,\n                              pvamvcolor: value.pvamvcolor,\n                              // umid: BigInt(value.umid),    \n                              displayorder: value.displayorder,\n                              createdby: req.user.uid,\n                              isdeleted: false\n                            };\n                            _context24.next = 3;\n                            return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.managePvaValues)(pvaValueData);\n                          case 3:\n                            pvaValesDetails = _context24.sent;\n                          case 4:\n                          case \"end\":\n                            return _context24.stop();\n                        }\n                      }, _callee22);\n                    }));\n                    return function (_x37) {\n                      return _ref24.apply(this, arguments);\n                    };\n                  }()));\n                case 8:\n                case \"end\":\n                  return _context25.stop();\n              }\n            }, _loop3);\n          });\n          _iterator3.s();\n        case 37:\n          if ((_step3 = _iterator3.n()).done) {\n            _context31.next = 41;\n            break;\n          }\n          return _context31.delegateYield(_loop3(), \"t0\", 39);\n        case 39:\n          _context31.next = 37;\n          break;\n        case 41:\n          _context31.next = 46;\n          break;\n        case 43:\n          _context31.prev = 43;\n          _context31.t1 = _context31[\"catch\"](34);\n          _iterator3.e(_context31.t1);\n        case 46:\n          _context31.prev = 46;\n          _iterator3.f();\n          return _context31.finish(46);\n        case 49:\n          _context31.next = 51;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n            where: {\n              proid: productDetails.proid\n            },\n            include: {\n              productcategorymapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  categories: true\n                }\n              },\n              provariants: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  provariantlocations: true,\n                  provarianttax: true,\n                  pvummapping: {\n                    where: {\n                      isdeleted: false\n                    },\n                    include: {\n                      userimages: true\n                    }\n                  }\n                }\n              },\n              pvamapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  attributes: true,\n                  pvamvalues: {\n                    where: {\n                      isdeleted: false\n                    },\n                    include: {\n                      attributevalues: true\n                    }\n                  }\n                }\n              },\n              uom_mapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  unitofmeasure: true,\n                  mastervalues: true\n                }\n              }\n            }\n          });\n        case 51:\n          _createdProduct = _context31.sent;\n          return _context31.abrupt(\"return\", formatProductForUI(_createdProduct));\n        case 53:\n          _context31.next = 55;\n          return Promise.all(req.body.variants.map(/*#__PURE__*/function () {\n            var _ref25 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(variant) {\n              var proVarData, variantData, variantLocationsData, varLocationsData, provarTaxData, varTaxData, _purchaseUomsData, _pumData, _puomDetails, _productimgidData, _iterator4, _step4, _loop4;\n              return _regeneratorRuntime().wrap(function _callee26$(_context30) {\n                while (1) switch (_context30.prev = _context30.next) {\n                  case 0:\n                    // 2. Create variant if provided\n                    proVarData = {\n                      proid: productDetails.proid,\n                      pvname: productDetails.proname,\n                      pvbarcode: variant.pvbarcode || null,\n                      pvpurchaseprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.pvpurchaseprice || 0),\n                      pvsalesprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.pvsalesprice || 0),\n                      reconciliation_price: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.reconciliation_price || 0),\n                      normal_loss: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.normal_loss || 0),\n                      createdby: req.user.uid,\n                      uoid: req.user.uoid,\n                      isdeleted: false\n                    };\n                    _context30.next = 3;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageProvariants)(proVarData);\n                  case 3:\n                    variantData = _context30.sent;\n                    // 3. Create variant location if provided\n                    variantLocationsData = {\n                      proid: productDetails.proid,\n                      pvid: variantData.pvid,\n                      safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.location.safetylevel || 0),\n                      reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.location.reorderlevel || 0),\n                      min_stock_uom: BigInt(variant.location.min_stock_uom),\n                      par_stock_uom: BigInt(variant.location.par_stock_uom),\n                      closingstock_on: variant.location.closingstock_on,\n                      createdby: req.user.uid,\n                      uoid: req.user.uoid,\n                      isdeleted: false\n                    };\n                    _context30.next = 7;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageVariantLocations)(variantLocationsData);\n                  case 7:\n                    varLocationsData = _context30.sent;\n                    // 4. Create variant tax if provided\n                    provarTaxData = {\n                      proid: productDetails.proid,\n                      pvid: variantData.pvid,\n                      taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(variant.tax.taxrate || 0),\n                      hsncode: variant.tax.hsncode,\n                      createdby: req.user.uid,\n                      isdeleted: false\n                    };\n                    _context30.next = 11;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageVariantTax)(provarTaxData);\n                  case 11:\n                    varTaxData = _context30.sent;\n                    if (!variant.purchaseUoms) {\n                      _context30.next = 16;\n                      break;\n                    }\n                    _context30.next = 15;\n                    return Promise.all(variant.purchaseUoms.map(/*#__PURE__*/function () {\n                      var _ref26 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(puom) {\n                        var pumData, puomDetails;\n                        return _regeneratorRuntime().wrap(function _callee23$(_context26) {\n                          while (1) switch (_context26.prev = _context26.next) {\n                            case 0:\n                              pumData = {\n                                proid: productDetails.proid,\n                                pvid: variantData.pvid,\n                                uomid: puom.uomid,\n                                is_default: puom.is_default,\n                                uom_type: 18\n                              };\n                              _context26.next = 3;\n                              return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageUomMapping)(pumData);\n                            case 3:\n                              puomDetails = _context26.sent;\n                            case 4:\n                            case \"end\":\n                              return _context26.stop();\n                          }\n                        }, _callee23);\n                      }));\n                      return function (_x39) {\n                        return _ref26.apply(this, arguments);\n                      };\n                    }()));\n                  case 15:\n                    _purchaseUomsData = _context30.sent;\n                  case 16:\n                    if (!variant.consumptionUom) {\n                      _context30.next = 21;\n                      break;\n                    }\n                    _pumData = {\n                      proid: productDetails.proid,\n                      pvid: variantData.pvid,\n                      uomid: variant.consumptionUom.uomid,\n                      is_default: variant.consumptionUom.is_default,\n                      uom_type: 19\n                    };\n                    _context30.next = 20;\n                    return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageUomMapping)(_pumData);\n                  case 20:\n                    _puomDetails = _context30.sent;\n                  case 21:\n                    if (!variant.productimgid) {\n                      _context30.next = 25;\n                      break;\n                    }\n                    _context30.next = 24;\n                    return Promise.all(variant.productimgid.map(/*#__PURE__*/function () {\n                      var _ref27 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(proimg) {\n                        var proimgData, proImgIdData;\n                        return _regeneratorRuntime().wrap(function _callee24$(_context27) {\n                          while (1) switch (_context27.prev = _context27.next) {\n                            case 0:\n                              proimgData = {\n                                proid: productDetails.proid,\n                                pvid: variantData.pvid,\n                                productimgid: BigInt(variant.productimgid),\n                                createdby: req.user.uid,\n                                isdeleted: false\n                              };\n                              _context27.next = 3;\n                              return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.manageProImgid)(_productimgidData);\n                            case 3:\n                              proImgIdData = _context27.sent;\n                            case 4:\n                            case \"end\":\n                              return _context27.stop();\n                          }\n                        }, _callee24);\n                      }));\n                      return function (_x40) {\n                        return _ref27.apply(this, arguments);\n                      };\n                    }()));\n                  case 24:\n                    _productimgidData = _context30.sent;\n                  case 25:\n                    if (!variant.pvamappings) {\n                      _context30.next = 42;\n                      break;\n                    }\n                    _iterator4 = _createForOfIteratorHelper(variant.pvamappings);\n                    _context30.prev = 27;\n                    _loop4 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop4() {\n                      var mapping, pvamappingData, pvamappingDetails;\n                      return _regeneratorRuntime().wrap(function _loop4$(_context29) {\n                        while (1) switch (_context29.prev = _context29.next) {\n                          case 0:\n                            mapping = _step4.value;\n                            pvamappingData = {\n                              proid: productDetails.proid,\n                              pvid: variantData.pvid,\n                              attributeid: BigInt(mapping.attributeid),\n                              attrtextprompt: mapping.attrtextprompt,\n                              isrequired: mapping.isrequired,\n                              controltype: mapping.controltype,\n                              displayorder: mapping.displayorder,\n                              createdby: req.user.uid,\n                              isdeleted: false\n                            };\n                            _context29.next = 4;\n                            return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.managePvaMappings)(pvamappingData);\n                          case 4:\n                            pvamappingDetails = _context29.sent;\n                            if (!mapping.pvamvaluemodels) {\n                              _context29.next = 8;\n                              break;\n                            }\n                            _context29.next = 8;\n                            return Promise.all(mapping.pvamvaluemodels.map(/*#__PURE__*/function () {\n                              var _ref28 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(value) {\n                                var pvaValueData, pvaValesDetails;\n                                return _regeneratorRuntime().wrap(function _callee25$(_context28) {\n                                  while (1) switch (_context28.prev = _context28.next) {\n                                    case 0:\n                                      pvaValueData = {\n                                        pvamid: pvamappingDetails.pvamid,\n                                        avid: value.avid,\n                                        pvamvcolor: value.pvamvcolor,\n                                        // umid: BigInt(value.umid),    \n                                        displayorder: value.displayorder,\n                                        createdby: req.user.uid,\n                                        isdeleted: false\n                                      };\n                                      _context28.next = 3;\n                                      return (0,_repositories_productRepository_js__WEBPACK_IMPORTED_MODULE_5__.managePvaValues)(pvaValueData);\n                                    case 3:\n                                      pvaValesDetails = _context28.sent;\n                                    case 4:\n                                    case \"end\":\n                                      return _context28.stop();\n                                  }\n                                }, _callee25);\n                              }));\n                              return function (_x41) {\n                                return _ref28.apply(this, arguments);\n                              };\n                            }()));\n                          case 8:\n                          case \"end\":\n                            return _context29.stop();\n                        }\n                      }, _loop4);\n                    });\n                    _iterator4.s();\n                  case 30:\n                    if ((_step4 = _iterator4.n()).done) {\n                      _context30.next = 34;\n                      break;\n                    }\n                    return _context30.delegateYield(_loop4(), \"t0\", 32);\n                  case 32:\n                    _context30.next = 30;\n                    break;\n                  case 34:\n                    _context30.next = 39;\n                    break;\n                  case 36:\n                    _context30.prev = 36;\n                    _context30.t1 = _context30[\"catch\"](27);\n                    _iterator4.e(_context30.t1);\n                  case 39:\n                    _context30.prev = 39;\n                    _iterator4.f();\n                    return _context30.finish(39);\n                  case 42:\n                  case \"end\":\n                    return _context30.stop();\n                }\n              }, _callee26, null, [[27, 36, 39, 42]]);\n            }));\n            return function (_x38) {\n              return _ref25.apply(this, arguments);\n            };\n          }()));\n        case 55:\n          proVariantData = _context31.sent;\n          _context31.next = 58;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].product.findUnique({\n            where: {\n              proid: productDetails.proid\n            },\n            include: {\n              productcategorymapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  categories: true\n                }\n              },\n              provariants: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  provariantlocations: true,\n                  provarianttax: true,\n                  pvummapping: {\n                    where: {\n                      isdeleted: false\n                    },\n                    include: {\n                      userimages: true\n                    }\n                  }\n                }\n              },\n              pvamapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  attributes: true,\n                  pvamvalues: {\n                    where: {\n                      isdeleted: false\n                    },\n                    include: {\n                      attributevalues: true\n                    }\n                  }\n                }\n              },\n              uom_mapping: {\n                where: {\n                  isdeleted: false\n                },\n                include: {\n                  unitofmeasure: true,\n                  mastervalues: true\n                }\n              }\n            }\n          });\n        case 58:\n          createdProduct = _context31.sent;\n          return _context31.abrupt(\"return\", formatProductForUI(createdProduct));\n        case 62:\n          _context31.prev = 62;\n          _context31.t2 = _context31[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error creating product:', _context31.t2);\n          throw _context31.t2;\n        case 66:\n        case \"end\":\n          return _context31.stop();\n      }\n    }, _callee27, null, [[0, 62], [34, 43, 46, 49]]);\n  }));\n  return function manageProductService(_x34) {\n    return _ref21.apply(this, arguments);\n  };\n}();\nvar updateProduct2 = /*#__PURE__*/function () {\n  var _ref29 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(proid, productData, userData) {\n    return _regeneratorRuntime().wrap(function _callee29$(_context34) {\n      while (1) switch (_context34.prev = _context34.next) {\n        case 0:\n          _context34.prev = 0;\n          _context34.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$transaction(/*#__PURE__*/function () {\n            var _ref30 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(prisma) {\n              var _productData$variant5, variantData, variant, existingMappings, _iterator5, _step5, _loop5, updatedProduct;\n              return _regeneratorRuntime().wrap(function _callee28$(_context33) {\n                while (1) switch (_context33.prev = _context33.next) {\n                  case 0:\n                    _context33.next = 2;\n                    return prisma.product.update({\n                      where: {\n                        proid: proid\n                      },\n                      data: {\n                        proname: productData.proname,\n                        prodescription: productData.prodescription,\n                        proconfig: productData.proconfig,\n                        prouom: productData.prouom,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      }\n                    });\n                  case 2:\n                    if (!(productData.categories && productData.categories.length > 0)) {\n                      _context33.next = 7;\n                      break;\n                    }\n                    _context33.next = 5;\n                    return prisma.productcategorymapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 5:\n                    _context33.next = 7;\n                    return prisma.productcategorymapping.createMany({\n                      data: productData.categories.map(function (cat) {\n                        return {\n                          proid: proid,\n                          catid: BigInt(cat.catid),\n                          createdby: BigInt(userData.uid),\n                          isdeleted: false\n                        };\n                      })\n                    });\n                  case 7:\n                    if (!(productData.purchaseUoms || productData.consumptionUom)) {\n                      _context33.next = 12;\n                      break;\n                    }\n                    _context33.next = 10;\n                    return prisma.uom_mapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 10:\n                    _context33.next = 12;\n                    return prisma.uom_mapping.createMany({\n                      data: [].concat(_toConsumableArray((productData.purchaseUoms || []).map(function (uom) {\n                        var _productData$variant4;\n                        return {\n                          proid: proid,\n                          pvid: ((_productData$variant4 = productData.variant) === null || _productData$variant4 === void 0 ? void 0 : _productData$variant4.pvid) || null,\n                          uomid: BigInt(uom.uomid),\n                          is_default: uom.is_default || false,\n                          uom_type: BigInt(18),\n                          // Purchase UOM type\n                          createdby: BigInt(userData.uid),\n                          isdeleted: false\n                        };\n                      })), _toConsumableArray(productData.consumptionUom ? [{\n                        proid: proid,\n                        pvid: ((_productData$variant5 = productData.variant) === null || _productData$variant5 === void 0 ? void 0 : _productData$variant5.pvid) || null,\n                        uomid: BigInt(productData.consumptionUom.uomid),\n                        is_default: true,\n                        uom_type: BigInt(19),\n                        // Consumption UOM type\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }] : []))\n                    });\n                  case 12:\n                    if (!productData.variant) {\n                      _context33.next = 23;\n                      break;\n                    }\n                    variantData = {\n                      pvname: productData.proname,\n                      pvbarcode: productData.variant.pvbarcode || null,\n                      pvpurchaseprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvpurchaseprice || 0),\n                      pvsalesprice: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.pvsalesprice || 0),\n                      reconciliation_price: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.reconciliation_price || 0),\n                      normal_loss: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.variant.normal_loss || 0),\n                      modifiedby: BigInt(userData.uid),\n                      modifieddate: new Date()\n                    };\n                    _context33.next = 16;\n                    return prisma.provariants.upsert({\n                      where: {\n                        pvid: productData.variant.pvid || 0\n                      },\n                      update: variantData,\n                      create: _objectSpread(_objectSpread({}, variantData), {}, {\n                        proid: proid,\n                        uoid: BigInt(userData.uoid),\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      })\n                    });\n                  case 16:\n                    variant = _context33.sent;\n                    if (!productData.location) {\n                      _context33.next = 20;\n                      break;\n                    }\n                    _context33.next = 20;\n                    return prisma.provariantlocations.upsert({\n                      where: {\n                        pvlid: productData.location.pvlid\n                      },\n                      update: {\n                        safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.safetylevel || 0),\n                        reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.reorderlevel || 0),\n                        min_stock_uom: BigInt(productData.location.min_stock_uom),\n                        par_stock_uom: BigInt(productData.location.par_stock_uom),\n                        closingstock_on: productData.location.closingstock_on,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      },\n                      create: {\n                        proid: proid,\n                        pvid: variant.pvid,\n                        safetylevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.safetylevel || 0),\n                        reorderlevel: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.location.reorderlevel || 0),\n                        min_stock_uom: BigInt(productData.location.min_stock_uom),\n                        par_stock_uom: BigInt(productData.location.par_stock_uom),\n                        closingstock_on: productData.location.closingstock_on,\n                        createdby: BigInt(userData.uid),\n                        uoid: BigInt(userData.uoid),\n                        isdeleted: false\n                      }\n                    });\n                  case 20:\n                    if (!productData.tax) {\n                      _context33.next = 23;\n                      break;\n                    }\n                    _context33.next = 23;\n                    return prisma.provarianttax.upsert({\n                      where: {\n                        protaxid: productData.tax.protaxid\n                      },\n                      update: {\n                        taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.tax.taxrate || 0),\n                        hsncode: productData.tax.hsncode,\n                        modifiedby: BigInt(userData.uid),\n                        modifieddate: new Date()\n                      },\n                      create: {\n                        proid: proid,\n                        pvid: variant.pvid,\n                        taxrate: new _prisma_client_runtime_library__WEBPACK_IMPORTED_MODULE_4__.Decimal(productData.tax.taxrate || 0),\n                        hsncode: productData.tax.hsncode,\n                        createdby: BigInt(userData.uid),\n                        isdeleted: false\n                      }\n                    });\n                  case 23:\n                    if (!productData.pvamappings) {\n                      _context33.next = 47;\n                      break;\n                    }\n                    _context33.next = 26;\n                    return prisma.pvamapping.findMany({\n                      where: {\n                        proid: proid\n                      },\n                      select: {\n                        pvamid: true\n                      }\n                    });\n                  case 26:\n                    existingMappings = _context33.sent;\n                    _context33.next = 29;\n                    return prisma.pvamvalues.deleteMany({\n                      where: {\n                        pvamid: {\n                          \"in\": existingMappings.map(function (m) {\n                            return m.pvamid;\n                          })\n                        }\n                      }\n                    });\n                  case 29:\n                    _context33.next = 31;\n                    return prisma.pvamapping.deleteMany({\n                      where: {\n                        proid: proid\n                      }\n                    });\n                  case 31:\n                    // Create new mappings and values\n                    _iterator5 = _createForOfIteratorHelper(productData.pvamappings);\n                    _context33.prev = 32;\n                    _loop5 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop5() {\n                      var _productData$variant6;\n                      var mapping, pvamapping;\n                      return _regeneratorRuntime().wrap(function _loop5$(_context32) {\n                        while (1) switch (_context32.prev = _context32.next) {\n                          case 0:\n                            mapping = _step5.value;\n                            _context32.next = 3;\n                            return prisma.pvamapping.create({\n                              data: {\n                                proid: proid,\n                                pvid: ((_productData$variant6 = productData.variant) === null || _productData$variant6 === void 0 ? void 0 : _productData$variant6.pvid) || null,\n                                attributeid: BigInt(mapping.attributeid),\n                                attrtextprompt: mapping.attrtextprompt,\n                                isrequired: mapping.isrequired,\n                                controltype: mapping.controltype,\n                                displayorder: mapping.displayorder,\n                                createdby: BigInt(userData.uid),\n                                isdeleted: false\n                              }\n                            });\n                          case 3:\n                            pvamapping = _context32.sent;\n                            if (!mapping.pvamvaluemodels) {\n                              _context32.next = 7;\n                              break;\n                            }\n                            _context32.next = 7;\n                            return prisma.pvamvalues.createMany({\n                              data: mapping.pvamvaluemodels.map(function (value) {\n                                return {\n                                  pvamid: pvamapping.pvamid,\n                                  avid: BigInt(value.avid),\n                                  pvamvcolor: value.pvamvcolor,\n                                  umid: BigInt(value.umid),\n                                  displayorder: value.displayorder,\n                                  createdby: BigInt(userData.uid),\n                                  isdeleted: false\n                                };\n                              })\n                            });\n                          case 7:\n                          case \"end\":\n                            return _context32.stop();\n                        }\n                      }, _loop5);\n                    });\n                    _iterator5.s();\n                  case 35:\n                    if ((_step5 = _iterator5.n()).done) {\n                      _context33.next = 39;\n                      break;\n                    }\n                    return _context33.delegateYield(_loop5(), \"t0\", 37);\n                  case 37:\n                    _context33.next = 35;\n                    break;\n                  case 39:\n                    _context33.next = 44;\n                    break;\n                  case 41:\n                    _context33.prev = 41;\n                    _context33.t1 = _context33[\"catch\"](32);\n                    _iterator5.e(_context33.t1);\n                  case 44:\n                    _context33.prev = 44;\n                    _iterator5.f();\n                    return _context33.finish(44);\n                  case 47:\n                    _context33.next = 49;\n                    return prisma.product.findUnique({\n                      where: {\n                        proid: proid\n                      },\n                      include: {\n                        productcategorymapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            categories: true\n                          }\n                        },\n                        provariants: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            provariantlocations: true,\n                            provarianttax: true,\n                            pvummapping: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                userimages: true\n                              }\n                            }\n                          }\n                        },\n                        pvamapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            attributes: true,\n                            pvamvalues: {\n                              where: {\n                                isdeleted: false\n                              },\n                              include: {\n                                attributevalues: true\n                              }\n                            }\n                          }\n                        },\n                        uom_mapping: {\n                          where: {\n                            isdeleted: false\n                          },\n                          include: {\n                            unitofmeasure: true,\n                            mastervalues: true\n                          }\n                        }\n                      }\n                    });\n                  case 49:\n                    updatedProduct = _context33.sent;\n                    console.log(\"UPDATED PRODUCT\", updatedProduct);\n                    return _context33.abrupt(\"return\", formatProductForUI(updatedProduct));\n                  case 52:\n                  case \"end\":\n                    return _context33.stop();\n                }\n              }, _callee28, null, [[32, 41, 44, 47]]);\n            }));\n            return function (_x45) {\n              return _ref30.apply(this, arguments);\n            };\n          }());\n        case 3:\n          return _context34.abrupt(\"return\", _context34.sent);\n        case 6:\n          _context34.prev = 6;\n          _context34.t0 = _context34[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('Error updating product:', _context34.t0);\n          throw _context34.t0;\n        case 10:\n        case \"end\":\n          return _context34.stop();\n      }\n    }, _callee29, null, [[0, 6]]);\n  }));\n  return function updateProduct2(_x42, _x43, _x44) {\n    return _ref29.apply(this, arguments);\n  };\n}();\n\n//# sourceURL=webpack://node/./src/services/productService.js?");

/***/ }),

/***/ "./src/services/prowastageServices.js":
/*!********************************************!*\
  !*** ./src/services/prowastageServices.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWastageModalServices: () => (/* binding */ getWastageModalServices),\n/* harmony export */   getWastageServices: () => (/* binding */ getWastageServices),\n/* harmony export */   manageWastageServices: () => (/* binding */ manageWastageServices)\n/* harmony export */ });\n/* harmony import */ var _repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../repositories/prowastageRepositoy.js */ \"./src/repositories/prowastageRepositoy.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\nvar manageWastageServices = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req) {\n    var _req$body, wastageid, wastageno, seriesid, proid, wastageqty, wastagevalue, wastagedate, dom, doe, bcode, fcode, remarks, uomid, uoid, uaid, isdeleted, createdby, createddate, modifiedby, modifieddate, deletedby, deleteddate, isapproved, approvedby, wastagetype, wastageData, wastageDetails;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$body = req.body, wastageid = _req$body.wastageid, wastageno = _req$body.wastageno, seriesid = _req$body.seriesid, proid = _req$body.proid, wastageqty = _req$body.wastageqty, wastagevalue = _req$body.wastagevalue, wastagedate = _req$body.wastagedate, dom = _req$body.dom, doe = _req$body.doe, bcode = _req$body.bcode, fcode = _req$body.fcode, remarks = _req$body.remarks, uomid = _req$body.uomid, uoid = _req$body.uoid, uaid = _req$body.uaid, isdeleted = _req$body.isdeleted, createdby = _req$body.createdby, createddate = _req$body.createddate, modifiedby = _req$body.modifiedby, modifieddate = _req$body.modifieddate, deletedby = _req$body.deletedby, deleteddate = _req$body.deleteddate, isapproved = _req$body.isapproved, approvedby = _req$body.approvedby, wastagetype = _req$body.wastagetype;\n          wastageData = {\n            wastageid: wastageid,\n            wastageno: wastageno,\n            seriesid: seriesid,\n            proid: proid,\n            wastageqty: wastageqty,\n            wastagevalue: wastagevalue,\n            wastagedate: wastagedate,\n            dom: dom,\n            doe: doe,\n            bcode: bcode,\n            fcode: fcode,\n            remarks: remarks,\n            uomid: uomid,\n            uoid: uoid,\n            uaid: uaid,\n            isdeleted: isdeleted,\n            createdby: createdby,\n            createddate: createddate,\n            modifiedby: modifiedby,\n            modifieddate: modifieddate,\n            deletedby: deletedby,\n            deleteddate: deleteddate,\n            isapproved: isapproved,\n            approvedby: approvedby,\n            wastagetype: wastagetype\n          };\n          _context.next = 5;\n          return (0,_repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__.manageWastage)(wastageData);\n        case 5:\n          wastageDetails = _context.sent;\n          return _context.abrupt(\"return\", wastageDetails);\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error getting tables', {\n            error: _context.t0.message,\n            stack: _context.t0.stack\n          });\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 9]]);\n  }));\n  return function manageWastageServices(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getWastageModalServices = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req) {\n    var productsDataModal, wastageData, nextWastageNo;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return (0,_repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__.getProductsForModal)();\n        case 3:\n          productsDataModal = _context2.sent;\n          _context2.next = 6;\n          return (0,_repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__.getWastageTypes)(4);\n        case 6:\n          wastageData = _context2.sent;\n          // Get next wastage number (you might need to implement this based on your requirements)\n          nextWastageNo = \"1\"; // Placeholder - implement your logic here\n          return _context2.abrupt(\"return\", {\n            template: {\n              wastageno: nextWastageNo,\n              seriesid: 0,\n              proid: null,\n              pvid: null,\n              wastageqty: 0,\n              wastagevalue: 0,\n              wastagedate: new Date().toISOString().split('T')[0],\n              remarks: \"\",\n              wastagetype: null,\n              attachments: []\n            },\n            dropdowns: {\n              products: productsDataModal,\n              wastageTypes: wastageData.map(function (type) {\n                return {\n                  id: type.mvid,\n                  value: type.mastervalue\n                };\n              })\n            }\n          });\n        case 11:\n          _context2.prev = 11;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('Error in ProWastageService.getWastageModal:', _context2.t0);\n          throw _context2.t0;\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 11]]);\n  }));\n  return function getWastageModalServices(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getWastageServices = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req) {\n    var getWastageByidData, _req$body2, _req$body2$page, page, _req$body2$limit, limit, wastageData;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!req.body.wastageid) {\n            _context3.next = 3;\n            break;\n          }\n          getWastageByidData = (0,_repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__.getWastageById)(req.body.wastageid);\n          return _context3.abrupt(\"return\", getWastageByidData);\n        case 3:\n          _req$body2 = req.body, _req$body2$page = _req$body2.page, page = _req$body2$page === void 0 ? 1 : _req$body2$page, _req$body2$limit = _req$body2.limit, limit = _req$body2$limit === void 0 ? 10 : _req$body2$limit;\n          _context3.next = 6;\n          return (0,_repositories_prowastageRepositoy_js__WEBPACK_IMPORTED_MODULE_0__.getWastages)(page, limit);\n        case 6:\n          wastageData = _context3.sent;\n          return _context3.abrupt(\"return\", wastageData);\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getWastageServices(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/services/prowastageServices.js?");

/***/ }),

/***/ "./src/services/userLoginService.js":
/*!******************************************!*\
  !*** ./src/services/userLoginService.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticate: () => (/* binding */ authenticate),\n/* harmony export */   updateLoginTime: () => (/* binding */ updateLoginTime),\n/* harmony export */   updateLogoutTime: () => (/* binding */ updateLogoutTime)\n/* harmony export */ });\n/* harmony import */ var _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/prisma.js */ \"./src/config/prisma.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../middleware/errorHandler.js */ \"./src/middleware/errorHandler.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/logger.js */ \"./src/utils/logger.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n\n\n\n\n\nvar authenticate = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username, password) {\n    var _user$uoid, _user$roleid, user, isPasswordValid, effectiveOrgId, addressMapping, token;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          if (!(!username || !password)) {\n            _context.next = 3;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_3__.ValidationError('Username and password are required');\n        case 3:\n          _context.next = 5;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userlogin.findFirst({\n            where: {\n              username: {\n                equals: username,\n                mode: 'insensitive'\n              },\n              isdeleted: false\n            }\n          });\n        case 5:\n          user = _context.sent;\n          if (user) {\n            _context.next = 9;\n            break;\n          }\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].warn('Authentication failed: User not found', {\n            username: username\n          });\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_3__.AppError('Invalid credentials', 401);\n        case 9:\n          _context.next = 11;\n          return bcrypt__WEBPACK_IMPORTED_MODULE_1__.compare(password, user.password);\n        case 11:\n          isPasswordValid = _context.sent;\n          if (isPasswordValid) {\n            _context.next = 14;\n            break;\n          }\n          throw new _middleware_errorHandler_js__WEBPACK_IMPORTED_MODULE_3__.AppError('Invalid email or password', 401);\n        case 14:\n          // Get the effective organization ID\n          effectiveOrgId = user.uoid || user.roleid_orgid; // Get the address mapping for the effective organization\n          _context.next = 17;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userorgaddressmapping.findFirst({\n            where: {\n              uoid: effectiveOrgId,\n              isdeleted: false\n            },\n            select: {\n              uaid: true\n            }\n          });\n        case 17:\n          addressMapping = _context.sent;\n          // Create JWT token\n          token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__.sign({\n            uid: user.uid.toString(),\n            uoid: user === null || user === void 0 || (_user$uoid = user.uoid) === null || _user$uoid === void 0 ? void 0 : _user$uoid.toString(),\n            username: user.username,\n            roleid: user === null || user === void 0 || (_user$roleid = user.roleid) === null || _user$roleid === void 0 ? void 0 : _user$roleid.toString()\n          }, \"4578794658552255DDFF\", {\n            expiresIn: '24h'\n          }); // // Log login attempt\n          // await prisma.userLogin.create({\n          //     data: {\n          //         uid: user.uid,\n          //         uoid: user.UserRoleMapping[0]?.uoid,\n          //         username: user.fullname,\n          //         logintime: new Date(),\n          //         roleid: user.UserRoleMapping[0]?.roleid,\n          //         fullname: user.fullname,\n          //         employee_id: user.employee_id,\n          //         profilestatus: user.profilestatus,\n          //         accountstatus: user.accountstatus\n          //     }\n          // });\n          // Remove sensitive data before sending response\n          // const { password: _, ...userWithoutPassword } = user;\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].info('User authenticated successfully', {\n            uid: user.uid,\n            username: username,\n            effectiveOrgId: effectiveOrgId,\n            uaid: addressMapping === null || addressMapping === void 0 ? void 0 : addressMapping.uaid\n          });\n          return _context.abrupt(\"return\", {\n            ulid: user.ulid,\n            uid: user.uid,\n            uoid: user.roleid == 1 ? user.uoid : user.roleid_orgid,\n            username: user.username,\n            roleid: user.roleid,\n            fullname: user.fullname,\n            uaid: (addressMapping === null || addressMapping === void 0 ? void 0 : addressMapping.uaid) || null,\n            token: token\n          });\n        case 23:\n          _context.prev = 23;\n          _context.t0 = _context[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error('Authentication error', {\n            error: _context.t0.message,\n            stack: _context.t0.stack,\n            username: username\n          });\n          throw _context.t0;\n        case 27:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 23]]);\n  }));\n  return function authenticate(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar updateLoginTime = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ulid) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userlogin.update({\n            where: {\n              ulid: ulid\n            },\n            data: {\n              logintime: new Date()\n            }\n          });\n        case 3:\n          _context2.next = 9;\n          break;\n        case 5:\n          _context2.prev = 5;\n          _context2.t0 = _context2[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error('Error updating login time', {\n            error: _context2.t0.message,\n            stack: _context2.t0.stack,\n            ulid: ulid\n          });\n          throw _context2.t0;\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 5]]);\n  }));\n  return function updateLoginTime(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateLogoutTime = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(ulid) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return _config_prisma_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].userlogin.update({\n            where: {\n              ulid: ulid\n            },\n            data: {\n              logouttime: new Date()\n            }\n          });\n        case 3:\n          _context3.next = 8;\n          break;\n        case 5:\n          _context3.prev = 5;\n          _context3.t0 = _context3[\"catch\"](0);\n          _utils_logger_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].error('Error updating logout time', {\n            error: _context3.t0.message,\n            stack: _context3.t0.stack,\n            ulid: ulid\n          });\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 5]]);\n  }));\n  return function updateLogoutTime(_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n\n//# sourceURL=webpack://node/./src/services/userLoginService.js?");

/***/ }),

/***/ "./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"winston\");\n\nvar logger = winston__WEBPACK_IMPORTED_MODULE_0__.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: winston__WEBPACK_IMPORTED_MODULE_0__.format.combine(winston__WEBPACK_IMPORTED_MODULE_0__.format.timestamp(), winston__WEBPACK_IMPORTED_MODULE_0__.format.errors({\n    stack: true\n  }), winston__WEBPACK_IMPORTED_MODULE_0__.format.splat(), winston__WEBPACK_IMPORTED_MODULE_0__.format.json()),\n  defaultMeta: {\n    service: 'respos-api'\n  },\n  transports: [new winston__WEBPACK_IMPORTED_MODULE_0__.transports.Console({\n    format: winston__WEBPACK_IMPORTED_MODULE_0__.format.combine(winston__WEBPACK_IMPORTED_MODULE_0__.format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0__.format.simple())\n  }), new winston__WEBPACK_IMPORTED_MODULE_0__.transports.File({\n    filename: 'logs/error.log',\n    level: 'error'\n  }), new winston__WEBPACK_IMPORTED_MODULE_0__.transports.File({\n    filename: 'logs/combined.log'\n  })]\n});\nif (true) {\n  logger.add(new winston__WEBPACK_IMPORTED_MODULE_0__.transports.Console({\n    format: winston__WEBPACK_IMPORTED_MODULE_0__.format.simple()\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n\n//# sourceURL=webpack://node/./src/utils/logger.js?");

/***/ }),

/***/ "./src/utils/serializer.js":
/*!*********************************!*\
  !*** ./src/utils/serializer.js ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   serializeData: () => (/* binding */ serializeData)\n/* harmony export */ });\nvar serializeData = function serializeData(data) {\n  return JSON.parse(JSON.stringify(data, function (_, value) {\n    return typeof value === 'bigint' ? value.toString() : value;\n  }));\n};\n\n//# sourceURL=webpack://node/./src/utils/serializer.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.js");
/******/ 	
/******/ })()
;